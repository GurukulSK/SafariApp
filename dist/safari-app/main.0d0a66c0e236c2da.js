"use strict";(self.webpackChunksafari_app=self.webpackChunksafari_app||[]).push([[179],{2011:(_t,xe,F)=>{F.d(xe,{Dh:()=>le,GT:()=>pe,cc:()=>ke,hO:()=>He,on:()=>z,pX:()=>se,xv:()=>me});var f=F(4650),$=F(9260),P=F(2122);_t=F.hmd(_t);const re=["ngOnDestroy"],se=(he,Qe,et,Re={})=>new Proxy(he,{get:(Me,be)=>et.runOutsideAngular(()=>{var We;if(he[be])return!(null===(We=Re?.spy)||void 0===We)&&We.get&&Re.spy.get(be,he[be]),he[be];if(re.indexOf(be)>-1)return()=>{};const ne=Qe.toPromise().then(ae=>{const _e=ae&&ae[be];return"function"==typeof _e?_e.bind(ae):_e&&_e.then?_e.then(ze=>et.run(()=>ze)):et.run(()=>_e)});return new Proxy(()=>{},{get:(ae,_e)=>ne[_e],apply:(ae,_e,ze)=>ne.then(qe=>{var kt;const Xe=qe&&qe(...ze);return!(null===(kt=Re?.spy)||void 0===kt)&&kt.apply&&Re.spy.apply(be,ze,Xe),Xe})})})}),pe=(he,Qe)=>{Qe.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Re=>{Object.defineProperty(he.prototype,Re,Object.getOwnPropertyDescriptor(et.prototype||et,Re))})})};class de{constructor(Qe){return Qe}}const le=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function z(he,Qe,et){const Me="object"==typeof et&&et||{};Me.name=Me.name||"string"==typeof et&&et||"[DEFAULT]";const We=$.Z.apps.filter(ne=>ne&&ne.name===Me.name)[0]||Qe.runOutsideAngular(()=>$.Z.initializeApp(he,Me));try{JSON.stringify(he)!==JSON.stringify(We.options)&&G("error",`${We.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(We)}const G=(he,...Qe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[he](...Qe)},X={provide:de,useFactory:z,deps:[le,f.R0b,[new f.FiY,me]]};let He=(()=>{class he{constructor(et){$.Z.registerVersion("angularfire",P.q4.full,"core"),$.Z.registerVersion("angularfire",P.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,et.toString())}static initializeApp(et,Re){return{ngModule:he,providers:[{provide:le,useValue:et},{provide:me,useValue:Re}]}}}return he.\u0275fac=function(et){return new(et||he)(f.LFG(f.Lbi))},he.\u0275mod=f.oAB({type:he}),he.\u0275inj=f.cJS({providers:[X]}),he})();function ke(he,Qe,et,Re,Me){const[,be,We]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===he)||[];if(be)return function Te(he,Qe){try{return he.toString()===Qe.toString()}catch{return he===Qe}}(Me,We)||(ve("error",`${Qe} was already initialized on the ${et} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Me,was:We})),be;{const ne=Re();return globalThis.\u0275AngularfireInstanceCache.push([he,ne,Me]),ne}}const tt=!!_t.hot,ve=(he,...Qe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[he](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(_t,xe,F)=>{F.d(xe,{q4:()=>oc,iC:()=>gr,HU:()=>uo,vb:()=>ao,JM:()=>ea,u3:()=>Di});var f=F(4650),$=F(259),P=F(5861),re=F(9681),se=F(2090),pe=F(4859),de=F(1877),le=F(8766);const me="@firebase/installations",z="0.6.3",X=`w:${z}`,He="FIS_v2",Qe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(b){return b instanceof se.ZR&&b.code.includes("request-failed")}function Re({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Me(b){return{token:b.token,requestStatus:2,expiresIn:qe(b.expiresIn),creationTime:Date.now()}}function be(b,T){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(b,T){const B=(yield T.json()).error;return Qe.create("request-failed",{requestName:b,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function ne({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ae(b,{refreshToken:T}){const R=ne(b);return R.append("Authorization",function kt(b){return`${He} ${b}`}(T)),R}function _e(b){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function qe(b){return Number(b.replace("s","000"))}function Xe(b,T){return oe.apply(this,arguments)}function oe(){return(oe=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:R}){const B=Re(b),Y=ne(b),ie=T.getImmediate({optional:!0});if(ie){const wt=yield ie.getHeartbeatsHeader();wt&&Y.append("x-firebase-client",wt)}const Ke={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:He,appId:b.appId,sdkVersion:X})},ut=yield _e(()=>fetch(B,Ke));if(ut.ok){const wt=yield ut.json();return{fid:wt.fid||R,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Me(wt.authToken)}}throw yield be("Create Installation",ut)})).apply(this,arguments)}function ge(b){return new Promise(T=>{setTimeout(T,b)})}const Oe=/^[cdef][\w-]{21}$/;function De(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const R=function ft(b){return function Ee(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Oe.test(R)?R:""}catch{return""}}function Ft(b){return`${b.appName}!${b.appId}`}const _n=new Map;function it(b,T){const R=Ft(b);tn(R,T),function Gn(b,T){const R=function fn(){return!Bn&&"BroadcastChannel"in self&&(Bn=new BroadcastChannel("[Firebase] FID Change"),Bn.onmessage=b=>{tn(b.data.key,b.data.fid)}),Bn}();R&&R.postMessage({key:b,fid:T}),function wr(){0===_n.size&&Bn&&(Bn.close(),Bn=null)}()}(R,T)}function tn(b,T){const R=_n.get(b);if(R)for(const B of R)B(T)}let Bn=null;const zn="firebase-installations-store";let Ni=null;function $i(){return Ni||(Ni=(0,le.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(zn)}})),Ni}function Je(b,T){return lr.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(b,T){const R=Ft(b),Y=(yield $i()).transaction(zn,"readwrite"),ie=Y.objectStore(zn),we=yield ie.get(R);return yield ie.put(T,R),yield Y.done,(!we||we.fid!==T.fid)&&it(b,T.fid),T})).apply(this,arguments)}function er(b){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,P.Z)(function*(b){const T=Ft(b),B=(yield $i()).transaction(zn,"readwrite");yield B.objectStore(zn).delete(T),yield B.done})).apply(this,arguments)}function xr(b,T){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(b,T){const R=Ft(b),Y=(yield $i()).transaction(zn,"readwrite"),ie=Y.objectStore(zn),we=yield ie.get(R),Ke=T(we);return void 0===Ke?yield ie.delete(R):yield ie.put(Ke,R),yield Y.done,Ke&&(!we||we.fid!==Ke.fid)&&it(b,Ke.fid),Ke})).apply(this,arguments)}function An(b){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,P.Z)(function*(b){let T;const R=yield xr(b.appConfig,B=>{const Y=bn(B),ie=yt(b,Y);return T=ie.registrationPromise,ie.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function bn(b){return Pt(b||{fid:De(),registrationStatus:0})}function yt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Qe.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function vt(b,T){return Vt.apply(this,arguments)}(b,R);return{installationEntry:R,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:si(b)}:{installationEntry:T}}function Vt(){return(Vt=(0,P.Z)(function*(b,T){try{const R=yield Xe(b,T);return Je(b.appConfig,R)}catch(R){throw et(R)&&409===R.customData.serverCode?yield er(b.appConfig):yield Je(b.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function si(b){return tr.apply(this,arguments)}function tr(){return(tr=(0,P.Z)(function*(b){let T=yield Wr(b.appConfig);for(;1===T.registrationStatus;)yield ge(100),T=yield Wr(b.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:B}=yield An(b);return B||R}return T})).apply(this,arguments)}function Wr(b){return xr(b,T=>{if(!T)throw Qe.create("installation-not-found");return Pt(T)})}function Pt(b){return function ei(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function jt(b,T){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},R){const B=nn(b,R),Y=ae(b,R),ie=T.getImmediate({optional:!0});if(ie){const wt=yield ie.getHeartbeatsHeader();wt&&Y.append("x-firebase-client",wt)}const Ke={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},ut=yield _e(()=>fetch(B,Ke));if(ut.ok)return Me(yield ut.json());throw yield be("Generate Auth Token",ut)})).apply(this,arguments)}function nn(b,{fid:T}){return`${Re(b)}/${T}/authTokens:generate`}function Er(b){return On.apply(this,arguments)}function On(){return(On=(0,P.Z)(function*(b,T=!1){let R;const B=yield xr(b.appConfig,ie=>{if(!sn(ie))throw Qe.create("not-registered");const we=ie.authToken;if(!T&&W(we))return ie;if(1===we.requestStatus)return R=nt(b,T),ie;{if(!navigator.onLine)throw Qe.create("app-offline");const Ke=K(ie);return R=xt(b,Ke),Ke}});return R?yield R:B.authToken})).apply(this,arguments)}function nt(b,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,P.Z)(function*(b,T){let R=yield rt(b.appConfig);for(;1===R.authToken.requestStatus;)yield ge(100),R=yield rt(b.appConfig);const B=R.authToken;return 0===B.requestStatus?Er(b,T):B})).apply(this,arguments)}function rt(b){return xr(b,T=>{if(!sn(T))throw Qe.create("not-registered");return function U(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xt(b,T){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,P.Z)(function*(b,T){try{const R=yield jt(b,T),B=Object.assign(Object.assign({},T),{authToken:R});return yield Je(b.appConfig,B),R}catch(R){if(!et(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Je(b.appConfig,B)}else yield er(b.appConfig);throw R}})).apply(this,arguments)}function sn(b){return void 0!==b&&2===b.registrationStatus}function W(b){return 2===b.requestStatus&&!function H(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function K(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function V(){return(V=(0,P.Z)(function*(b){const T=b,{installationEntry:R,registrationPromise:B}=yield An(T);return B?B.catch(console.error):Er(T).catch(console.error),R.fid})).apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(b,T=!1){const R=b;return yield st(R),(yield Er(R,T)).token})).apply(this,arguments)}function st(b){return ct.apply(this,arguments)}function ct(){return(ct=(0,P.Z)(function*(b){const{registrationPromise:T}=yield An(b);T&&(yield T)})).apply(this,arguments)}function zs(b){return Qe.create("missing-app-config-values",{valueName:b})}const bo="installations",qs=b=>{const T=b.getProvider("app").getImmediate(),R=function Mn(b){if(!b||!b.options)throw zs("App Configuration");if(!b.name)throw zs("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!b.options[R])throw zs(R);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,re._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Zs=b=>{const T=b.getProvider("app").getImmediate(),R=(0,re._getProvider)(T,bo).getImmediate();return{getId:()=>function M(b){return V.apply(this,arguments)}(R),getToken:Y=>function J(b){return Ve.apply(this,arguments)}(R,Y)}};(function wu(){(0,re._registerComponent)(new pe.wA(bo,qs,"PUBLIC")),(0,re._registerComponent)(new pe.wA("installations-internal",Zs,"PRIVATE"))})(),(0,re.registerVersion)(me,z),(0,re.registerVersion)(me,z,"esm2017");const os="@firebase/remote-config",rr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jl{constructor(T,R,B,Y){this.client=T,this.storage=R,this.storageCache=B,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-R,Y=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,P.Z)(function*(){const[B,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,B))return Y;T.eTag=Y&&Y.eTag;const ie=yield R.client.fetch(T),we=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&we.push(R.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(we),ie})()}}function ya(b=navigator){return b.languages&&b.languages[0]||b.language}class Xs{constructor(T,R,B,Y,ie,we){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=B,this.projectId=Y,this.apiKey=ie,this.appId=we}fetch(T){var R=this;return(0,P.Z)(function*(){const[B,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),we=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ut={sdk_version:R.sdkVersion,app_instance_id:B,app_instance_id_token:Y,app_id:R.appId,language_code:ya()},wt={method:"POST",headers:Ke,body:JSON.stringify(ut)},Wt=fetch(we,wt),Rt=new Promise((Nr,di)=>{T.signal.addEventListener(()=>{const Tf=new Error("The operation was aborted.");Tf.name="AbortError",di(Tf)})});let Ur;try{yield Promise.race([Wt,Rt]),Ur=yield Wt}catch(Nr){let di="fetch-client-network";throw"AbortError"===Nr?.name&&(di="fetch-timeout"),rr.create(di,{originalErrorMessage:Nr?.message})}let mr=Ur.status;const fo=Ur.headers.get("ETag")||void 0;let Gt,Zr;if(200===Ur.status){let Nr;try{Nr=yield Ur.json()}catch(di){throw rr.create("fetch-client-parse",{originalErrorMessage:di?.message})}Gt=Nr.entries,Zr=Nr.state}if("INSTANCE_STATE_UNSPECIFIED"===Zr?mr=500:"NO_CHANGE"===Zr?mr=304:("NO_TEMPLATE"===Zr||"EMPTY_CONFIG"===Zr)&&(Gt={}),304!==mr&&200!==mr)throw rr.create("fetch-status",{httpStatus:mr});return{status:mr,eTag:fo,config:Gt}})()}}class ls{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,P.Z)(function*(){const B=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:B}){var Y=this;return(0,P.Z)(function*(){yield function Ei(b,T){return new Promise((R,B)=>{const Y=Math.max(T-Date.now(),0),ie=setTimeout(R,Y);b.addEventListener(()=>{clearTimeout(ie),B(rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ie=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Ag(b){if(!(b instanceof se.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ie))throw ie;const we={throttleEndTimeMillis:Date.now()+(0,se.$s)(B),backoffCount:B+1};return yield Y.storage.setThrottleMetadata(we),Y.attemptFetch(T,we)}})()}}class Rg{constructor(T,R,B,Y,ie){this.app=T,this._client=R,this._storageCache=B,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function va(b,T){const R=b.target.error||void 0;return rr.create(T,{originalErrorMessage:R&&R?.message})}const To="app_namespace_store";class ld{constructor(T,R,B,Y=function Ng(){return new Promise((b,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=B=>{T(va(B,"storage-open"))},R.onsuccess=B=>{b(B.target.result)},R.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(To,{keyPath:"compositeKey"})}}catch(R){T(rr.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=B,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,P.Z)(function*(){const B=yield R.openDbPromise;return new Promise((Y,ie)=>{const Ke=B.transaction([To],"readonly").objectStore(To),ut=R.createCompositeKey(T);try{const wt=Ke.get(ut);wt.onerror=Wt=>{ie(va(Wt,"storage-get"))},wt.onsuccess=Wt=>{const Rt=Wt.target.result;Y(Rt?Rt.value:void 0)}}catch(wt){ie(rr.create("storage-get",{originalErrorMessage:wt?.message}))}})})()}set(T,R){var B=this;return(0,P.Z)(function*(){const Y=yield B.openDbPromise;return new Promise((ie,we)=>{const ut=Y.transaction([To],"readwrite").objectStore(To),wt=B.createCompositeKey(T);try{const Wt=ut.put({compositeKey:wt,value:R});Wt.onerror=Rt=>{we(va(Rt,"storage-set"))},Wt.onsuccess=()=>{ie()}}catch(Wt){we(rr.create("storage-set",{originalErrorMessage:Wt?.message}))}})})()}delete(T){var R=this;return(0,P.Z)(function*(){const B=yield R.openDbPromise;return new Promise((Y,ie)=>{const Ke=B.transaction([To],"readwrite").objectStore(To),ut=R.createCompositeKey(T);try{const wt=Ke.delete(ut);wt.onerror=Wt=>{ie(va(Wt,"storage-delete"))},wt.onsuccess=()=>{Y()}}catch(wt){ie(rr.create("storage-delete",{originalErrorMessage:wt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class So{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const R=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ie=yield R;ie&&(T.lastFetchStatus=ie);const we=yield B;we&&(T.lastSuccessfulFetchTimestampMillis=we);const Ke=yield Y;Ke&&(T.activeConfig=Ke)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Dy(){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,P.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function cd(){(0,re._registerComponent)(new pe.wA("remote-config",function b(T,{instanceIdentifier:R}){const B=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw rr.create("registration-window");if(!(0,se.hl)())throw rr.create("indexed-db-unavailable");const{projectId:ie,apiKey:we,appId:Ke}=B.options;if(!ie)throw rr.create("registration-project-id");if(!we)throw rr.create("registration-api-key");if(!Ke)throw rr.create("registration-app-id");const ut=new ld(Ke,B.name,R=R||"firebase"),wt=new So(ut),Wt=new de.Yd(os);Wt.logLevel=de.in.ERROR;const Rt=new Xs(Y,re.SDK_VERSION,R,ie,we,Ke),Ur=new ls(Rt,ut),mr=new jl(Ur,ut,wt,Wt),fo=new Rg(B,mr,wt,ut,Wt);return function cr(b){const T=(0,se.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(fo),fo},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(os,"0.4.3"),(0,re.registerVersion)(os,"0.4.3","esm2017")}();const Vr="/firebase-messaging-sw.js",xo="/firebase-cloud-messaging-push-scope",Ss="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Iu="google.c.a.c_id",Hl="google.c.a.c_l",fd="google.c.a.ts",Ro="google.c.a.e";var Ii=(()=>{return(b=Ii||(Ii={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Ii;var b})();function cs(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function li(b){const R=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(R),Y=new Uint8Array(B.length);for(let ie=0;ie<B.length;++ie)Y[ie]=B.charCodeAt(ie);return Y}const Js="fcm_token_details_db",Mo="fcm_token_object_Store";function Pg(b){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Js))return null;let T=null;return(yield(0,le.X3)(Js,5,{upgrade:(B=(0,P.Z)(function*(Y,ie,we,Ke){var ut;if(ie<2||!Y.objectStoreNames.contains(Mo))return;const wt=Ke.objectStore(Mo),Wt=yield wt.index("fcmSenderId").get(b);if(yield wt.clear(),Wt)if(2===ie){const Rt=Wt;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;T={token:Rt.fcmToken,createTime:null!==(ut=Rt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:cs(Rt.vapidKey)}}}else if(3===ie){const Rt=Wt;T={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:cs(Rt.auth),p256dh:cs(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:cs(Rt.vapidKey)}}}else if(4===ie){const Rt=Wt;T={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:cs(Rt.auth),p256dh:cs(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:cs(Rt.vapidKey)}}}}),function(ie,we,Ke,ut){return B.apply(this,arguments)})})).close(),yield(0,le.Lj)(Js),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),Wn(T)?T:null;var B}),Wl.apply(this,arguments)}function Wn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Pi="firebase-messaging-store";let Rr=null;function Cu(){return Rr||(Rr=(0,le.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Pi)}})),Rr}function No(b){return ji.apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*(b){const T=Ci(b),B=yield(yield Cu()).transaction(Pi).objectStore(Pi).get(T);if(B)return B;{const Y=yield Pg(b.appConfig.senderId);if(Y)return yield ln(b,Y),Y}})).apply(this,arguments)}function ln(b,T){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,P.Z)(function*(b,T){const R=Ci(b),Y=(yield Cu()).transaction(Pi,"readwrite");return yield Y.objectStore(Pi).put(T,R),yield Y.done,T})).apply(this,arguments)}function As(b){return zl.apply(this,arguments)}function zl(){return(zl=(0,P.Z)(function*(b){const T=Ci(b),B=(yield Cu()).transaction(Pi,"readwrite");yield B.objectStore(Pi).delete(T),yield B.done})).apply(this,arguments)}function Ci({appConfig:b}){return b.appId}const qn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $t(b,T){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,P.Z)(function*(b,T){const R=yield ba(b),B=Ne(T),Y={method:"POST",headers:R,body:JSON.stringify(B)};let ie;try{ie=yield(yield fetch(eo(b.appConfig),Y)).json()}catch(we){throw qn.create("token-subscribe-failed",{errorInfo:we?.toString()})}if(ie.error)throw qn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw qn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Og(b,T){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(b,T){const R=yield ba(b),B=Ne(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(B)};let ie;try{ie=yield(yield fetch(`${eo(b.appConfig)}/${T.token}`,Y)).json()}catch(we){throw qn.create("token-update-failed",{errorInfo:we?.toString()})}if(ie.error)throw qn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw qn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function gd(b,T){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*(b,T){const B={method:"DELETE",headers:yield ba(b)};try{const ie=yield(yield fetch(`${eo(b.appConfig)}/${T}`,B)).json();if(ie.error)throw qn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw qn.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function eo({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ba(b){return ko.apply(this,arguments)}function ko(){return(ko=(0,P.Z)(function*({appConfig:b,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ne({p256dh:b,auth:T,endpoint:R,vapidKey:B}){const Y={web:{endpoint:R,auth:T,p256dh:b}};return B!==Ss&&(Y.web.applicationPubKey=B),Y}const Xt=6048e5;function cf(b){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(b){const T=yield df(b.swRegistration,b.vapidKey),R={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:cs(T.getKey("auth")),p256dh:cs(T.getKey("p256dh"))},B=yield No(b.firebaseDependencies);if(B){if(Fg(B.subscriptionOptions,R))return Date.now()>=B.createTime+Xt?bu(b,{token:B.token,createTime:Date.now(),subscriptionOptions:R}):B.token;try{yield gd(b.firebaseDependencies,B.token)}catch(Y){console.warn(Y)}return Du(b.firebaseDependencies,R)}return Du(b.firebaseDependencies,R)})).apply(this,arguments)}function hr(b){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(b){const T=yield No(b.firebaseDependencies);T&&(yield gd(b.firebaseDependencies,T.token),yield As(b.firebaseDependencies));const R=yield b.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function bu(b,T){return ti.apply(this,arguments)}function ti(){return(ti=(0,P.Z)(function*(b,T){try{const R=yield Og(b.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield ln(b.firebaseDependencies,B),R}catch(R){throw yield hr(b),R}})).apply(this,arguments)}function Du(b,T){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(b,T){const B={token:yield $t(b,T),createTime:Date.now(),subscriptionOptions:T};return yield ln(b,B),B.token})).apply(this,arguments)}function df(b,T){return Da.apply(this,arguments)}function Da(){return(Da=(0,P.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:li(T)})})).apply(this,arguments)}function Fg(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function to(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function fr(b,T){if(!T.notification)return;b.notification={};const R=T.notification.title;R&&(b.notification.title=R);const B=T.notification.body;B&&(b.notification.body=B);const Y=T.notification.image;Y&&(b.notification.image=Y);const ie=T.notification.icon;ie&&(b.notification.icon=ie)}(T,b),function Hi(b,T){!T.data||(b.data=T.data)}(T,b),function Ta(b,T){var R,B,Y,ie,we;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;b.fcmOptions={};const Ke=null!==(Y=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==Y?Y:null===(ie=T.notification)||void 0===ie?void 0:ie.click_action;Ke&&(b.fcmOptions.link=Ke);const ut=null===(we=T.fcmOptions)||void 0===we?void 0:we.analytics_label;ut&&(b.fcmOptions.analyticsLabel=ut)}(T,b),T}function Sa(b){return"object"==typeof b&&!!b&&Iu in b}function ds(b,T){const R=[];for(let B=0;B<b.length;B++)R.push(b.charAt(B)),B<T.length&&R.push(T.charAt(B));return R.join("")}function ql(b){return qn.create("missing-app-config-values",{valueName:b})}ds("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ds("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _d{constructor(T,R,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function md(b){if(!b||!b.options)throw ql("App Configuration Object");if(!b.name)throw ql("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=b;for(const B of T)if(!R[B])throw ql(B);return{appName:b.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:B}}_delete(){return Promise.resolve()}}function hf(b){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Vr,{scope:xo}),b.swRegistration.update().catch(()=>{})}catch(T){throw qn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Zl(b,T){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,P.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield hf(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Kl(b,T){return xa.apply(this,arguments)}function xa(){return(xa=(0,P.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Ss)})).apply(this,arguments)}function Vo(){return(Vo=(0,P.Z)(function*(b,T){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield Kl(b,T?.vapidKey),yield Zl(b,T?.serviceWorkerRegistration),cf(b)})).apply(this,arguments)}function ff(b,T,R){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,P.Z)(function*(b,T,R){const B=pf(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:R[Iu],message_name:R[Hl],message_time:R[fd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pf(b){switch(b){case Ii.NOTIFICATION_CLICKED:return"notification_open";case Ii.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xs(){return(xs=(0,P.Z)(function*(b,T){const R=T.data;if(!R.isFirebaseMessaging)return;b.onMessageHandler&&R.messageType===Ii.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(to(R)):b.onMessageHandler.next(to(R)));const B=R.data;Sa(B)&&"1"===B[Ro]&&(yield ff(b,R.messageType,B))})).apply(this,arguments)}const Rs="@firebase/messaging",$n=b=>{const T=new _d(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function vd(b,T){return xs.apply(this,arguments)}(T,R)),T},hs=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:B=>function yd(b,T){return Vo.apply(this,arguments)}(T,B)}};function Ed(){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,P.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fn(){(0,re._registerComponent)(new pe.wA("messaging",$n,"PUBLIC")),(0,re._registerComponent)(new pe.wA("messaging-internal",hs,"PRIVATE")),(0,re.registerVersion)(Rs,"0.12.3"),(0,re.registerVersion)(Rs,"0.12.3","esm2017")}();const $o="analytics",Cd="firebase_id",ec="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bd="https://www.googletagmanager.com/gtag/js",Zn=new de.Yd("@firebase/analytics");function Su(b){return Promise.all(b.map(T=>T.catch(R=>R)))}function Au(b,T){const R=document.createElement("script");R.src=`${bd}?l=${b}&id=${T}`,R.async=!0,document.head.appendChild(R)}function mf(b,T,R,B,Y,ie){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,P.Z)(function*(b,T,R,B,Y,ie){const we=B[Y];try{if(we)yield T[we];else{const ut=(yield Su(R)).find(wt=>wt.measurementId===Y);ut&&(yield T[ut.appId])}}catch(Ke){Zn.error(Ke)}b("config",Y,ie)})).apply(this,arguments)}function fs(b,T,R,B,Y){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,P.Z)(function*(b,T,R,B,Y){try{let ie=[];if(Y&&Y.send_to){let we=Y.send_to;Array.isArray(we)||(we=[we]);const Ke=yield Su(R);for(const ut of we){const wt=Ke.find(Rt=>Rt.measurementId===ut),Wt=wt&&T[wt.appId];if(!Wt){ie=[];break}ie.push(Wt)}}0===ie.length&&(ie=Object.values(T)),yield Promise.all(ie),b("event",B,Y||{})}catch(ie){Zn.error(ie)}})).apply(this,arguments)}function Dd(b){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(bd)&&R.src.includes(b))return R;return null}const pr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ka=new class nc{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function jo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function vf(b){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,P.Z)(function*(b){var T;const{appId:R,apiKey:B}=b,Y={method:"GET",headers:jo(B)},ie=ec.replace("{app-id}",R),we=yield fetch(ie,Y);if(200!==we.status&&304!==we.status){let Ke="";try{const ut=yield we.json();null!==(T=ut.error)&&void 0!==T&&T.message&&(Ke=ut.error.message)}catch{}throw pr.create("config-fetch-failed",{httpStatus:we.status,responseMessage:Ke})}return we.json()})).apply(this,arguments)}function Td(b){return ci.apply(this,arguments)}function ci(){return(ci=(0,P.Z)(function*(b,T=ka,R){const{appId:B,apiKey:Y,measurementId:ie}=b.options;if(!B)throw pr.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:B};throw pr.create("no-api-key")}const we=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Pa;return setTimeout((0,P.Z)(function*(){Ke.abort()}),void 0!==R?R:6e4),Sd({appId:B,apiKey:Y,measurementId:ie},we,Ke,T)})).apply(this,arguments)}function Sd(b,T,R){return ps.apply(this,arguments)}function ps(){return(ps=(0,P.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:R},B,Y=ka){var ie;const{appId:we,measurementId:Ke}=b;try{yield rc(B,T)}catch(ut){if(Ke)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${ut?.message}]`),{appId:we,measurementId:Ke};throw ut}try{const ut=yield vf(b);return Y.deleteThrottleMetadata(we),ut}catch(ut){const wt=ut;if(!Mu(wt)){if(Y.deleteThrottleMetadata(we),Ke)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${wt?.message}]`),{appId:we,measurementId:Ke};throw ut}const Wt=503===Number(null===(ie=wt?.customData)||void 0===ie?void 0:ie.httpStatus)?(0,se.$s)(R,Y.intervalMillis,30):(0,se.$s)(R,Y.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+Wt,backoffCount:R+1};return Y.setThrottleMetadata(we,Rt),Zn.debug(`Calling attemptFetch again in ${Wt} millis`),Sd(b,Rt,B,Y)}})).apply(this,arguments)}function rc(b,T){return new Promise((R,B)=>{const Y=Math.max(T-Date.now(),0),ie=setTimeout(R,Y);b.addEventListener(()=>{clearTimeout(ie),B(pr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Mu(b){if(!(b instanceof se.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Pa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let no,ku;function Ho(){return(Ho=(0,P.Z)(function*(b,T,R,B,Y){if(Y&&Y.global)b("event",R,B);else{const ie=yield T;b("event",R,Object.assign(Object.assign({},B),{send_to:ie}))}})).apply(this,arguments)}function qo(b){ku=b}function ic(b){no=b}function Ns(){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*(){if(!(0,se.hl)())return Zn.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(b){return Zn.warn(pr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ko(){return(Ko=(0,P.Z)(function*(b,T,R,B,Y,ie,we){var Ke;const ut=Td(b);ut.then(mr=>{R[mr.measurementId]=mr.appId,b.options.measurementId&&mr.measurementId!==b.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Zn.error(mr)),T.push(ut);const wt=Ns().then(mr=>{if(mr)return B.getId()}),[Wt,Rt]=yield Promise.all([ut,wt]);Dd(ie)||Au(ie,Wt.measurementId),ku&&(Y("consent","default",ku),qo(void 0)),Y("js",new Date);const Ur=null!==(Ke=we?.config)&&void 0!==Ke?Ke:{};return Ur.origin="firebase",Ur.update=!0,null!=Rt&&(Ur[Cd]=Rt),Y("config",Wt.measurementId,Ur),no&&(Y("set",no),ic(void 0)),Wt.measurementId})).apply(this,arguments)}class Pu{constructor(T){this.app=T}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},Yo=[];const ro={};let Xo,Gi,Qo="dataLayer",xd=!1;function If(b,T,R){!function Lg(){const b=[];if((0,se.ru)()&&b.push("This is a browser extension environment."),(0,se.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((B,Y)=>`(${Y+1}) ${B}`).join(" "),R=pr.create("invalid-analytics-context",{errorInfo:T});Zn.warn(R.message)}}();const B=b.options.appId;if(!B)throw pr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw pr.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[B])throw pr.create("already-exists",{id:B});if(!xd){!function xu(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Qo);const{wrappedGtag:ie,gtagCore:we}=function Na(b,T,R,B,Y){let ie=function(...we){window[B].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function tc(b,T,R,B){function ie(){return(ie=(0,P.Z)(function*(we,Ke,ut){try{"event"===we?yield fs(b,T,R,Ke,ut):"config"===we?yield mf(b,T,R,B,Ke,ut):"consent"===we?b("consent","update",ut):b("set",Ke)}catch(wt){Zn.error(wt)}})).apply(this,arguments)}return function Y(we,Ke,ut){return ie.apply(this,arguments)}}(ie,b,T,R),{gtagCore:ie,wrappedGtag:window[Y]}}(Gr,Yo,ro,Qo,"gtag");Gi=ie,Xo=we,xd=!0}return Gr[B]=function Ef(b,T,R,B,Y,ie,we){return Ko.apply(this,arguments)}(b,Yo,ro,T,Xo,Qo,R),new Pu(b)}function Sy(){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,P.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const dt="@firebase/analytics";!function kn(){(0,re._registerComponent)(new pe.wA($o,(T,{options:R})=>If(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,re._registerComponent)(new pe.wA("analytics-internal",function b(T){try{const R=T.getProvider($o).getImmediate();return{logEvent:(B,Y,ie)=>function yn(b,T,R,B){b=(0,se.m9)(b),function Oa(b,T,R,B,Y){return Ho.apply(this,arguments)}(Gi,Gr[b.app.options.appId],T,R,B).catch(Y=>Zn.error(Y))}(R,B,Y,ie)}}catch(R){throw pr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,re.registerVersion)(dt,"0.9.3"),(0,re.registerVersion)(dt,"0.9.3","esm2017")}();var ms=F(4408),zr=F(7565);const Rd=new class so extends zr.v{}(class io extends ms.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,R,B):(T.flush(this),0)}});var bf=F(4986),ks=F(9751),Nd=F(8505),oo=F(9468),pt=F(5363);const oc=new f.GfV("7.5.0"),qi="__angularfire_symbol__analyticsIsSupportedValue",Fu="__angularfire_symbol__analyticsIsSupported",La="__angularfire_symbol__remoteConfigIsSupportedValue",Ir="__angularfire_symbol__remoteConfigIsSupported",Va="__angularfire_symbol__messagingIsSupportedValue",Lu="__angularfire_symbol__messagingIsSupported";function ea(b,T,R){if(T){if(1===T.length)return T[0];const ie=T.filter(we=>we.app===R);if(1===ie.length)return ie[0]}return R.container.getProvider(b).getImmediate({optional:!0})}globalThis[Fu]||(globalThis[Fu]=Sy().then(b=>globalThis[qi]=b).catch(()=>globalThis[qi]=!1)),globalThis[Lu]||(globalThis[Lu]=Ed().then(b=>globalThis[Va]=b).catch(()=>globalThis[Va]=!1)),globalThis[Ir]||(globalThis[Ir]=Dy().then(b=>globalThis[La]=b).catch(()=>globalThis[La]=!1));const ao=(b,T)=>{const R=T?[T]:(0,$.C6)(),B=[];return R.forEach(Y=>{Y.container.getProvider(b).instances.forEach(we=>{B.includes(we)||B.push(we)})}),B};function Fi(){}class Uu{constructor(T,R=Rd){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,B){const Y=this.zone;return this.delegate.schedule(function(we){Y.runGuarded(()=>{T.apply(this,[we])})},R,B)}}class Ps{constructor(T){this.zone=T,this.task=null}call(T,R){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fi,{},Fi,Fi)),R.pipe((0,Nd.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let uo=(()=>{class b{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Uu(Zone.current)),this.insideAngular=R.run(()=>new Uu(Zone.current,bf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(R){return new(R||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function qr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function kd(b){return qr().ngZone.runOutsideAngular(()=>b())}function jn(b){return qr().ngZone.run(()=>b())}function gr(b){return qr(),function Ln(b){return function(R){return(R=R.lift(new Ps(b.ngZone))).pipe((0,oo.R)(b.outsideAngular),(0,pt.Q)(b.insideAngular))}}(qr())(b)}const ho=(b,T)=>function(){const B=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),jn(()=>b.apply(void 0,B))},Di=(b,T)=>function(){let R;const B=arguments;for(let ie=0;ie<arguments.length;ie++)"function"==typeof B[ie]&&(T&&(R||(R=jn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fi,{},Fi,Fi)))),B[ie]=ho(B[ie],R));const Y=kd(()=>b.apply(this,B));if(!T){if(Y instanceof ks.y){const ie=qr();return Y.pipe((0,oo.R)(ie.outsideAngular),(0,pt.Q)(ie.insideAngular))}return jn(()=>Y)}return Y instanceof ks.y?Y.pipe(gr):Y instanceof Promise?jn(()=>new Promise((ie,we)=>Y.then(Ke=>jn(()=>ie(Ke)),Ke=>jn(()=>we(Ke))))):"function"==typeof Y&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),Y.apply(this,arguments)}:jn(()=>Y)}},2722:(_t,xe,F)=>{F.d(xe,{$:()=>eo,A:()=>G,B:()=>ke,G:()=>Zs,H:()=>ai,J:()=>ls,L:()=>W,M:()=>Eu,N:()=>hd,P:()=>bf,Q:()=>Iu,R:()=>Ay,T:()=>Hl,U:()=>Ss,V:()=>Ii,W:()=>cs,X:()=>Pg,Y:()=>wa,Z:()=>$t,_:()=>Og,a:()=>Ms,a0:()=>cf,a1:()=>hr,a2:()=>bu,a3:()=>Du,a4:()=>df,a5:()=>Fg,a6:()=>fr,a7:()=>Hi,a8:()=>Sa,a9:()=>ds,aA:()=>H,aB:()=>Ke,aC:()=>jn,aD:()=>kd,aE:()=>It,aI:()=>jo,aL:()=>Ro,aa:()=>hf,ab:()=>Zl,ac:()=>Kl,af:()=>ff,ag:()=>pf,ah:()=>vd,ak:()=>Pi,al:()=>Ql,an:()=>bd,ao:()=>Ru,ap:()=>_e,aq:()=>Be,ar:()=>st,as:()=>et,at:()=>Ba,au:()=>Zr,av:()=>Ut,aw:()=>Re,ax:()=>ne,ay:()=>Ur,az:()=>qe,b:()=>pr,c:()=>Ir,d:()=>Df,e:()=>Lu,f:()=>gr,g:()=>R,h:()=>Di,i:()=>Zo,j:()=>ie,k:()=>Ki,l:()=>zi,m:()=>Nf,n:()=>kf,o:()=>le,r:()=>ms,s:()=>gs,u:()=>Rd});var f=F(5861),$=F(2090),P=F(9681),re=F(1877),se=F(655),pe=F(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),he=new re.Yd("@firebase/auth");function Qe(w,...g){he.logLevel<=re.in.ERROR&&he.error(`Auth (${P.SDK_VERSION}): ${w}`,...g)}function et(w,...g){throw We(w,...g)}function Re(w,...g){return We(w,...g)}function Me(w,g,_){const I=Object.assign(Object.assign({},Te()),{[g]:_});return new $.LL("auth","Firebase",I).create(g,{appName:w.name})}function be(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&et(w,"argument-error"),Me(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(w,...g){if("string"!=typeof w){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return tt.create(w,...g)}function ne(w,g,..._){if(!w)throw We(g,..._)}function ae(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Qe(g),new Error(g)}function _e(w,g){w||ae(g)}const ze=new Map;function qe(w){_e(w instanceof Function,"Expected a class definition");let g=ze.get(w);return g?(_e(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,ze.set(w,g),g)}function oe(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function ge(){return"http:"===Ee()||"https:"===Ee()}function Ee(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class De{constructor(g,_){this.shortDelay=g,this.longDelay=_,_e(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Oe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ge()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ft(w,g){_e(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ft{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _n={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},it=new De(3e4,6e4);function Et(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function mt(w,g,_,I){return tn.apply(this,arguments)}function tn(){return(tn=(0,f.Z)(function*(w,g,_,I,x={}){return Gn(w,x,(0,f.Z)(function*(){let O={},te={};I&&("GET"===g?te=I:O={body:JSON.stringify(I)});const Fe=(0,$.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),ot=yield w._getAdditionalHeaders();return ot["Content-Type"]="application/json",w.languageCode&&(ot["X-Firebase-Locale"]=w.languageCode),Ft.fetch()(Lr(w,w.config.apiHost,_,Fe),Object.assign({method:g,headers:ot,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Gn(w,g,_){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(w,g,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},_n),g);try{const x=new Jr(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const te=yield O.json();if("needConfirmation"in te)throw zn(w,"account-exists-with-different-credential",te);if(O.ok&&!("errorMessage"in te))return te;{const Fe=O.ok?te.errorMessage:te.error.message,[ot,bt]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ot)throw zn(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===ot)throw zn(w,"email-already-in-use",te);if("USER_DISABLED"===ot)throw zn(w,"user-disabled",te);const Yt=I[ot]||ot.toLowerCase().replace(/[_\s]+/g,"-");if(bt)throw Me(w,Yt,bt);et(w,Yt)}}catch(x){if(x instanceof $.ZR)throw x;et(w,"network-request-failed")}})).apply(this,arguments)}function fn(w,g,_,I){return wr.apply(this,arguments)}function wr(){return(wr=(0,f.Z)(function*(w,g,_,I,x={}){const O=yield mt(w,g,_,I,x);return"mfaPendingCredential"in O&&et(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Lr(w,g,_,I){const x=`${g}${_}?${I}`;return w.config.emulator?ft(w.config,x):`${w.config.apiScheme}://${x}`}class Jr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Re(this.auth,"network-request-failed")),it.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(w,g,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Re(w,g,I);return x.customData._tokenResponse=_,x}function $i(){return($i=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Je(w,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function er(w,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function xr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Rn(){return(Rn=(0,f.Z)(function*(w,g=!1){const _=(0,$.m9)(w),I=yield _.getIdToken(g),x=yt(I);ne(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,te=O?.sign_in_provider;return{claims:x,token:I,authTime:xr(bn(x.auth_time)),issuedAtTime:xr(bn(x.iat)),expirationTime:xr(bn(x.exp)),signInProvider:te||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function bn(w){return 1e3*Number(w)}function yt(w){const[g,_,I]=w.split(".");if(void 0===g||void 0===_||void 0===I)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,$.tV)(_);return x?JSON.parse(x):(Qe("Failed to decode base64 JWT payload"),null)}catch(x){return Qe("Caught error parsing JWT payload as JSON",x?.toString()),null}}function Vt(w,g){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof $.ZR&&tr(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function tr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Wr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class Pt{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ei(w){return jt.apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(w){var g;const _=w.auth,I=yield w.getIdToken(),x=yield Vt(w,er(_,{idToken:I}));ne(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const te=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?On(O.providerUserInfo):[],Fe=Er(w.providerData,te),Yt=!!w.isAnonymous&&!(w.email&&O.passwordHash||Fe?.length),Dn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Fe,metadata:new Pt(O.createdAt,O.lastLoginAt),isAnonymous:Yt};Object.assign(w,Dn)})).apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(w){const g=(0,$.m9)(w);yield ei(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Er(w,g){return[...w.filter(I=>!g.some(x=>x.providerId===I.providerId)),...g]}function On(w){return w.map(g=>{var{providerId:_}=g,I=(0,se._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Se(){return(Se=(0,f.Z)(function*(w,g){const _=yield Gn(w,{},(0,f.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,te=Lr(w,x,"/v1/token",`key=${O}`),Fe=yield w._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",Ft.fetch()(te,{method:"POST",headers:Fe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(typeof g.idToken<"u","internal-error"),ne(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function vt(w){const g=yt(w);return ne(g,"internal-error"),ne(typeof g.exp<"u","internal-error"),ne(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,f.Z)(function*(){return ne(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,f.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:te}=yield function nt(w,g){return Se.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(x,O,Number(te))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:x,expirationTime:O}=_,te=new rt;return I&&(ne("string"==typeof I,"internal-error",{appName:g}),te.refreshToken=I),x&&(ne("string"==typeof x,"internal-error",{appName:g}),te.accessToken=x),O&&(ne("number"==typeof O,"internal-error",{appName:g}),te.expirationTime=O),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return ae("not implemented")}}function xt(w,g){ne("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Ot{constructor(g){var{uid:_,auth:I,stsTokenManager:x}=g,O=(0,se._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Pt(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const I=yield Vt(_,_.stsTokenManager.getToken(_.auth,g));return ne(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function An(w){return Rn.apply(this,arguments)}(this,g)}reload(){return function oi(w){return nn.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ot(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,f.Z)(function*(){let x=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield ei(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield Vt(g,function Ni(w,g){return $i.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,x,O,te,Fe,ot,bt,Yt;const Dn=null!==(I=_.displayName)&&void 0!==I?I:void 0,Ti=null!==(x=_.email)&&void 0!==x?x:void 0,Li=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,ja=null!==(te=_.photoURL)&&void 0!==te?te:void 0,cc=null!==(Fe=_.tenantId)&&void 0!==Fe?Fe:void 0,Fd=null!==(ot=_._redirectEventId)&&void 0!==ot?ot:void 0,ta=null!==(bt=_.createdAt)&&void 0!==bt?bt:void 0,zg=null!==(Yt=_.lastLoginAt)&&void 0!==Yt?Yt:void 0,{uid:Ha,emailVerified:Pf,isAnonymous:qg,providerData:Wa,stsTokenManager:na}=_;ne(Ha&&na,g,"internal-error");const Zg=rt.fromJSON(this.name,na);ne("string"==typeof Ha,g,"internal-error"),xt(Dn,g.name),xt(Ti,g.name),ne("boolean"==typeof Pf,g,"internal-error"),ne("boolean"==typeof qg,g,"internal-error"),xt(Li,g.name),xt(ja,g.name),xt(cc,g.name),xt(Fd,g.name),xt(ta,g.name),xt(zg,g.name);const Ld=new Ot({uid:Ha,auth:g,email:Ti,emailVerified:Pf,displayName:Dn,isAnonymous:qg,photoURL:ja,phoneNumber:Li,tenantId:cc,stsTokenManager:Zg,createdAt:ta,lastLoginAt:zg});return Wa&&Array.isArray(Wa)&&(Ld.providerData=Wa.map(Gu=>Object.assign({},Gu))),Fd&&(Ld._redirectEventId=Fd),Ld}static _fromIdTokenResponse(g,_,I=!1){return(0,f.Z)(function*(){const x=new rt;x.updateFromServerResponse(_);const O=new Ot({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:I});return yield ei(O),O})()}}const W=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,f.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,f.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,f.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function H(w,g,_){return`firebase:${w}:${g}:${_}`}class K{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:x,name:O}=this.auth;this.fullUserKey=H(this.userKey,x.apiKey,O),this.fullPersistenceKey=H("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Ot._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,f.Z)(function*(){if(!_.length)return new K(qe(W),g,I);const x=(yield Promise.all(_.map(function(){var bt=(0,f.Z)(function*(Yt){if(yield Yt._isAvailable())return Yt});return function(Yt){return bt.apply(this,arguments)}}()))).filter(bt=>bt);let O=x[0]||qe(W);const te=H(I,g.config.apiKey,g.name);let Fe=null;for(const bt of _)try{const Yt=yield bt._get(te);if(Yt){const Dn=Ot._fromJSON(g,Yt);bt!==O&&(Fe=Dn),O=bt;break}}catch{}const ot=x.filter(bt=>bt._shouldAllowMigration);return O._shouldAllowMigration&&ot.length?(O=ot[0],Fe&&(yield O._set(te,Fe.toJSON())),yield Promise.all(_.map(function(){var bt=(0,f.Z)(function*(Yt){if(Yt!==O)try{yield Yt._remove(te)}catch{}});return function(Yt){return bt.apply(this,arguments)}}())),new K(O,g,I)):new K(O,g,I)})()}}function U(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ve(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(M(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ct(g))return"Blackberry";if(Ae(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||J(g))&&!g.includes("edge/"))return"Chrome";if(st(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function M(w=(0,$.z$)()){return/firefox\//i.test(w)}function V(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function J(w=(0,$.z$)()){return/crios\//i.test(w)}function Ve(w=(0,$.z$)()){return/iemobile/i.test(w)}function st(w=(0,$.z$)()){return/android/i.test(w)}function ct(w=(0,$.z$)()){return/blackberry/i.test(w)}function Ae(w=(0,$.z$)()){return/webos/i.test(w)}function Be(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Ut(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function En(w=(0,$.z$)()){return Be(w)||st(w)||Ae(w)||ct(w)||/windows phone/i.test(w)||Ve(w)}function Mn(w,g=[]){let _;switch(w){case"Browser":_=U((0,$.z$)());break;case"Worker":_=`${U((0,$.z$)())}-${w}`;break;default:_=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${I}`}class zs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=O=>new Promise((te,Fe)=>{try{te(g(O))}catch(ot){Fe(ot)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const I=[];try{for(const x of _.queue)yield x(g),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const O of I)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class bo{constructor(g,_,I){this.app=g,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=qe(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var x,O;if(!I._deleted&&(I.persistenceManager=yield K.create(I,g),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let O=x,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Fe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,ot=O?._redirectEventId,bt=yield _.tryRedirectSignIn(g);(!Fe||Fe===ot)&&bt?.user&&(O=bt.user,te=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(O)}catch(Fe){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Fe))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ne(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield ei(g)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Le(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const I=g?(0,$.m9)(g):null;return I&&ne(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return g&&ne(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(qe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,f.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&qe(g)||_._popupRedirectResolver;ne(I,_,"argument-error"),_.redirectPersistenceManager=yield K.create(_,[qe(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(te,this,"internal-error"),te.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,I,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Mn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function It(w){return(0,$.m9)(w)}class qs{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zs(w,g,_){const I=It(w);ne(I._canInitEmulator,I,"emulator-config-failed"),ne(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=wu(g),{host:te,port:Fe}=function os(w){const g=wu(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const O=x[1];return{host:O,port:nr(I.substr(O.length+1))}}{const[O,te]=I.split(":");return{host:O,port:nr(te)}}}(g);I.config.emulator={url:`${O}//${te}${null===Fe?"":`:${Fe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:te,port:Fe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Ks(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function wu(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function nr(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class ai{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ae("not implemented")}_getIdTokenResponse(g){return ae("not implemented")}_linkToIdToken(g,_){return ae("not implemented")}_getReauthenticationResolver(g){return ae("not implemented")}}function vi(w,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:resetPassword",Et(w,g))})).apply(this,arguments)}function Ul(w,g){return In.apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function af(w,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:update",Et(w,g))})).apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithPassword",Et(w,g))})).apply(this,arguments)}function as(w,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:sendOobCode",Et(w,g))})).apply(this,arguments)}function us(w,g){return cr.apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function uf(w,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function wi(w,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Bl(w,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function $l(){return($l=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithEmailLink",Et(w,g))})).apply(this,arguments)}function jl(){return(jl=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithEmailLink",Et(w,g))})).apply(this,arguments)}class ya extends ai{constructor(g,_,I,x=null){super("password",I),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new ya(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new ya(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function ma(w,g){return Ys.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ui(w,g){return $l.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:et(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return Ul(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Sg(w,g){return jl.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:et(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Xs(w,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithIdp",Et(w,g))})).apply(this,arguments)}class ls extends ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ls(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):et("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x}=_,O=(0,se._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const te=new ls(I,x);return te.idToken=O.idToken||void 0,te.accessToken=O.accessToken||void 0,te.secret=O.secret,te.nonce=O.nonce,te.pendingToken=O.pendingToken||null,te}_getIdTokenResponse(g){return Xs(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Xs(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Xs(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function xg(w,g){return ad.apply(this,arguments)}function ad(){return(ad=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:sendVerificationCode",Et(w,g))})).apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Et(w,g))})).apply(this,arguments)}function ud(){return(ud=(0,f.Z)(function*(w,g){const _=yield fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Et(w,g));if(_.temporaryProof)throw zn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Mg={USER_NOT_FOUND:"user-not-found"};function ld(){return(ld=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Et(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Mg)})).apply(this,arguments)}class So extends ai{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new So({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new So({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Rg(w,g){return va.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function To(w,g){return ud.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Ng(w,g){return ld.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}=g;return I||_||x||O?new So({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}):null}}class Ao{constructor(g){var _,I,x,O,te,Fe;const ot=(0,$.zd)((0,$.pd)(g)),bt=null!==(_=ot.apiKey)&&void 0!==_?_:null,Yt=null!==(I=ot.oobCode)&&void 0!==I?I:null,Dn=function cd(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=ot.mode)&&void 0!==x?x:null);ne(bt&&Yt&&Dn,"argument-error"),this.apiKey=bt,this.operation=Dn,this.code=Yt,this.continueUrl=null!==(O=ot.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(te=ot.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Fe=ot.tenantId)&&void 0!==Fe?Fe:null}static parseLink(g){const _=function dd(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||_||g||w}(g);try{return new Ao(_)}catch{return null}}}let Eu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return ya._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=Ao.parseLink(I);return ne(x,"argument-error"),ya._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Vr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class xo extends Vr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ss extends xo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ne("providerId"in _&&"signInMethod"in _,"argument-error"),ls._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ss.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ss.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:O,nonce:te,providerId:Fe}=g;if(!I&&!x&&!_&&!O||!Fe)return null;try{return new Ss(Fe)._credential({idToken:_,accessToken:I,nonce:te,pendingToken:O})}catch{return null}}}let hd=(()=>{class w extends xo{constructor(){super("facebook.com")}static credential(_){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Iu=(()=>{class w extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Hl=(()=>{class w extends xo{constructor(){super("github.com")}static credential(_){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ro extends ai{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Xs(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Xs(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Xs(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x,pendingToken:O}=_;return I&&x&&O&&I===x?new Ro(I,O):null}static _create(g,_){return new Ro(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ii extends Vr{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ii.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ii.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Ro.fromJSON(g);return ne(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return Ro._create(I,_)}catch{return null}}}let cs=(()=>{class w extends xo{constructor(){super("twitter.com")}static credential(_,I){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function li(w,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signUp",Et(w,g))})).apply(this,arguments)}class ki{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,x=!1){return(0,f.Z)(function*(){const O=yield Ot._fromIdTokenResponse(g,I,x),te=Mo(I);return new ki({user:O,providerId:te,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const x=Mo(I);return new ki({user:g,providerId:x,_tokenResponse:I,operationType:_})})()}}function Mo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Pg(w){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,f.Z)(function*(w){var g;const _=It(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new ki({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield li(_,{returnSecureToken:!0}),x=yield ki._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Wn extends $.ZR{constructor(g,_,I,x){var O;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Wn.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,x){return new Wn(g,_,I,x)}}function pd(w,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Wn._fromErrorAndOperation(w,O,g,I):O})}function lf(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Pi(w,g){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(w,g){const _=(0,$.m9)(w);yield ji(!0,_,g);const{providerUserInfo:I}=yield Je(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=lf(I||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Cu(w,g){return No.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(w,g,_=!1){const I=yield Vt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return ki._forOperation(w,"link",I)})).apply(this,arguments)}function ji(w,g,_){return ln.apply(this,arguments)}function ln(){return(ln=(0,f.Z)(function*(w,g,_){yield ei(g);const x=!1===w?"provider-already-linked":"no-such-provider";ne(lf(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function Gl(w,g){return As.apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(w,g,_=!1){const{auth:I}=w,x="reauthenticate";try{const O=yield Vt(w,pd(I,x,g,w),_);ne(O.idToken,I,"internal-error");const te=yt(O.idToken);ne(te,I,"internal-error");const{sub:Fe}=te;return ne(w.uid===Fe,I,"user-mismatch"),ki._forOperation(w,x,O)}catch(O){throw"auth/user-not-found"===O?.code&&et(I,"user-mismatch"),O}})).apply(this,arguments)}function zl(w,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,f.Z)(function*(w,g,_=!1){const I="signIn",x=yield pd(w,I,g),O=yield ki._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function wa(w,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(w,g){return zl(It(w),g)})).apply(this,arguments)}function $t(w,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(w,g){const _=(0,$.m9)(w);return yield ji(!1,_,g.providerId),Cu(_,g)})).apply(this,arguments)}function Og(w,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(w,g){return Gl((0,$.m9)(w),g)})).apply(this,arguments)}function gd(w,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(w,g){return fn(w,"POST","/v1/accounts:signInWithCustomToken",Et(w,g))})).apply(this,arguments)}function eo(w,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(w,g){const _=It(w),I=yield gd(_,{token:g,returnSecureToken:!0}),x=yield ki._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class ko{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Ne._fromServerResponse(g,_):et(g,"internal-error")}}class Ne extends ko{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Ne(_)}}function Xt(w,g,_){var I;ne((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ne(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ne(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ne(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function cf(w,g,_){return Po.apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&Xt(I,x,_),yield uf(I,x)})).apply(this,arguments)}function hr(w,g,_){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,f.Z)(function*(w,g,_){yield vi((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function bu(w,g){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(w,g){yield af((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function Du(w,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(w,g){const _=(0,$.m9)(w),I=yield vi(_,{oobCode:g}),x=I.requestType;switch(ne(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(I.mfaInfo,_,"internal-error");default:ne(I.email,_,"internal-error")}let O=null;return I.mfaInfo&&(O=ko._fromServerResponse(It(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function df(w,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(w,g){const{data:_}=yield Du((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function Fg(w,g,_){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(w,g,_){const I=It(w),x=yield li(I,{returnSecureToken:!0,email:g,password:_}),O=yield ki._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function fr(w,g,_){return wa((0,$.m9)(w),Eu.credential(g,_))}function Hi(w,g,_){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};ne(_.handleCodeInApp,I,"argument-error"),_&&Xt(I,x,_),yield wi(I,x)})).apply(this,arguments)}function Sa(w,g){return"EMAIL_SIGNIN"===Ao.parseLink(g)?.operation}function ds(w,g,_){return md.apply(this,arguments)}function md(){return(md=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w),x=Eu.credentialWithLink(g,_||oe());return ne(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),wa(I,x)})).apply(this,arguments)}function ql(w,g){return _d.apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:createAuthUri",Et(w,g))})).apply(this,arguments)}function hf(w,g){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(w,g){const I={identifier:g,continueUri:ge()?oe():"http://localhost"},{signinMethods:x}=yield ql((0,$.m9)(w),I);return x||[]})).apply(this,arguments)}function Zl(w,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(w,g){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Xt(_.auth,x,g);const{email:O}=yield us(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function Kl(w,g,_){return xa.apply(this,arguments)}function xa(){return(xa=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Xt(I.auth,O,_);const{email:te}=yield Bl(I.auth,O);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function yd(w,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(w,g){return mt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ff(w,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,$.m9)(w),O={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield Vt(I,yd(I.auth,O));I.displayName=te.displayName||null,I.photoURL=te.photoUrl||null;const Fe=I.providerData.find(({providerId:ot})=>"password"===ot);Fe&&(Fe.displayName=I.displayName,Fe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(te)})).apply(this,arguments)}function pf(w,g){return xs((0,$.m9)(w),g,null)}function vd(w,g){return xs((0,$.m9)(w),null,g)}function xs(w,g,_){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,f.Z)(function*(w,g,_){const{auth:I}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const te=yield Vt(w,Ul(I,O));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class $n{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class hs extends $n{constructor(g,_,I,x){super(g,_,I),this.username=x}}class Fn extends $n{constructor(g,_){super(g,"facebook.com",_)}}class Ed extends hs{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Yl extends $n{constructor(g,_){super(g,"google.com",_)}}class gf extends hs{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Ql(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function wd(w){var g,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const te=null===(_=null===(g=yt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new $n(O,"anonymous"!==te&&"custom"!==te?te:null)}if(!I)return null;switch(I){case"facebook.com":return new Fn(O,x);case"github.com":return new Ed(O,x);case"google.com":return new Yl(O,x);case"twitter.com":return new gf(O,x,w.screenName||null);case"custom":case"anonymous":return new $n(O,null);default:return new $n(O,I,x)}}(_)}class bi{constructor(g,_,I){this.type=g,this.credential=_,this.auth=I}static _fromIdtoken(g,_){return new bi("enroll",g,_)}static _fromMfaPendingCredential(g){return new bi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return bi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return bi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ec{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=It(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(Fe=>ko._fromServerResponse(I,Fe));ne(x.mfaPendingCredential,I,"internal-error");const te=bi._fromMfaPendingCredential(x.mfaPendingCredential);return new ec(te,O,function(){var Fe=(0,f.Z)(function*(ot){const bt=yield ot._process(I,te);delete x.mfaInfo,delete x.mfaPendingCredential;const Yt=Object.assign(Object.assign({},x),{idToken:bt.idToken,refreshToken:bt.refreshToken});switch(_.operationType){case"signIn":const Dn=yield ki._fromIdTokenResponse(I,_.operationType,Yt);return yield I._updateCurrentUser(Dn.user),Dn;case"reauthenticate":return ne(_.user,I,"internal-error"),ki._forOperation(_.user,_.operationType,Yt);default:et(I,"internal-error")}});return function(ot){return Fe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function bd(w,g){var _;const I=(0,$.m9)(w),x=g;return ne(g.customData.operationType,I,"argument-error"),ne(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),ec._fromError(I,x)}function Zn(w,g){return mt(w,"POST","/v2/accounts/mfaEnrollment:start",Et(w,g))}class xu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>ko._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new xu(g)}getSession(){var g=this;return(0,f.Z)(function*(){return bi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var I=this;return(0,f.Z)(function*(){const x=g,O=yield I.getSession(),te=yield Vt(I.user,x._process(I.user.auth,O,_));return yield I.user._updateTokensIfNecessary(te),I.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const I="string"==typeof g?g:g.uid,x=yield _.user.getIdToken();try{const O=yield Vt(_.user,function Au(w,g){return mt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(w,g))}(_.user.auth,{idToken:x,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==I),yield _.user._updateTokensIfNecessary(O),yield _.user.reload()}catch(O){throw O}})()}}const mf=new WeakMap;function Ru(w){const g=(0,$.m9)(w);return mf.has(g)||mf.set(g,xu._fromUser(g)),mf.get(g)}const fs="__sak";class Ma{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fs,"1"),this.storage.removeItem(fs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const pr=(()=>{class w extends Ma{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tc(){const w=(0,$.z$)();return V(w)||Be(w)}()&&function ss(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=En(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),O=this.localCache[I];x!==O&&_(I,O,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Fe,ot,bt)=>{this.notifyListeners(Fe,bt)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Fe=this.storage.getItem(x);if(_.newValue!==Fe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const O=()=>{const Fe=this.storage.getItem(x);!I&&this.localCache[x]===Fe||this.notifyListeners(x,Fe)},te=this.storage.getItem(x);!function Ht(){return(0,$.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,O=this;return(0,f.Z)(function*(){yield x().call(O,_,I),O.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,f.Z)(function*(){const O=yield I().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var I=()=>super._remove,x=this;return(0,f.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Ms=(()=>{class w extends Ma{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let ka=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(O=>O.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,f.Z)(function*(){const x=_,{eventId:O,eventType:te,data:Fe}=x.data,ot=I.handlersMap[te];if(!ot?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:te});const bt=Array.from(ot).map(function(){var Dn=(0,f.Z)(function*(Ti){return Ti(x.origin,Fe)});return function(Ti){return Dn.apply(this,arguments)}}()),Yt=yield function nc(w){return Promise.all(w.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(bt);x.ports[0].postMessage({status:"done",eventId:O,eventType:te,response:Yt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function jo(w="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return w+_}class vf{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var x=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let te,Fe;return new Promise((ot,bt)=>{const Yt=jo("",20);O.port1.start();const Dn=setTimeout(()=>{bt(new Error("unsupported_event"))},I);Fe={messageChannel:O,onMessage(Ti){const Li=Ti;if(Li.data.eventId===Yt)switch(Li.data.status){case"ack":clearTimeout(Dn),te=setTimeout(()=>{bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),ot(Li.data.response);break;default:clearTimeout(Dn),clearTimeout(te),bt(new Error("invalid_response"))}}},x.handlers.add(Fe),O.port1.addEventListener("message",Fe.onMessage),x.target.postMessage({eventType:g,eventId:Yt,data:_},[O.port2])}).finally(()=>{Fe&&x.removeMessageHandler(Fe)})})()}}function Kn(){return window}function ci(){return typeof Kn().WorkerGlobalScope<"u"&&"function"==typeof Kn().importScripts}function ps(){return(ps=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Pa="firebaseLocalStorageDb",Oa="firebaseLocalStorage",Ho="fbase_key";class Wo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Go(w,g){return w.transaction([Oa],g?"readwrite":"readonly").objectStore(Oa)}function Nu(){const w=indexedDB.open(Pa,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Oa,{keyPath:Ho})}catch(x){_(x)}}),w.addEventListener("success",(0,f.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Oa)?g(I):(I.close(),yield function Ad(){const w=indexedDB.deleteDatabase(Pa);return new Wo(w).toPromise()}(),g(yield Nu()))}))})}function Fa(w,g,_){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(w,g,_){const I=Go(w,!0).put({[Ho]:g,value:_});return new Wo(I).toPromise()})).apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(w,g){const _=Go(w,!1).get(g),I=yield new Wo(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ku(w,g){const _=Go(w,!0).delete(g);return new Wo(_).toPromise()}const Zo=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Nu()),_.db})()}_withRetries(_){var I=this;return(0,f.Z)(function*(){let x=0;for(;;)try{const O=yield I._openDb();return yield _(O)}catch(O){if(x++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return ci()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=ka._getInstance(function Mu(){return ci()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function Sd(){return ps.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new vf(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function rc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Nu();return yield Fa(_,fs,"1"),yield ku(_,fs),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,f.Z)(function*(){return x._withPendingWrite((0,f.Z)(function*(){return yield x._withRetries(O=>Fa(O,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,f.Z)(function*(){const x=yield I._withRetries(O=>function wf(w,g){return zo.apply(this,arguments)}(O,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(x=>ku(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const I=yield _._withRetries(te=>{const Fe=Go(te,!1).getAll();return new Wo(Fe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:te,value:Fe}of I)O.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(Fe)&&(_.notifyListeners(te,Fe),x.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!O.has(te)&&(_.notifyListeners(te,null),x.push(te));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ef(w,g){return mt(w,"POST","/v2/accounts/mfaSignIn:start",Et(w,g))}function Gr(){return(Gr=(0,f.Z)(function*(w){return(yield mt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ro(w){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=x=>{const O=Re("internal-error");O.customData=x,_(O)},I.type="text/javascript",I.charset="UTF-8",function Yo(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function Qo(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Gi=1e12;class xd{constructor(g){this.auth=g,this.counter=Gi,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new Nn(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||Gi;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Gi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var I;return null===(I=_._widgets.get(g||Gi))||void 0===I||I.execute(),""})()}}class Nn{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ne(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Lg(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const If=Qo("rcb"),c0=new De(3e4,6e4);class Sy{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Kn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ne(function Cf(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Kn().grecaptcha):new Promise((I,x)=>{const O=Kn().setTimeout(()=>{x(Re(g,"network-request-failed"))},c0.get());Kn()[If]=()=>{Kn().clearTimeout(O),delete Kn()[If];const Fe=Kn().grecaptcha;if(!Fe)return void x(Re(g,"internal-error"));const ot=Fe.render;Fe.render=(bt,Yt)=>{const Dn=ot(bt,Yt);return this.counter++,Dn},this.hostLanguage=_,I(Fe)},ro(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:If,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Re(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Kn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class d0{load(g){return(0,f.Z)(function*(){return new xd(g)})()}clearedOneInstance(){}}const Ou="recaptcha",h0={theme:"light",type:"image"};class Ay{constructor(g,_=Object.assign({},h0),I){this.parameters=_,this.type=Ou,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=It(I),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new d0:new Sy,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(O=>{const te=Fe=>{!Fe||(g.tokenChangeListeners.delete(te),O(Fe))};g.tokenChangeListeners.add(te),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=Kn()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){ne(ge()&&!ci(),g.auth,"internal-error"),yield function Mr(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Pu(w){return Gr.apply(this,arguments)}(g.auth);ne(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yn{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=So._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function gs(w,g,_){return dt.apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(w,g,_){const I=It(w),x=yield zr(I,g,(0,$.m9)(_));return new yn(x,O=>wa(I,O))})).apply(this,arguments)}function zi(w,g,_){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w);yield ji(!1,I,"phone");const x=yield zr(I.auth,g,(0,$.m9)(_));return new yn(x,O=>$t(I,O))})).apply(this,arguments)}function ms(w,g,_){return io.apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w),x=yield zr(I.auth,g,(0,$.m9)(_));return new yn(x,O=>Og(I,O))})).apply(this,arguments)}function zr(w,g,_){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(w,g,_){var I;const x=yield _.verify();try{let O;if(ne("string"==typeof x,w,"argument-error"),ne(_.type===Ou,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const te=O.session;if("phoneNumber"in O)return ne("enroll"===te.type,w,"internal-error"),(yield Zn(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ne("signin"===te.type,w,"internal-error");const Fe=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ne(Fe,w,"missing-multi-factor-info"),(yield Ef(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield xg(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return te}}finally{_._reset()}})).apply(this,arguments)}function Rd(w,g){return Md.apply(this,arguments)}function Md(){return(Md=(0,f.Z)(function*(w,g){yield Cu((0,$.m9)(w),g)})).apply(this,arguments)}let bf=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=It(_)}verifyPhoneNumber(_,I){return zr(this.auth,_,(0,$.m9)(I))}static credential(_,I){return So._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?So._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ks(w,g){return g?qe(g):(ne(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Nd extends ai{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Xs(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Xs(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Xs(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function oo(w){return zl(w.auth,new Nd(w),w.bypassAuthState)}function pt(w){const{auth:g,user:_}=w;return ne(_,g,"internal-error"),Gl(_,new Nd(w),w.bypassAuthState)}function oc(w){return qi.apply(this,arguments)}function qi(){return(qi=(0,f.Z)(function*(w){const{auth:g,user:_}=w;return ne(_,g,"internal-error"),Cu(_,new Nd(w),w.bypassAuthState)})).apply(this,arguments)}class Fu{constructor(g,_,I,x,O=!1){this.auth=g,this.resolver=I,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(I,x){g.pendingPromise={resolve:I,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:O,tenantId:te,error:Fe,type:ot}=g;if(Fe)return void _.reject(Fe);const bt={auth:_.auth,requestUri:I,sessionId:x,tenantId:te||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(ot)(bt))}catch(Yt){_.reject(Yt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return oo;case"linkViaPopup":case"linkViaRedirect":return oc;case"reauthViaPopup":case"reauthViaRedirect":return pt;default:et(this.auth,"internal-error")}}resolve(g){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const La=new De(2e3,1e4);function Ir(w,g,_){return Va.apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(w,g,_){const I=It(w);be(w,g,Vr);const x=ks(I,_);return new Vu(I,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Lu(w,g,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w);be(I.auth,g,Vr);const x=ks(I.auth,_);return new Vu(I.auth,"reauthViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}function Df(w,g,_){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w);be(I.auth,g,Vr);const x=ks(I.auth,_);return new Vu(I.auth,"linkViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}let Vu=(()=>{class w extends Fu{constructor(_,I,x,O,te){super(_,I,O,te),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const I=yield _.execute();return ne(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,f.Z)(function*(){_e(1===_.filter.length,"Popup operations only handle one event");const I=jo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Re(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,La.get())};_()}}return w.currentPopupAction=null,w})();const ao=new Map;class Fi extends Fu{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let I=ao.get(_.auth._key());if(!I){try{const O=(yield function Uu(w,g){return Ps.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(O)}catch(x){I=()=>Promise.reject(x)}ao.set(_.auth._key(),I)}return _.bypassAuthState||ao.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const x=yield I.auth._redirectUserForId(g.eventId);if(x)return I.user=x,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ps(){return(Ps=(0,f.Z)(function*(w,g){const _=co(g),I=lo(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function uo(w,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(w,g){return lo(w)._set(co(g),"true")})).apply(this,arguments)}function kd(){ao.clear()}function jn(w,g){ao.set(w._key(),g)}function lo(w){return qe(w._redirectPersistence)}function co(w){return H("pendingRedirect",w.config.apiKey,w.name)}function gr(w,g,_){return function Ln(w,g,_){return ho.apply(this,arguments)}(w,g,_)}function ho(){return(ho=(0,f.Z)(function*(w,g,_){const I=It(w);be(w,g,Vr),yield I._initializationPromise;const x=ks(I,_);return yield uo(x,I),x._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function Di(w,g,_){return function b(w,g,_){return T.apply(this,arguments)}(w,g,_)}function T(){return(T=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w);be(I.auth,g,Vr),yield I.auth._initializationPromise;const x=ks(I.auth,_);yield uo(x,I.auth);const O=yield wt(I);return x._openRedirect(I.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function R(w,g,_){return function B(w,g,_){return Y.apply(this,arguments)}(w,g,_)}function Y(){return(Y=(0,f.Z)(function*(w,g,_){const I=(0,$.m9)(w);be(I.auth,g,Vr),yield I.auth._initializationPromise;const x=ks(I.auth,_);yield ji(!1,I,g.providerId),yield uo(x,I.auth);const O=yield wt(I);return x._openRedirect(I.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function ie(w,g){return we.apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(w,g){return yield It(w)._initializationPromise,Ke(w,g,!1)})).apply(this,arguments)}function Ke(w,g){return ut.apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(w,g,_=!1){const I=It(w),x=ks(I,g),te=yield new Fi(I,x,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield I._persistUserIfCurrent(te.user),yield I._setRedirectUser(null,g)),te})).apply(this,arguments)}function wt(w){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(w){const g=jo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ur{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Gt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fo(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!fo(g)){const x=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Re(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mr(g))}saveEventToCache(g){this.cachedEventUids.add(mr(g)),this.lastProcessedEventTime=Date.now()}}function mr(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function fo({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Zr(w){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(w,g={}){return mt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tf=/^https?/;function Zi(){return(Zi=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Zr(w);for(const _ of g)try{if(xy(_))return}catch{}et(w,"unauthorized-domain")})).apply(this,arguments)}function xy(w){const g=oe(),{protocol:_,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===I}if(!Tf.test(_))return!1;if(di.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Ug=new De(3e4,6e4);function Sf(){const w=Kn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Yn=null;function po(w){return Yn=Yn||function f0(w){return new Promise((g,_)=>{var I,x,O;function te(){Sf(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Sf(),_(Re(w,"network-request-failed"))},timeout:Ug.get()})}if(null!==(x=null===(I=Kn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(O=Kn().gapi)||void 0===O||!O.load){const Fe=Qo("iframefcb");return Kn()[Fe]=()=>{gapi.load?te():_(Re(w,"network-request-failed"))},ro(`https://apis.google.com/js/api.js?onload=${Fe}`).catch(ot=>_(ot))}te()}}).catch(g=>{throw Yn=null,g})}(w),Yn}const Af=new De(5e3,15e3),xf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ry=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function My(w){const g=w.config;ne(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?ft(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:w.name,v:P.SDK_VERSION},x=Ry.get(w.config.apiHost);x&&(I.eid=x);const O=w._getFrameworks();return O.length&&(I.fw=O.join(",")),`${_}?${(0,$.xO)(I).slice(1)}`}function ac(){return ac=(0,f.Z)(function*(w){const g=yield po(w),_=Kn().gapi;return ne(_,w,"internal-error"),g.open({where:document.body,url:My(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xf,dontclear:!0},I=>new Promise(function(){var x=(0,f.Z)(function*(O,te){yield I.restyle({setHideOnLeave:!1});const Fe=Re(w,"network-request-failed"),ot=Kn().setTimeout(()=>{te(Fe)},Af.get());function bt(){Kn().clearTimeout(ot),O(I)}I.ping(bt).then(bt,()=>{te(Fe)})});return function(O,te){return x.apply(this,arguments)}}()))}),ac.apply(this,arguments)}const Ny={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ba(w,g,_,I,x,O){ne(w.config.authDomain,w,"auth-domain-config-required"),ne(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:P.SDK_VERSION,eventId:x};if(g instanceof Vr){g.setDefaultLanguage(w.languageCode),te.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ot,bt]of Object.entries(O||{}))te[ot]=bt}if(g instanceof xo){const ot=g.getScopes().filter(bt=>""!==bt);ot.length>0&&(te.scopes=ot.join(","))}w.tenantId&&(te.tid=w.tenantId);const Fe=te;for(const ot of Object.keys(Fe))void 0===Fe[ot]&&delete Fe[ot];return`${function jg({config:w}){return w.emulator?ft(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Fe).slice(1)}`}const $a="webStorageSupport",Ki=class Hu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ms,this._completeRedirectFn=Ke,this._overrideRedirectResult=jn}_openPopup(g,_,I,x){var O=this;return(0,f.Z)(function*(){var te;_e(null===(te=O.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Fe=Ba(g,_,I,oe(),x);return function g0(w,g,_,I=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),te=Math.max((window.screen.availWidth-I)/2,0).toString();let Fe="";const ot=Object.assign(Object.assign({},Ny),{width:I.toString(),height:x.toString(),top:O,left:te}),bt=(0,$.z$)().toLowerCase();_&&(Fe=J(bt)?"_blank":_),M(bt)&&(g=g||"http://localhost",ot.scrollbars="yes");const Yt=Object.entries(ot).reduce((Ti,[Li,ja])=>`${Ti}${Li}=${ja},`,"");if(function wn(w=(0,$.z$)()){var g;return Be(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(bt)&&"_self"!==Fe)return function ju(w,g){const _=document.createElement("a");_.href=w,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",Fe),new uc(null);const Dn=window.open(g||"",Fe,Yt);ne(Dn,w,"popup-blocked");try{Dn.focus()}catch{}return new uc(Dn)}(g,Fe,jo())})()}_openRedirect(g,_,I,x){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(g),function Td(w){Kn().location.href=w}(Ba(g,_,I,oe(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(_e(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const I=yield function $g(w){return ac.apply(this,arguments)}(g),x=new Ur(g);return I.register("authEvent",O=>(ne(O?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=I,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send($a,{type:$a},x=>{var O;const te=null===(O=x?.[0])||void 0===O?void 0:O[$a];void 0!==te&&_(!!te),et(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Vg(w){return Zi.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return En()||V()||Be()}};class Mf extends class Pd{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return ae("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Mf(g)}_finalizeEnroll(g,_,I){return function Su(w,g){return mt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Et(w,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ko(w,g){return mt(w,"POST","/v2/accounts/mfaSignIn:finalize",Et(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nf=(()=>{class w{constructor(){}static assertion(_){return Mf._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Wu="@firebase/auth";class Hg{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{g(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Od=(0,$.Pz)("authIdTokenMaxAge")||300;let Gg=null;const hi=w=>function(){var g=(0,f.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),x=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(x&&x>Od)return;const O=I?.token;Gg!==O&&(Gg=O,yield fetch(w,{method:O?"POST":"DELETE",headers:O?{Authorization:`Bearer ${O}`}:{}}))});return function(_){return g.apply(this,arguments)}}();function kf(w=(0,P.getApp)()){const g=(0,P._getProvider)(w,"auth");if(g.isInitialized())return g.getImmediate();const _=function kt(w,g){const _=(0,P._getProvider)(w,"auth");if(_.isInitialized()){const x=_.getImmediate(),O=_.getOptions();if((0,$.vZ)(O,g??{}))return x;et(x,"already-initialized")}return _.initialize({options:g})}(w,{popupRedirectResolver:Ki,persistence:[Zo,pr,Ms]}),I=(0,$.Pz)("authTokenSyncURL");if(I){const O=hi(I);(function Tu(w,g,_){(0,$.m9)(w).beforeAuthStateChanged(g,_)})(_,O,()=>O(_.currentUser)),function Jl(w,g,_,I){(0,$.m9)(w).onIdTokenChanged(g,_,I)}(_,te=>O(te))}const x=(0,$.q4)("auth");return x&&Zs(_,`http://${x}`),_}!function Fy(w){(0,P._registerComponent)(new pe.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:te}=I.options;return((Fe,ot)=>{ne(O&&!O.includes(":"),"invalid-api-key",{appName:Fe.name}),ne(!te?.includes(":"),"argument-error",{appName:Fe.name});const bt={apiKey:O,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mn(w)},Yt=new bo(Fe,ot,bt);return function Xe(w,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(qe);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,g?.popupRedirectResolver)}(Yt,_),Yt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new pe.wA("auth-internal",g=>{const _=It(g.getProvider("auth").getImmediate());return new Hg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Wu,"0.21.3",function Oy(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(Wu,"0.21.3","esm2017")}("Browser")},2090:(_t,xe,F)=>{F.d(xe,{$s:()=>rt,BH:()=>Me,DV:()=>zn,G6:()=>Ee,GJ:()=>Lr,L:()=>le,LL:()=>_n,P0:()=>Qe,Pz:()=>Re,Sg:()=>be,UG:()=>ae,UI:()=>$i,US:()=>pe,Wl:()=>tn,Yr:()=>ge,ZB:()=>G,ZR:()=>Ft,aH:()=>et,b$:()=>qe,cI:()=>mt,dS:()=>jt,eu:()=>Le,g5:()=>P,gK:()=>tr,gQ:()=>An,h$:()=>de,hl:()=>Oe,hu:()=>$,jU:()=>_e,m9:()=>sn,ne:()=>Rn,p$:()=>z,pd:()=>Gs,q4:()=>he,r3:()=>Jr,ru:()=>ze,tV:()=>me,uI:()=>ne,ug:()=>oi,vZ:()=>Je,w1:()=>Xe,w9:()=>wr,xO:()=>Sn,xb:()=>Ni,z$:()=>We,zI:()=>De,zd:()=>xr});const $=function(W,H){if(!W)throw P(H)},P=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},re=function(W){const H=[];let K=0;for(let U=0;U<W.length;U++){let M=W.charCodeAt(U);M<128?H[K++]=M:M<2048?(H[K++]=M>>6|192,H[K++]=63&M|128):55296==(64512&M)&&U+1<W.length&&56320==(64512&W.charCodeAt(U+1))?(M=65536+((1023&M)<<10)+(1023&W.charCodeAt(++U)),H[K++]=M>>18|240,H[K++]=M>>12&63|128,H[K++]=M>>6&63|128,H[K++]=63&M|128):(H[K++]=M>>12|224,H[K++]=M>>6&63|128,H[K++]=63&M|128)}return H},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,H){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let M=0;M<W.length;M+=3){const V=W[M],J=M+1<W.length,Ve=J?W[M+1]:0,st=M+2<W.length,ct=st?W[M+2]:0;let Ut=(15&Ve)<<2|ct>>6,wn=63&ct;st||(wn=64,J||(Ut=64)),U.push(K[V>>2],K[(3&V)<<4|Ve>>4],K[Ut],K[wn])}return U.join("")},encodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(W):this.encodeByteArray(re(W),H)},decodeString(W,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(W):function(W){const H=[];let K=0,U=0;for(;K<W.length;){const M=W[K++];if(M<128)H[U++]=String.fromCharCode(M);else if(M>191&&M<224){const V=W[K++];H[U++]=String.fromCharCode((31&M)<<6|63&V)}else if(M>239&&M<365){const st=((7&M)<<18|(63&W[K++])<<12|(63&W[K++])<<6|63&W[K++])-65536;H[U++]=String.fromCharCode(55296+(st>>10)),H[U++]=String.fromCharCode(56320+(1023&st))}else{const V=W[K++],J=W[K++];H[U++]=String.fromCharCode((15&M)<<12|(63&V)<<6|63&J)}}return H.join("")}(this.decodeStringToByteArray(W,H))},decodeStringToByteArray(W,H){this.init_();const K=H?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let M=0;M<W.length;){const V=K[W.charAt(M++)],Ve=M<W.length?K[W.charAt(M)]:0;++M;const ct=M<W.length?K[W.charAt(M)]:64;++M;const Be=M<W.length?K[W.charAt(M)]:64;if(++M,null==V||null==Ve||null==ct||null==Be)throw Error();U.push(V<<2|Ve>>4),64!==ct&&(U.push(Ve<<4&240|ct>>2),64!==Be&&U.push(ct<<6&192|Be))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},de=function(W){const H=re(W);return pe.encodeByteArray(H,!0)},le=function(W){return de(W).replace(/\./g,"")},me=function(W){try{return pe.decodeString(W,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z(W){return G(void 0,W)}function G(W,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return H}for(const K in H)!H.hasOwnProperty(K)||!X(K)||(W[K]=G(W[K],H[K]));return W}function X(W){return"__proto__"!==W}const ve=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=W&&me(W[1]);return H&&JSON.parse(H)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},he=W=>{var H,K;return null===(K=null===(H=ve())||void 0===H?void 0:H.emulatorHosts)||void 0===K?void 0:K[W]},Qe=W=>{const H=he(W);if(!H)return;const K=H.lastIndexOf(":");if(K<=0||K+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const U=parseInt(H.substring(K+1),10);return"["===H[0]?[H.substring(1,K-1),U]:[H.substring(0,K),U]},et=()=>{var W;return null===(W=ve())||void 0===W?void 0:W.config},Re=W=>{var H;return null===(H=ve())||void 0===H?void 0:H[`_${W}`]};class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,K)=>{this.resolve=H,this.reject=K})}wrapCallback(H){return(K,U)=>{K?this.reject(K):this.resolve(U),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(K):H(K,U))}}}function be(W,H){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=H||"demo-project",M=W.iat||0,V=W.sub||W.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const J=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:M,exp:M+3600,auth_time:M,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},W);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(J)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function ae(){var W;const H=null===(W=ve())||void 0===W?void 0:W.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function ze(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const W=We();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function ge(){return!1}function Ee(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise((W,H)=>{try{let K=!0;const U="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(U);M.onsuccess=()=>{M.result.close(),K||self.indexedDB.deleteDatabase(U),W(!0)},M.onupgradeneeded=()=>{K=!1},M.onerror=()=>{var V;H((null===(V=M.error)||void 0===V?void 0:V.message)||"")}}catch(K){H(K)}})}function De(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ft extends Error{constructor(H,K,U){super(K),this.code=H,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,Ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(H,K,U){this.service=H,this.serviceName=K,this.errors=U}create(H,...K){const U=K[0]||{},M=`${this.service}/${H}`,V=this.errors[H],J=V?function it(W,H){return W.replace(Et,(K,U)=>{const M=H[U];return null!=M?String(M):`<${U}?>`})}(V,U):"Error";return new Ft(M,`${this.serviceName}: ${J} (${M}).`,U)}}const Et=/\{\$([^}]+)}/g;function mt(W){return JSON.parse(W)}function tn(W){return JSON.stringify(W)}const Gn=function(W){let H={},K={},U={},M="";try{const V=W.split(".");H=mt(me(V[0])||""),K=mt(me(V[1])||""),M=V[2],U=K.d||{},delete K.d}catch{}return{header:H,claims:K,data:U,signature:M}},wr=function(W){const K=Gn(W).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Lr=function(W){const H=Gn(W).claims;return"object"==typeof H&&!0===H.admin};function Jr(W,H){return Object.prototype.hasOwnProperty.call(W,H)}function zn(W,H){if(Object.prototype.hasOwnProperty.call(W,H))return W[H]}function Ni(W){for(const H in W)if(Object.prototype.hasOwnProperty.call(W,H))return!1;return!0}function $i(W,H,K){const U={};for(const M in W)Object.prototype.hasOwnProperty.call(W,M)&&(U[M]=H.call(K,W[M],M,W));return U}function Je(W,H){if(W===H)return!0;const K=Object.keys(W),U=Object.keys(H);for(const M of K){if(!U.includes(M))return!1;const V=W[M],J=H[M];if(lr(V)&&lr(J)){if(!Je(V,J))return!1}else if(V!==J)return!1}for(const M of U)if(!K.includes(M))return!1;return!0}function lr(W){return null!==W&&"object"==typeof W}function Sn(W){const H=[];for(const[K,U]of Object.entries(W))Array.isArray(U)?U.forEach(M=>{H.push(encodeURIComponent(K)+"="+encodeURIComponent(M))}):H.push(encodeURIComponent(K)+"="+encodeURIComponent(U));return H.length?"&"+H.join("&"):""}function xr(W){const H={};return W.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[M,V]=U.split("=");H[decodeURIComponent(M)]=decodeURIComponent(V)}}),H}function Gs(W){const H=W.indexOf("?");if(!H)return"";const K=W.indexOf("#",H);return W.substring(H,K>0?K:void 0)}class An{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,K){K||(K=0);const U=this.W_;if("string"==typeof H)for(let Be=0;Be<16;Be++)U[Be]=H.charCodeAt(K)<<24|H.charCodeAt(K+1)<<16|H.charCodeAt(K+2)<<8|H.charCodeAt(K+3),K+=4;else for(let Be=0;Be<16;Be++)U[Be]=H[K]<<24|H[K+1]<<16|H[K+2]<<8|H[K+3],K+=4;for(let Be=16;Be<80;Be++){const Ut=U[Be-3]^U[Be-8]^U[Be-14]^U[Be-16];U[Be]=4294967295&(Ut<<1|Ut>>>31)}let ct,Ae,M=this.chain_[0],V=this.chain_[1],J=this.chain_[2],Ve=this.chain_[3],st=this.chain_[4];for(let Be=0;Be<80;Be++){Be<40?Be<20?(ct=Ve^V&(J^Ve),Ae=1518500249):(ct=V^J^Ve,Ae=1859775393):Be<60?(ct=V&J|Ve&(V|J),Ae=2400959708):(ct=V^J^Ve,Ae=3395469782);const Ut=(M<<5|M>>>27)+ct+st+Ae+U[Be]&4294967295;st=Ve,Ve=J,J=4294967295&(V<<30|V>>>2),V=M,M=Ut}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+V&4294967295,this.chain_[2]=this.chain_[2]+J&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+st&4294967295}update(H,K){if(null==H)return;void 0===K&&(K=H.length);const U=K-this.blockSize;let M=0;const V=this.buf_;let J=this.inbuf_;for(;M<K;){if(0===J)for(;M<=U;)this.compress_(H,M),M+=this.blockSize;if("string"==typeof H){for(;M<K;)if(V[J]=H.charCodeAt(M),++J,++M,J===this.blockSize){this.compress_(V),J=0;break}}else for(;M<K;)if(V[J]=H[M],++J,++M,J===this.blockSize){this.compress_(V),J=0;break}}this.inbuf_=J,this.total_+=K}digest(){const H=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&K,K/=256;this.compress_(this.buf_);let U=0;for(let M=0;M<5;M++)for(let V=24;V>=0;V-=8)H[U]=this.chain_[M]>>V&255,++U;return H}}function Rn(W,H){const K=new bn(W,H);return K.subscribe.bind(K)}class bn{constructor(H,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{H(this)}).catch(U=>{this.error(U)})}next(H){this.forEachObserver(K=>{K.next(H)})}error(H){this.forEachObserver(K=>{K.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,K,U){let M;if(void 0===H&&void 0===K&&void 0===U)throw new Error("Missing Observer.");M=function vt(W,H){if("object"!=typeof W||null===W)return!1;for(const K of H)if(K in W&&"function"==typeof W[K])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:K,complete:U},void 0===M.next&&(M.next=Vt),void 0===M.error&&(M.error=Vt),void 0===M.complete&&(M.complete=Vt);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),V}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,H)}sendOne(H,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{K(this.observers[H])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vt(){}function tr(W,H){return`${W} failed: ${H} argument `}const jt=function(W){const H=[];let K=0;for(let U=0;U<W.length;U++){let M=W.charCodeAt(U);if(M>=55296&&M<=56319){const V=M-55296;U++,$(U<W.length,"Surrogate pair missing trail surrogate."),M=65536+(V<<10)+(W.charCodeAt(U)-56320)}M<128?H[K++]=M:M<2048?(H[K++]=M>>6|192,H[K++]=63&M|128):M<65536?(H[K++]=M>>12|224,H[K++]=M>>6&63|128,H[K++]=63&M|128):(H[K++]=M>>18|240,H[K++]=M>>12&63|128,H[K++]=M>>6&63|128,H[K++]=63&M|128)}return H},oi=function(W){let H=0;for(let K=0;K<W.length;K++){const U=W.charCodeAt(K);U<128?H++:U<2048?H+=2:U>=55296&&U<=56319?(H+=4,K++):H+=3}return H};function rt(W,H=1e3,K=2){const U=H*Math.pow(K,W),M=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+M)}function sn(W){return W&&W._delegate?W._delegate:W}},188:(_t,xe,F)=>{var f=F(4650);let $=null;function P(){return $}const de=new f.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function me(){return(0,f.LFG)(G)}()},providedIn:"platform"}),n})();const z=new f.OlP("Location Initialized");let G=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return new G((0,f.LFG)(de))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Qe)},providedIn:"root"}),n})();const he=new f.OlP("appBaseHref");let Qe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),et=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(We(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=ke,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Me(){return new Re((0,f.LFG)(ve))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}class Ys{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let as=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ys(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Qs(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Qs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Qs(n,e){n.context.$implicit=e.item}let cr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new uf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class uf{constructor(){this.$implicit=null,this.ngIf=null}}function dr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Mo(n){return"server"===n}let pd=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new lf((0,f.LFG)(de),window)}),n})();class lf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Pi(this.window.history)||Pi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Pi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class vd extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){$||($=n)}(new xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wd(){return Rs=Rs||document.querySelector("base"),Rs?Rs.getAttribute("href"):null}();return null==t?null:function hs(n){$n=$n||document.createElement("a"),$n.setAttribute("href",n);const e=$n.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ul(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let $n,Rs=null;const Fn=new f.OlP("TRANSITION_ID"),Yl=[{provide:f.ip1,useFactory:function Ed(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Fn,de,f.zs3],multi:!0}];let Ql=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Xl=new f.OlP("EventManagerPlugins");let Jl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xl),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Tu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Uo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Bo=(()=>{class n extends Uo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Id),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Id))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Id(n){P().remove(n)}const $o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cd=/%COMP%/g;function Au(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Au(n,i,t):(i=i.replace(Cd,n),t.push(i))}return t}function xu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ru=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Dd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new _f(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Au(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jl),f.LFG(Bo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class fs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS($o[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Na(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Na(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=$o[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=$o[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xu(r)):this.eventManager.addEventListener(e,t,xu(r))}}function Na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Dd extends fs{constructor(e,t,r,i){super(e),this.component=r;const a=Au(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Zn(n){return"_ngcontent-%COMP%".replace(Cd,n)}(i+"-"+r.id),this.hostAttr=function Su(n){return"_nghost-%COMP%".replace(Cd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class _f extends fs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Au(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let pr=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const yf=["alt","control","meta","shift"],Ms={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ka=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),yf.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Ms[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),yf.forEach(l=>{l!==i&&(0,nc[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Pa=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Sd(){xs.makeCurrent()},multi:!0},{provide:de,useFactory:function rc(){return(0,f.RDi)(document),document},deps:[]}]),no=new f.OlP(""),Oa=[{provide:f.rWj,useClass:class gf{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ho=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ps(){return new f.qLn},deps:[]},{provide:Xl,useClass:pr,multi:!0,deps:[de,f.R0b,f.Lbi]},{provide:Xl,useClass:ka,multi:!0,deps:[de]},{provide:Ru,useClass:Ru,deps:[Jl,Bo,f.AFp]},{provide:f.FYo,useExisting:Ru},{provide:Uo,useExisting:Bo},{provide:Bo,useClass:Bo,deps:[de]},{provide:Jl,useClass:Jl,deps:[Xl,f.R0b]},{provide:class No{},useClass:Ql,deps:[]},[]];let Wo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Fn,useExisting:f.AFp},Yl]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(no,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Ho,...Oa],imports:[kg,f.hGG]}),n})(),Wi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Fa(){return new Wi((0,f.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var yn=F(8996),gs=F(7669);function dt(...n){const e=(0,gs.yG)(n);return(0,yn.D)(n,e)}var zi=F(7579);class kn extends zi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const io=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var zr=F(9751);const{isArray:so}=Array,{getPrototypeOf:Rd,prototype:Md,keys:bf}=Object;function ks(n){if(1===n.length){const e=n[0];if(so(e))return{args:e,keys:null};if(function Nd(n){return n&&"object"==typeof n&&Rd(n)===Md}(e)){const t=bf(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var oo=F(4671),pt=F(4004);const{isArray:oc}=Array;function Fu(n){return(0,pt.U)(e=>function qi(n,e){return oc(e)?n(...e):n(e)}(n,e))}function La(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Ir=F(5403),Va=F(9672);function Lu(...n){const e=(0,gs.yG)(n),t=(0,gs.jO)(n),{args:r,keys:i}=ks(n);if(0===r.length)return(0,yn.D)([],e);const a=new zr.y(function Ua(n,e,t=oo.y){return r=>{Df(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)Df(e,()=>{const v=(0,yn.D)(n[m],e);let D=!1;v.subscribe((0,Ir.x)(r,S=>{a[m]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>La(i,l):oo.y));return t?a.pipe(Fu(t)):a}function Df(n,e,t){n?(0,Va.f)(t,n,e):e()}var Jo=F(8189);function ea(...n){return function Vu(){return(0,Jo.J)(1)}()((0,yn.D)(n,(0,gs.yG)(n)))}var ao=F(8421);function Fi(n){return new zr.y(e=>{(0,ao.Xf)(n()).subscribe(e)})}var Uu=F(9635),Ps=F(576);function uo(n,e){const t=(0,Ps.m)(n)?n:()=>n,r=i=>i.error(t());return new zr.y(e?i=>e.schedule(r,0,i):r)}var qr=F(515),kd=F(727),jn=F(4482);function lo(){return(0,jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ir.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class co extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ir.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kd.w0.EMPTY)}return e}refCount(){return lo()(this)}}function gr(n,e){return(0,jn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Ir.x)(r,m=>{i?.unsubscribe();let v=0;const D=a++;(0,ao.Xf)(n(m,D)).subscribe(i=(0,Ir.x)(r,S=>r.next(e?e(m,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Ln(n){return n<=0?()=>qr.E:(0,jn.e)((e,t)=>{let r=0;e.subscribe((0,Ir.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ho(...n){const e=(0,gs.yG)(n);return(0,jn.e)((t,r)=>{(e?ea(n,t,e):ea(n,t)).subscribe(r)})}function Di(n,e){return(0,jn.e)((t,r)=>{let i=0;t.subscribe((0,Ir.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var b=F(5577);function T(n){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,Ir.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function R(n=B){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,Ir.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function B(){return new io}function Y(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Di((i,a)=>n(i,a,r)):oo.y,Ln(1),t?T(e):R(()=>new io))}function ie(n,e){return(0,Ps.m)(e)?(0,b.z)(n,e,1):(0,b.z)(n,1)}var we=F(8505);function Ke(n){return(0,jn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Ir.x)(t,void 0,void 0,l=>{a=(0,ao.Xf)(n(l,Ke(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ut(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,Ir.x)(l,D=>{const S=v++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function wt(n,e){return(0,jn.e)(ut(n,e,arguments.length>=2,!0))}function Wt(n){return n<=0?()=>qr.E:(0,jn.e)((e,t)=>{let r=[];e.subscribe((0,Ir.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Di((i,a)=>n(i,a,r)):oo.y,Wt(1),t?T(e):R(()=>new io))}function fo(n){return(0,jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Zr=Symbol("RouteTitle");class Nr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function di(n){return new Nr(n)}function Tf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!xy(n[i],e[i]))return!1;return!0}function xy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ug(n){return Array.prototype.concat.apply([],n)}function Sf(n){return n.length>0?n[n.length-1]:null}function Yn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function po(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,yn.D)(Promise.resolve(n)):dt(n)}const p0={exact:function $g(n,e,t){if(!ju(n.segments,e.segments)||!Bu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$g(n.children[r],e.children[r],t))return!1;return!0},subset:Ny},xf={exact:function My(n,e){return Zi(n,e)},subset:function ac(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xy(n[t],e[t]))},ignored:()=>!0};function Ry(n,e,t){return p0[t.paths](n.root,e.root,t.matrixParams)&&xf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ny(n,e,t){return ky(n,e,e.segments,t)}function ky(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ju(i,t)||e.hasChildren()||!Bu(i,t,r))}if(n.segments.length===t.length){if(!ju(n.segments,t)||!Bu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ny(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ju(n.segments,i)&&Bu(n.segments,i,r)&&n.children[Gt])&&ky(n.children[Gt],e,a,r)}}function Bu(n,e,t){return e.every((r,i)=>xf[t](n[i].parameters,r.parameters))}class $u{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=di(this.queryParams)),this._queryParamMap}toString(){return jg.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $a(this)}}class uc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=di(this.parameters)),this._parameterMap}toString(){return Hg(this)}}function ju(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Ba},providedIn:"root"}),n})();class Ba{parse(e){const t=new g(e);return new $u(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hu(e.root,!0)}`,r=function Fy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Pd(t)}=${Pd(i)}`).join("&"):`${Pd(t)}=${Pd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Mf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const jg=new Ba;function $a(n){return n.segments.map(e=>Hg(e)).join("/")}function Hu(n,e){if(!n.hasChildren())return $a(n);if(e){const t=n.children[Gt]?Hu(n.children[Gt],!1):"",r=[];return Yn(n.children,(i,a)=>{a!==Gt&&r.push(`${a}:${Hu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Py(n,e){let t=[];return Yn(n.children,(r,i)=>{i===Gt&&(t=t.concat(e(r,i)))}),Yn(n.children,(r,i)=>{i!==Gt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Gt?[Hu(n.children[Gt],!1)]:[`${i}:${Hu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${$a(n)}/${t[0]}`:`${$a(n)}/(${t.join("//")})`}}function Ki(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(n){return Ki(n).replace(/%3B/gi,";")}function Nf(n){return Ki(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wu(n){return decodeURIComponent(n)}function lc(n){return Wu(n.replace(/\+/g,"%20"))}function Hg(n){return`${Nf(n.path)}${function Oy(n){return Object.keys(n).map(e=>`;${Nf(e)}=${Nf(n[e])}`).join("")}(n.parameters)}`}const Wg=/^[^\/()?;=#]+/;function Od(n){const e=n.match(Wg);return e?e[0]:""}const Gg=/^[^=?&#]+/,kf=/^[^&#]+/;class g{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new rn(e,t)),r}parseSegment(){const e=Od(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new uc(Wu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Od(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Od(this.remaining);i&&(r=i,this.capture(r))}e[Wu(t)]=Wu(r)}parseQueryParam(e){const t=function hi(n){const e=n.match(Gg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function w(n){const e=n.match(kf);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=lc(t),a=lc(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Od(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Gt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Gt]:new rn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function _(n){return n.segments.length>0?new rn([],{[Gt]:n}):n}function I(n){const e={};for(const r of Object.keys(n.children)){const a=I(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function x(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}function O(n){return n instanceof $u}function Yt(n,e,t,r,i){if(0===t.length)return Li(e.root,e.root,e.root,r,i);const a=function Fd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Yn(a.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new cc(t,e,r)}(t);return a.toRoot()?Li(e.root,e.root,new rn([],{}),r,i):function l(m){const v=function Ha(n,e,t,r){if(n.isAbsolute)return new ta(e.root,!0,0);if(-1===r)return new ta(t,t===e.root,0);return function Pf(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new ta(r,!1,i-a)}(t,r+(Dn(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),D=v.processChildren?na(v.segmentGroup,v.index,a.commands):Wa(v.segmentGroup,v.index,a.commands);return Li(e.root,v.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function Dn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ti(n){return"object"==typeof n&&null!=n&&n.outlets}function Li(n,e,t,r,i){let l,a={};r&&Yn(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),l=n===e?t:ja(n,e,t);const h=_(I(l));return new $u(h,a,i)}function ja(n,e,t){const r={};return Yn(n.children,(i,a)=>{r[a]=i===e?t:ja(i,e,t)}),new rn(n.segments,r)}class cc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dn(r[0]))throw new f.vHH(4003,!1);const i=r.find(Ti);if(i&&i!==Sf(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ta{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Wa(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return na(n,e,t);const r=function Zg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Ti(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Ly(m,v,l))return a;r+=2}else{if(!Ly(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new rn(n.segments.slice(0,r.pathIndex),{});return a.children[Gt]=new rn(n.segments.slice(r.pathIndex),n.children),na(a,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?Ld(n,e,t):r.match?na(n,0,i):Ld(n,e,t)}function na(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function qg(n){return Ti(n[0])?n[0].outlets:{[Gt]:n}}(t),i={};return Yn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Wa(n.children[l],e,a))}),Yn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new rn(n.segments,i)}}function Ld(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ti(a)){const m=Gu(a.outlets);return new rn(r,m)}if(0===i&&Dn(t[0])){r.push(new uc(n.segments[e].path,Kg(t[0]))),i++;continue}const l=Ti(a)?a.outlets[Gt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Dn(h)?(r.push(new uc(l,Kg(h))),i+=2):(r.push(new uc(l,{})),i++)}return new rn(r,{})}function Gu(n){const e={};return Yn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ld(new rn([],{}),0,t))}),e}function Kg(n){const e={};return Yn(n,(t,r)=>e[r]=`${t}`),e}function Ly(n,e,t){return n==t.path&&Zi(e,t.parameters)}class Ga{constructor(e,t){this.id=e,this.url=t}}class Of extends Ga{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class dc extends Ga{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yg extends Ga{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class m0 extends Ga{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qD extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZD extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KD extends Ga{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _0 extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vy extends Ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uy{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YD{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class By{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=I0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return I0(e,this._root).map(t=>t.value)}}function $y(n,e){if(n===e.value)return e;for(const t of e.children){const r=$y(n,t);if(r)return r}return null}function I0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=I0(n,t);if(r.length)return r.unshift(e),r}return[]}class Os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jy extends By{constructor(e,t){super(e),this.snapshot=t,Ff(this,e)}toString(){return this.snapshot.toString()}}function Hy(n,e){const t=function C0(n,e){const l=new hc([],{},{},"",{},Gt,e,null,n.root,-1,{});return new Gy("",new Os(l,[]))}(n,e),r=new kn([new uc("",{})]),i=new kn({}),a=new kn({}),l=new kn({}),h=new kn(""),m=new za(r,i,l,h,a,Gt,e,t.root);return m.snapshot=t.root,new jy(new Os(m,[]),t)}class za{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,pt.U)(v=>v[Zr]))??dt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>di(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>di(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Qg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hc{constructor(e,t,r,i,a,l,h,m,v,D,S,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.[Zr],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._correctedLastPathIndex=k??D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=di(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=di(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gy extends By{constructor(e,t){super(t),this.url=e,Ff(this,t)}toString(){return Xg(this._root)}}function Ff(n,e){e.value._routerState=n,e.children.forEach(t=>Ff(n,t))}function Xg(n){const e=n.children.length>0?` { ${n.children.map(Xg).join(", ")} } `:"";return`${n.value}${e}`}function Lf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zi(e.params,t.params)||n.params.next(t.params),function Vg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fc(n,e){const t=Zi(n.params,e.params)&&function g0(n,e){return ju(n,e)&&n.every((t,r)=>Zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fc(n.parent,e.parent))}function Ud(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function JD(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ud(n,r,i);return Ud(n,r)})}(n,e,t);return new Os(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Ud(n,h)),l}}const r=function eT(n){return new za(new kn(n.url),new kn(n.params),new kn(n.queryParams),new kn(n.fragment),new kn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ud(n,a));return new Os(r,i)}}const Jg="ngNavigationCancelingError";function em(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=O(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Vf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Vf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Jg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function tm(n){return qu(n)&&O(n.url)}function qu(n){return n&&n[Jg]}class tT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Uf,this.attachRef=null}}let Uf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zy=!1;let qy=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,zy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,zy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,zy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,zy);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new Zy(t,h,i.injector);if(r&&function nT(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Uf),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Zy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===za?this.route:e===Uf?this.childContexts:this.parent.get(e,t)}}let nm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[qy],encapsulation:2}),n})();function Bf(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ky(n){const e=n.children&&n.children.map(Ky),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=nm),t}function Fs(n){return n.outlet||Gt}function qa(n,e){const t=n.filter(r=>Fs(r)===e);return t.push(...n.filter(r=>Fs(r)!==e)),t}function Za(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class WM{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vd(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Yn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Vd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Vd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vd(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new w0(a.value.snapshot))}),e.children.length&&this.forwardEvent(new QD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Lf(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Lf(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Za(i.snapshot),m=h?.get(f._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class cT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Yy{constructor(e,t){this.component=e,this.route=t}}function GM(n,e,t){const r=n._root;return $f(r,e?e._root:null,t,[r.value])}function pc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function $f(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Vd(e);return n.children.forEach(l=>{(function dT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function hT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ju(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ju(n.url,e.url)||!Zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fc(n,e)||!Zi(n.queryParams,e.queryParams);default:return!fc(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new cT(r)):(a.data=l.data,a._resolvedData=l._resolvedData),$f(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Yy(h.outlet.component,l))}else l&&jf(e,h,i),i.canActivateChecks.push(new cT(r)),$f(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Yn(a,(l,h)=>jf(l,t.getContext(h),i)),i}function jf(n,e,t){const r=Vd(n),i=n.value;Yn(r,(a,l)=>{jf(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Yy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gc(n){return"function"==typeof n}function Wf(n){return n instanceof io||"EmptyError"===n?.name}const Bd=Symbol("INITIAL_VALUE");function Gf(){return gr(n=>Lu(n.map(e=>e.pipe(Ln(1),ho(Bd)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===Bd)return Bd;if(!1===t||t instanceof $u)return t}return!0}),Di(e=>e!==Bd),Ln(1)))}function sm(n){return(0,Uu.z)((0,we.b)(e=>{if(O(e))throw em(0,e)}),(0,pt.U)(e=>!0===e))}const Cr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R0(n,e,t,r,i){const a=Qy(n,e,t);return a.matched?function yT(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?dt(i.map(l=>{const h=pc(l,n);return po(function qM(n){return n&&gc(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Gf(),sm()):dt(!0)}(r=Bf(e,r),e,t).pipe((0,pt.U)(l=>!0===l?a:{...Cr})):dt(a)}function Qy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cr}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Tf)(t,n,e);if(!i)return{...Cr};const a={};Yn(i.posParams,(h,m)=>{a[m]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function $d(n,e,t,r,i="corrected"){if(t.length>0&&function wT(n,e,t){return t.some(r=>om(n,e,r)&&Fs(r)!==Gt)}(n,t,r)){const l=new rn(e,function vT(n,e,t,r){const i={};i[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Fs(a)!==Gt){const l=new rn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Fs(a)]=l}return i}(n,e,r,new rn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function ET(n,e,t){return t.some(r=>om(n,e,r))}(n,t,r)){const l=new rn(n.segments,function M0(n,e,t,r,i,a){const l={};for(const h of r)if(om(n,t,h)&&!i[Fs(h)]){const m=new rn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Fs(h)]=m}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new rn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function om(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function N0(n,e,t,r){return!!(Fs(n)===r||r!==Gt&&om(e,t,n))&&("**"===n.path||Qy(e,n,t).matched)}function IT(n,e,t){return 0===e.length&&!n.children[t]}const Xy=!1;class Zu{constructor(e){this.segmentGroup=e||null}}class am{constructor(e){this.urlTree=e}}function jd(n){return uo(new Zu(n))}function Jy(n){return uo(new am(n))}class O0{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=$d(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,pt.U)(a=>this.createUrlTree(I(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ke(a=>{if(a instanceof am)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Zu?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,pt.U)(i=>this.createUrlTree(I(i),e.queryParams,e.fragment))).pipe(Ke(i=>{throw i instanceof Zu?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Xy)}createUrlTree(e,t,r){const i=_(e);return new $u(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(a=>new rn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,yn.D)(i).pipe(ie(a=>{const l=r.children[a],h=qa(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,pt.U)(m=>({segment:m,outlet:a})))}),wt((a,l)=>(a[l.outlet]=l.segment,a),{}),Rt())}expandSegment(e,t,r,i,a,l){return(0,yn.D)(r).pipe(ie(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Ke(v=>{if(v instanceof Zu)return dt(null);throw v}))),Y(h=>!!h),Ke((h,m)=>{if(Wf(h))return IT(t,i,a)?dt(new rn([],{})):jd(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return N0(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):jd(t):jd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jy(a):this.lineralizeSegments(r,a).pipe((0,b.z)(l=>{const h=new rn(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=Qy(t,i,a);if(!h)return jd(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?Jy(S):this.lineralizeSegments(i,S).pipe((0,b.z)(k=>this.expandSegment(e,t,r,k.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Bf(r,e),r.loadChildren?(r._loadedRoutes?dt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new rn(i,{})))):dt(new rn(i,{}))):R0(t,r,i,e).pipe(gr(({matched:l,consumedSegments:h,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,b.z)(D=>{const S=D.injector??e,k=D.routes,{segmentGroup:j,slicedSegments:Z}=$d(t,h,m,k),fe=new rn(j.segments,j.children);if(0===Z.length&&fe.hasChildren())return this.expandChildren(S,k,fe).pipe((0,pt.U)(ht=>new rn(h,ht)));if(0===k.length&&0===Z.length)return dt(new rn(h,{}));const Ce=Fs(r)===a;return this.expandSegment(S,fe,k,Z,Ce?Gt:a,!0).pipe((0,pt.U)(At=>new rn(h.concat(At.segments),At.children)))})):jd(t)))}getChildConfig(e,t,r){return t.children?dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function _T(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?dt(!0):dt(i.map(l=>{const h=pc(l,n);return po(function Hf(n){return n&&gc(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Gf(),sm())}(e,t,r).pipe((0,b.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,we.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function CT(n){return uo(Vf(Xy,3))}())):dt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[Gt])return uo(new f.vHH(4e3,Xy));i=i.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new $u(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Yn(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new rn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Xy);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class bT{}class L0{constructor(e,t,r,i,a,l,h,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=m}recognize(){const e=$d(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new hc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Os(r,t),a=new Gy(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Wy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,yn.D)(Object.keys(r.children)).pipe(ie(i=>{const a=r.children[i],l=qa(t,i);return this.processSegmentGroup(e,l,a,i)}),wt((i,a)=>i&&a?(i.push(...a),i):null),function Ur(n,e=!1){return(0,jn.e)((t,r)=>{let i=0;t.subscribe((0,Ir.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),T(null),Rt(),(0,pt.U)(i=>{if(null===i)return null;const a=zf(i);return function mc(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,yn.D)(t).pipe(ie(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),Y(l=>!!l),Ke(l=>{if(Wf(l))return IT(r,i,a)?dt([]):dt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!N0(t,r,i,a))return dt(null);let l;if("**"===t.path){const h=i.length>0?Sf(i).parameters:{},m=qf(r)+i.length;l=dt({snapshot:new hc(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iv(t),Fs(t),t.component??t._loadedComponent??null,t,um(r),m,lm(t),m),consumedSegments:[],remainingSegments:[]})}else l=R0(r,t,i,e).pipe((0,pt.U)(({matched:h,consumedSegments:m,remainingSegments:v,parameters:D})=>{if(!h)return null;const S=qf(r)+m.length;return{snapshot:new hc(m,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iv(t),Fs(t),t.component??t._loadedComponent??null,t,um(r),S,lm(t),S),consumedSegments:m,remainingSegments:v}}));return l.pipe(gr(h=>{if(null===h)return dt(null);const{snapshot:m,consumedSegments:v,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,k=function DT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:Z}=$d(r,v,D,k.filter(Ce=>void 0===Ce.redirectTo),this.relativeLinkResolution);if(0===Z.length&&j.hasChildren())return this.processChildren(S,k,j).pipe((0,pt.U)(Ce=>null===Ce?null:[new Os(m,Ce)]));if(0===k.length&&0===Z.length)return dt([new Os(m,[])]);const fe=Fs(t)===a;return this.processSegment(S,k,j,Z,fe?Gt:a).pipe((0,pt.U)(Ce=>null===Ce?null:[new Os(m,Ce)]))}))}}function rv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zf(n){const e=[],t=new Set;for(const r of n){if(!rv(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zf(r.children);e.push(new Os(r.value,i))}return e.filter(r=>!t.has(r))}function um(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qf(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function iv(n){return n.data||{}}function lm(n){return n.resolve||{}}function U0(n){return"string"==typeof n.title||null===n.title}function sv(n){return gr(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,pt.U)(()=>e)):dt(e)})}let cm=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Zr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(B0)},providedIn:"root"}),n})(),B0=(()=>{class n extends cm{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NT{}class YM extends class $0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yu=new f.OlP("",{providedIn:"root",factory:()=>({})}),Qu=new f.OlP("ROUTES");let _c=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=po(t.loadComponent()).pipe((0,we.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),fo(()=>{this.componentLoaders.delete(t)})),i=new co(r,()=>new zi.x).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,D=!1;Array.isArray(h)?v=h:(m=h.create(t).injector,v=Ug(m.get(Qu,[],f.XFs.Self|f.XFs.Optional)));return{routes:v.map(Ky),injector:m}}),fo(()=>{this.childrenLoaders.delete(r)})),l=new co(a,()=>new zi.x).pipe(lo());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return po(t()).pipe((0,b.z)(r=>r instanceof f.YKP||Array.isArray(r)?dt(r):(0,yn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PT{}class QM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function OT(n){throw n}function FT(n,e,t){return e.parse("/")}const LT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function dm(){const n=(0,f.f3M)(Rf),e=(0,f.f3M)(Uf),t=(0,f.f3M)(Re),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),a=(0,f.f3M)(Qu,{optional:!0})??[],l=(0,f.f3M)(Yu,{optional:!0})??{},h=(0,f.f3M)(B0),m=(0,f.f3M)(cm,{optional:!0}),v=(0,f.f3M)(PT,{optional:!0}),D=(0,f.f3M)(NT,{optional:!0}),S=new Br(null,n,e,t,r,i,Ug(a));return v&&(S.urlHandlingStrategy=v),D&&(S.routeReuseStrategy=D),S.titleStrategy=m??h,function W0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let Br=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new zi.x,this.errorHandler=OT,this.malformedUriErrorHandler=FT,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>dt(void 0),this.urlHandlingStrategy=new QM,this.routeReuseStrategy=new YM,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(_c),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new Uy(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new y0(k)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const S=l.get(f.R0b);this.isNgZoneEnabled=S instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Bg(){return new $u(new rn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hy(this.currentUrlTree,this.rootComponentType),this.transitions=new kn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Di(i=>0!==i.id),(0,pt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),gr(i=>{let a=!1,l=!1;return dt(i).pipe((0,we.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gr(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return hm(h.source)&&(this.browserUrlTree=h.extractedUrl),dt(h).pipe(gr(S=>{const k=this.transitions.getValue();return r.next(new Of(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?qr.E:Promise.resolve(S)}),function ev(n,e,t,r){return gr(i=>function P0(n,e,t,r,i){return new O0(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,pt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,we.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function ST(n,e,t,r,i,a){return(0,b.z)(l=>function F0(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new L0(n,e,t,r,i,l,h,a).recognize().pipe(gr(m=>null===m?function nv(n){return new zr.y(e=>e.error(n))}(new bT):dt(m)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,pt.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,we.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(j,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new qD(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:j,source:Z,restoredState:fe,extras:Ce}=h,St=new Of(k,this.serializeUrl(j),Z,fe);r.next(St);const At=Hy(j,this.rootComponentType).snapshot;return dt(i={...h,targetSnapshot:At,urlAfterRedirects:j,extras:{...Ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),qr.E}),(0,we.b)(h=>{const m=new ZD(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,pt.U)(h=>i={...h,guards:GM(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function KM(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?dt({...t,guardsResult:!0}):function A0(n,e,t,r){return(0,yn.D)(n).pipe((0,b.z)(i=>function im(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(h=>{const m=Za(e)??i,v=pc(h,m);return po(function S0(n){return n&&gc(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Y())})).pipe(Gf()):dt(!0)}(i.component,i.route,t,e,r)),Y(i=>!0!==i,!0))}(l,r,i,n).pipe((0,b.z)(h=>h&&function Ka(n){return"boolean"==typeof n}(h)?function fT(n,e,t,r){return(0,yn.D)(e).pipe(ie(i=>ea(function gT(n,e){return null!==n&&e&&e(new YD(n)),dt(!0)}(i.route.parent,r),function pT(n,e){return null!==n&&e&&e(new v0(n)),dt(!0)}(i.route,r),function x0(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function zM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Fi(()=>dt(l.guards.map(m=>{const v=Za(l.node)??t,D=pc(m,v);return po(function T0(n){return n&&gc(n.canActivateChild)}(D)?D.canActivateChild(r,n):v.runInContext(()=>D(r,n))).pipe(Y())})).pipe(Gf())));return dt(a).pipe(Gf())}(n,i.path,t),function mT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>Fi(()=>{const l=Za(e)??t,h=pc(a,l);return po(function D0(n){return n&&gc(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Y())}));return dt(i).pipe(Gf())}(n,i.route,t))),Y(i=>!0!==i,!0))}(r,a,n,e):dt(h)),(0,pt.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,we.b)(h=>{if(i.guardsResult=h.guardsResult,O(h.guardsResult))throw em(0,h.guardsResult);const m=new KD(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Di(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),sv(h=>{if(h.guards.canActivateChecks.length)return dt(h).pipe((0,we.b)(m=>{const v=new _0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),gr(m=>{let v=!1;return dt(m).pipe(function AT(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,yn.D)(i).pipe(ie(l=>function V0(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!U0(i)&&(a[Zr]=i.title),function Hd(n,e,t,r){const i=function xT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return dt({});const a={};return(0,yn.D)(i).pipe((0,b.z)(l=>function RT(n,e,t,r){const i=Za(e)??r,a=pc(n,i);return po(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Y(),(0,we.b)(h=>{a[l]=h}))),Wt(1),function mr(n){return(0,pt.U)(()=>n)}(a),Ke(l=>Wf(l)?qr.E:uo(l)))}(a,n,e,r).pipe((0,pt.U)(l=>(n._resolvedData=l,n.data=Wy(n,t).resolve,i&&U0(i)&&(n.data[Zr]=i.title),null)))}(l.route,r,n,e)),(0,we.b)(()=>a++),Wt(1),(0,b.z)(l=>a===i.length?dt(t):qr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,we.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,we.b)(m=>{const v=new Vy(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),sv(h=>{const m=v=>{const D=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,we.b)(S=>{v.component=S}),(0,pt.U)(()=>{})));for(const S of v.children)D.push(...m(S));return D};return Lu(m(h.targetSnapshot.root)).pipe(T(),Ln(1))}),sv(()=>this.afterPreactivation()),(0,pt.U)(h=>{const m=function XD(n,e,t){const r=Ud(n,e._root,t?t._root:void 0);return new jy(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:m}}),(0,we.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new WM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,we.b)({next(){a=!0},complete(){a=!0}}),fo(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ke(h=>{if(l=!0,qu(h)){tm(h)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new Yg(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(m),tm(h)){const v=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hm(i.source)};this.scheduleNavigation(v,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new m0(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return qr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Ky),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,D=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Yt(v,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=O(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function VT(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...LT}:!1===r?{...H0}:r,O(t))return Ry(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Ry(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new dc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,m,v;l?(h=l.resolve,m=l.reject,v=l.promise):v=new Promise((k,j)=>{h=k,m=j});const D=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:D,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Yg(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return dm()},providedIn:"root"}),n})();function hm(n){return"imperative"!==n}let fm=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new zi.x,this.subscription=t.events.subscribe(a=>{a instanceof dc&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Br),f.Y36(za),f.Y36(ve))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class G0{}let $T=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Di(t=>t instanceof dc),ie(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,yn.D)(i).pipe((0,Jo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):dt(null);const a=i.pipe((0,b.z)(l=>null===l?dt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,yn.D)([a,l]).pipe((0,Jo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Br),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(G0),f.LFG(_c))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xu=new f.OlP("");let ra=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Of?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof dc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new zu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Kf(n,e){return{\u0275kind:n,\u0275providers:e}}function gm(n){return[{provide:Qu,multi:!0,useValue:n}]}function ov(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Br),i=n.get(HT);1===n.get(mm)&&r.initialNavigation(),n.get(q0,null,f.XFs.Optional)?.setUpPreloading(),n.get(Xu,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const HT=new f.OlP("",{factory:()=>new zi.x}),mm=new f.OlP("",{providedIn:"root",factory:()=>1});const q0=new f.OlP("");function go(n){return Kf(0,[{provide:q0,useExisting:$T},{provide:G0,useExisting:n}])}const Z0=new f.OlP("ROUTER_FORROOT_GUARD"),zT=[Re,{provide:Rf,useClass:Ba},{provide:Br,useFactory:dm},Uf,{provide:za,useFactory:function jT(n){return n.routerState.root},deps:[Br]},_c];function qT(){return new f.PXZ("Router",Br)}let _m=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[zT,[],gm(t),{provide:Z0,useFactory:Kt,deps:[[Br,new f.FiY,new f.tp0]]},{provide:Yu,useValue:r||{}},r?.useHash?{provide:ve,useClass:et}:{provide:ve,useClass:Qe},{provide:Xu,useFactory:()=>{const n=(0,f.f3M)(Br),e=(0,f.f3M)(pd),t=(0,f.f3M)(Yu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ra(n,e,t)}},r?.preloadingStrategy?go(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:qT},r?.initialNavigation?K0(r):[],[{provide:av,useFactory:ov},{provide:f.tb,multi:!0,useExisting:av}]]}}static forChild(t){return{ngModule:n,providers:[gm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Z0,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[nm]}),n})();function Kt(n){return"guarded"}function K0(n){return["disabled"===n.initialNavigation?Kf(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Br);return()=>{e.setUpLocationChangeListener()}}},{provide:mm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Kf(2,[{provide:mm,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Br),h=e.get(HT);(function i(a){e.get(Br).events.pipe(Di(h=>h instanceof dc||h instanceof Yg||h instanceof m0),(0,pt.U)(h=>h instanceof dc||h instanceof Yg&&(0===h.code||1===h.code)&&null),Di(h=>null!==h),Ln(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||h.closed?dt(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const av=new f.OlP("");var QT=F(4986),Jt=F(2122);function uv(){return(0,jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ir.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function XT(n,e){return n===e}var Dt,mo=F(2011),X0=(F(9568),F(3942)),ye=F(5861),Hn=F(9681),Wd=F(4859),Ls=F(1877),Q=F(2090),JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ju={},J0=J0||{},zt=JT||self;function Qf(){}function lv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cv="closure_uid_"+(1e9*Math.random()>>>0),eI=0;function ym(n,e,t){return n.call.apply(n.bind,arguments)}function eS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function fi(n,e,t){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ym:eS).apply(null,arguments)}function vm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function pi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function el(){this.s=this.s,this.o=this.o}el.prototype.s=!1,el.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Gd(n){Object.prototype.hasOwnProperty.call(n,cv)&&n[cv]||(n[cv]=++eI)}(this)},el.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function wm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function nI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(lv(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}gi.prototype.h=function(){this.defaultPrevented=!0};var rI=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",Qf,e),zt.removeEventListener("test",Qf,e)}catch{}return n}();function zd(n){return/^[\s\xa0]*$/.test(n)}var nS=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Jf(n,e){return n<e?-1:n>e?1:0}function Em(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function Ya(n){return-1!=Em().indexOf(n)}function tl(n){return tl[" "](n),n}tl[" "]=Qf;var qd,n,sI=Ya("Opera"),Qa=Ya("Trident")||Ya("MSIE"),Vs=Ya("Edge"),Im=Vs||Qa,oI=Ya("Gecko")&&!(-1!=Em().toLowerCase().indexOf("webkit")&&!Ya("Edge"))&&!(Ya("Trident")||Ya("MSIE"))&&!Ya("Edge"),dv=-1!=Em().toLowerCase().indexOf("webkit")&&!Ya("Edge");function ia(){var n=zt.document;return n?n.documentMode:void 0}e:{var Cm="",ep=(n=Em(),oI?/rv:([^\);]+)(\)|;)/.exec(n):Vs?/Edge\/([\d\.]+)/.exec(n):Qa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dv?/WebKit\/(\S+)/.exec(n):sI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ep&&(Cm=ep?ep[1]:""),Qa){var aI=ia();if(null!=aI&&aI>parseFloat(Cm)){qd=String(aI);break e}}qd=Cm}var uI={};var hv=zt.document&&Qa&&(ia()||parseInt(qd,10))||void 0;function vc(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(oI){e:{try{tl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vc.X.h.call(this)}}pi(vc,gi);var fv={2:"touch",3:"pen",4:"mouse"};vc.prototype.h=function(){vc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bm="closure_listenable_"+(1e6*Math.random()|0),rS=0;function iS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++rS,this.ba=this.ea=!1}function Dm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function pv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gv(n){const e={};for(const t in n)e[t]=n[t];return e}const sS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<sS.length;a++)t=sS[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function mv(n){this.src=n,this.g={},this.h=0}function Tm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=tI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Dm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}mv.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Sm(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new iS(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var _v="closure_lm_"+(1e6*Math.random()|0),np={};function oS(n,e,t,r,i){if(r&&r.once)return uS(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)oS(n,e[a],t,r,i);return null}return t=sa(t),n&&n[bm]?n.N(e,t,Xf(r)?!!r.capture:!!r,i):aS(n,e,t,!1,r,i)}function aS(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Xf(i)?!!i.capture:!!i,h=dI(n);if(h||(n[_v]=h=new mv(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function sN(){const e=oN;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)rI||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(cS(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uS(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)uS(n,e[a],t,r,i);return null}return t=sa(t),n&&n[bm]?n.O(e,t,Xf(r)?!!r.capture:!!r,i):aS(n,e,t,!0,r,i)}function lS(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)lS(n,e[a],t,r,i);else r=Xf(r)?!!r.capture:!!r,t=sa(t),n&&n[bm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sm(a=n.g[e],t,r,i))&&(Dm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=dI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sm(e,t,r,i)),(t=-1<n?e[n]:null)&&cI(t))}function cI(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[bm])Tm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(cS(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=dI(e))?(Tm(t,n),0==t.h&&(t.src=null,e[_v]=null)):Dm(n)}}}function cS(n){return n in np?np[n]:np[n]="on"+n}function oN(n,e){if(n.ba)n=!0;else{e=new vc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&cI(n),n=t.call(r,e)}return n}function dI(n){return(n=n[_v])instanceof mv?n:null}var hI="__closure_events_fn_"+(1e9*Math.random()>>>0);function sa(n){return"function"==typeof n?n:(n[hI]||(n[hI]=function(e){return n.handleEvent(e)}),n[hI])}function $r(){el.call(this),this.i=new mv(this),this.P=this,this.I=null}function mi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var i=e;lI(e=new gi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=rp(l,r,!0,e)&&i}if(i=rp(l=e.g=n,r,!0,e)&&i,i=rp(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=rp(l=e.g=t[a],r,!1,e)&&i}function rp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,m=l.ha||l.src;l.ea&&Tm(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}pi($r,el),$r.prototype[bm]=!0,$r.prototype.removeEventListener=function(n,e,t,r){lS(this,n,e,t,r)},$r.prototype.M=function(){if($r.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dm(t[r]);delete n.g[e],n.h--}}this.I=null},$r.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},$r.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ip=zt.JSON.stringify;function fI(){var n=yI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vv,pI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new nl,n=>n.reset());class nl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gI(n){zt.setTimeout(()=>{throw n},0)}function mI(n,e){vv||function _I(){var n=zt.Promise.resolve(void 0);vv=function(){n.then(Am)}}(),wv||(vv(),wv=!0),yI.add(n,e)}var wv=!1,yI=new class yv{constructor(){this.h=this.g=null}add(e,t){const r=pI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Am(){for(var n;n=fI();){try{n.h.call(n.g)}catch(t){gI(t)}var e=pI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wv=!1}function Xa(n,e){$r.call(this),this.h=n||1,this.g=e||zt,this.j=fi(this.lb,this),this.l=Date.now()}function sp(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function rl(n,e,t){if("function"==typeof n)t&&(n=fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function xm(n){n.g=rl(()=>{n.g=null,n.i&&(n.i=!1,xm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pi(Xa,$r),(Dt=Xa.prototype).ca=!1,Dt.R=null,Dt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),mi(this,"tick"),this.ca&&(sp(this),this.start()))}},Dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.M=function(){Xa.X.M.call(this),sp(this),delete this.g};class Rm extends el{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xm(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kd(n){el.call(this),this.h=n,this.g={}}pi(Kd,el);var Ev=[];function Mm(n,e,t,r){Array.isArray(t)||(t&&(Ev[0]=t.toString()),t=Ev);for(var i=0;i<t.length;i++){var a=oS(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Nm(n){pv(n.g,function(e,t){this.g.hasOwnProperty(t)&&cI(e)},n),n.g={}}function op(){this.g=!0}function ap(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return ip(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Kd.prototype.M=function(){Kd.X.M.call(this),Nm(this)},Kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},op.prototype.Aa=function(){this.g=!1},op.prototype.info=function(){};var wc={},Cv=null;function up(){return Cv=Cv||new $r}function wI(n){gi.call(this,wc.Pa,n)}function _i(n){const e=up();mi(e,new wI(e))}function bv(n,e){gi.call(this,wc.STAT_EVENT,n),this.stat=e}function Vi(n){const e=up();mi(e,new bv(e,n))}function fS(n,e){gi.call(this,wc.Qa,n),this.size=e}function lp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}wc.Pa="serverreachability",pi(wI,gi),wc.STAT_EVENT="statevent",pi(bv,gi),wc.Qa="timingevent",pi(fS,gi);var Yd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Tv(){}function II(){}Tv.prototype.h=null;var Av,Qd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Sv(){gi.call(this,"d")}function km(){gi.call(this,"c")}function Pm(){}function Xd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Kd(this),this.O=pS,this.T=new Xa(n=Im?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new xv}function xv(){this.i=null,this.g="",this.h=!1}pi(Sv,gi),pi(km,gi),pi(Pm,Tv),Pm.prototype.g=function(){return new XMLHttpRequest},Pm.prototype.i=function(){return{}},Av=new Pm;var pS=45e3,Us={},Jd={};function Rv(n,e,t){n.K=1,n.v=Ic(oa(e)),n.s=t,n.P=!0,CI(n,null)}function CI(n,e){n.F=Date.now(),cp(n),n.A=oa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),SI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new xv,n.g=qm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Rm(fi(n.La,n,n.g),n.N)),Mm(n.S,n.g,"readystatechange",n.ib),e=n.H?gv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),_i(),function Iv(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function gS(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Mv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=mS(n,t),i==Jd){4==e&&(n.o=4,Vi(14),r=!1),ap(n.j,n.m,null,"[Incomplete Response]");break}if(i==Us){n.o=4,Vi(15),ap(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ap(n.j,n.m,i,null),th(n,i)}gS(n)&&i!=Jd&&i!=Us&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),jv(e),e.K=!0,Vi(11))):(ap(n.j,n.m,t,"[Invalid Chunked Response]"),Ec(n),dp(n))}function mS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Jd:(t=Number(e.substring(t,r)),isNaN(t)?Us:(r+=1)+t>e.length?Jd:(e=e.substr(r,t),n.C=r+t,e))}function cp(n){n.V=Date.now()+n.O,bI(n,n.O)}function bI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lp(fi(n.gb,n),e)}function eh(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function dp(n){0==n.l.G||n.I||OI(n.l,n)}function Ec(n){eh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,sp(n.T),Nm(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function th(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||kv(t.h,n)))if(!n.J&&kv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;sh(t),vp(t)}$v(t),Vi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=lp(fi(t.cb,t),6e3));if(1>=xI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else aa(t,11)}else if((n.J||t.g==n)&&sh(t),!zd(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const D=v[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const k=v[5];null!=k&&"number"==typeof k&&0<k&&(t.J=r=1.5*k,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Z=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.h;a.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Pv(a,a.h),a.h=null))}if(r.D){const fe=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.za=fe,Cn(r.F,r.D,fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=FI(r,r.H?r.ka:null,r.V),l.J){RI(r.h,l);var h=l,m=r.J;m&&h.setTimeout(m),h.B&&(eh(h),cp(h)),r.g=l}else Bv(r);0<t.i.length&&wp(t)}else"stop"!=v[0]&&"close"!=v[0]||aa(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?aa(t,7):Wm(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}_i()}catch{}}function _S(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Om(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Nv(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Dt=Xd.prototype).setTimeout=function(n){this.O=n},Dt.ib=function(n){n=n.target;const e=this.L;e&&3==Qi(n)?e.l():this.La(n)},Dt.La=function(n){try{if(n==this.g)e:{const D=Qi(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>D)&&(3!=D||Im||this.g&&(this.h.h||this.g.fa()||xc(this.g)))){this.I||4!=D||7==e||_i(),eh(this);var t=this.g.aa();this.Y=t;t:if(gS(this)){var r=xc(this.g);n="";var i=r.length,a=4==Qi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ec(this),dp(this);var l="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function dS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zd(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Vi(12),Ec(this),dp(this);break e}ap(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,th(this,t)}this.P?(Mv(this,D,l),Im&&this.i&&3==D&&(Mm(this.S,this.T,"tick",this.hb),this.T.start())):(ap(this.j,this.m,l,null),th(this,l)),4==D&&Ec(this),this.i&&!this.I&&(4==D?OI(this.l,this):(this.i=!1,cp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Vi(12)):(this.o=0,Vi(13)),Ec(this),dp(this)}}}catch{}},Dt.hb=function(){if(this.g){var n=Qi(this.g),e=this.g.fa();this.C<e.length&&(eh(this),Mv(this,n,e),this.i&&4!=n&&cp(this))}},Dt.cancel=function(){this.I=!0,Ec(this)},Dt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function hS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_i(),Vi(17)),Ec(this),this.o=2,dp(this)):bI(this,this.V-n)};var Fm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function il(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof il){this.h=void 0!==e?e:n.h,hp(this,n.j),this.s=n.s,this.g=n.g,fp(this,n.m),this.l=n.l,e=n.i;var t=new gp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lm(this,t),this.o=n.o}else n&&(t=String(n).match(Fm))?(this.h=!!e,hp(this,t[1]||"",!0),this.s=sl(t[2]||""),this.g=sl(t[3]||"",!0),fp(this,t[4]),this.l=sl(t[5]||"",!0),Lm(this,t[6]||"",!0),this.o=sl(t[7]||"")):(this.h=!!e,this.i=new gp(null,this.h))}function oa(n){return new il(n)}function hp(n,e,t){n.j=t?sl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Lm(n,e,t){e instanceof gp?(n.i=e,function IS(n,e){e&&!n.j&&(Cc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(TI(this,r),SI(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ja(e,wS)),n.i=new gp(e,n.h))}function Cn(n,e,t){n.i.set(e,t)}function Ic(n){return Cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ja(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}il.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ja(e,Vm,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ja(e,Vm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ja(t,"/"==t.charAt(0)?vS:DI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ja(t,pp)),n.join("")};var Vm=/[#\/\?@]/g,DI=/[#\?:]/g,vS=/[#\?]/g,wS=/[#\?@]/g,pp=/#/g;function gp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cc(n){n.g||(n.g=new Map,n.h=0,n.i&&function aN(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function TI(n,e){Cc(n),e=nh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ES(n,e){return Cc(n),e=nh(n,e),n.g.has(e)}function SI(n,e,t){TI(n,e),0<t.length&&(n.i=null,n.g.set(nh(n,e),wm(t)),n.h+=t.length)}function nh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Um(n){this.l=n||CS,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ga&&zt.g.Ga()&&zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Dt=gp.prototype).add=function(n,e){Cc(this),this.i=null,n=nh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Dt.forEach=function(n,e){Cc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Dt.oa=function(){Cc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Dt.W=function(n){Cc(this);let e=[];if("string"==typeof n)ES(this,n)&&(e=e.concat(this.g.get(nh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Dt.set=function(n,e){return Cc(this),this.i=null,ES(this,n=nh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Dt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var CS=10;function Bm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xI(n){return n.h?1:n.g?n.g.size:0}function kv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Pv(n,e){n.g?n.g.add(e):n.h=e}function RI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function MI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return wm(n.i)}function Ov(){}function $m(){this.g=new Ov}function bc(n,e,t){const r=t||"";try{_S(n,function(i,a){let l=i;Xf(i)&&(l=ip(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ol(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function mp(n){this.l=n.ac||null,this.j=n.jb||!1}function jm(n,e){$r.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_p,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Um.prototype.cancel=function(){if(this.i=MI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ov.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},Ov.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},pi(mp,Tv),mp.prototype.g=function(){return new jm(this.l,this.j)},mp.prototype.i=function(n){return function(){return n}}({}),pi(jm,$r);var _p=0;function NI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Yi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,eu(n)}function eu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Dt=jm.prototype).open=function(n,e){if(this.readyState!=_p)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,eu(this)},Dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yi(this)),this.readyState=_p},Dt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,eu(this)),this.g&&(this.readyState=3,eu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Dt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yi(this):eu(this),3==this.readyState&&NI(this)}},Dt.Va=function(n){this.g&&(this.response=this.responseText=n,Yi(this))},Dt.Ua=function(n){this.g&&(this.response=n,Yi(this))},Dt.ga=function(){this.g&&Yi(this)},Dt.setRequestHeader=function(n,e){this.v.append(n,e)},Dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(jm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Si=zt.JSON.parse;function Vn(n){$r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yp,this.K=this.L=!1}pi(Vn,$r);var yp="",Bs=/^https?$/i,Fv=["POST","PUT"];function Dc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Tc(n),tu(n)}function Tc(n){n.D||(n.D=!0,mi(n,"complete"),mi(n,"error"))}function Sc(n){if(n.h&&typeof J0<"u"&&(!n.C[1]||4!=Qi(n)||2!=n.aa()))if(n.v&&4==Qi(n))rl(n.Ha,0,n);else if(mi(n,"readystatechange"),4==Qi(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Fm)[1]||null;if(!i&&zt.self&&zt.self.location){var a=zt.self.location.protocol;i=a.substr(0,a.length-1)}r=!Bs.test(i?i.toLowerCase():"")}t=r}if(t)mi(n,"complete"),mi(n,"success");else{n.m=6;try{var l=2<Qi(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Tc(n)}}finally{tu(n)}}}function tu(n,e){if(n.g){Ac(n);const t=n.g,r=n.C[0]?Qf:null;n.g=null,n.C=null,e||mi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Ac(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function Qi(n){return n.g?n.g.readyState:0}function xc(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case yp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Rc(n){let e="";return pv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Hm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Rc(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cn(n,e,t))}function ih(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Lv(n){this.Ca=0,this.i=[],this.j=new op,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ih("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ih("baseRetryDelayMs",5e3,n),this.bb=ih("retryDelaySeedMs",1e4,n),this.$a=ih("forwardChannelMaxRetries",2,n),this.ta=ih("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Um(n&&n.concurrentRequestLimit),this.Fa=new $m,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Wm(n){if(Vv(n),3==n.G){var e=n.U++,t=oa(n.F);Cn(t,"SID",n.I),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),Ep(n,t),(e=new Xd(n,n.j,e,void 0)).K=2,e.v=Ic(oa(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon&&(t=zt.navigator.sendBeacon(e.v.toString(),"")),!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qm(e.l,null),e.g.da(e.v)),e.F=Date.now(),cp(e)}zm(n)}function vp(n){n.g&&(jv(n),n.g.cancel(),n.g=null)}function Vv(n){vp(n),n.u&&(zt.clearTimeout(n.u),n.u=null),sh(n),n.h.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function wp(n){Bm(n.h)||n.m||(n.m=!0,mI(n.Ja,n),n.C=0)}function Uv(n,e){var t;t=e?e.m:n.U++;const r=oa(n.F);Cn(r,"SID",n.I),Cn(r,"RID",t),Cn(r,"AID",n.T),Ep(n,r),n.o&&n.s&&Hm(r,n.o,n.s),t=new Xd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=PI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Pv(n.h,t),Rv(t,r,e)}function Ep(n,e){n.ia&&pv(n.ia,function(t,r){Cn(e,r,t)}),n.l&&_S({},function(t,r){Cn(e,r,t)})}function PI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?fi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const D=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),h=!1;else try{bc(D,l,"req"+v+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Bv(n){n.g||n.u||(n.Z=1,mI(n.Ia,n),n.A=0)}function $v(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=lp(fi(n.Ia,n),Ip(n,n.A)),n.A++,0))}function jv(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function Gm(n){n.g=new Xd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=oa(n.sa);Cn(e,"RID","rpc"),Cn(e,"SID",n.I),Cn(e,"CI",n.L?"0":"1"),Cn(e,"AID",n.T),Cn(e,"TYPE","xmlhttp"),Ep(n,e),n.o&&n.s&&Hm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ic(oa(e)),t.s=null,t.P=!0,CI(t,n)}function sh(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function OI(n,e){var t=null;if(n.g==e){sh(n),jv(n),n.g=null;var r=2}else{if(!kv(n.h,e))return;t=e.D,RI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;mi(r=up(),new fS(r,t)),wp(n)}else Bv(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function kI(n,e){return!(xI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=lp(fi(n.Ja,n,e),Ip(n,n.C)),n.C++,0)))}(n,e)||2==r&&$v(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:aa(n,5);break;case 4:aa(n,10);break;case 3:aa(n,6);break;default:aa(n,2)}}function Ip(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function aa(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=fi(n.kb,n);t||(t=new il("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||hp(t,"https"),Ic(t)),function uN(n,e){const t=new op;if(zt.Image){const r=new Image;r.onload=vm(ol,t,r,"TestLoadImage: loaded",!0,e),r.onerror=vm(ol,t,r,"TestLoadImage: error",!1,e),r.onabort=vm(ol,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=vm(ol,t,r,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vi(2);n.G=0,n.l&&n.l.va(e),zm(n),Vv(n)}function zm(n){if(n.G=0,n.la=[],n.l){const e=MI(n.h);(0!=e.length||0!=n.i.length)&&(nI(n.la,e),nI(n.la,n.i),n.h.i.length=0,wm(n.i),n.i.length=0),n.l.ua()}}function FI(n,e,t){var r=t instanceof il?oa(t):new il(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),fp(r,r.m);else{var i=zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new il(null,void 0);r&&hp(a,r),e&&(a.g=e),i&&fp(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Cn(r,t,e),Cn(r,"VER",n.ma),Ep(n,r),r}function qm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vn(t&&n.Da&&!n.ra?new mp({jb:!0}):n.ra)).Ka(n.H),e}function Zm(){}function Cp(){if(Qa&&!(10<=Number(hv)))throw Error("Environmental error: no available transport.")}function Xi(n,e){$r.call(this),this.g=new Lv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!zd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mc(this)}function Km(n){Sv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Hv(){km.call(this),this.status=1}function Mc(n){this.g=n}(Dt=Vn.prototype).Ka=function(n){this.L=n},Dt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Av.g(),this.C=function EI(n){return n.h||(n.h=n.i())}(this.u?this.u:Av),this.g.onreadystatechange=fi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Dc(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=zt.FormData&&n instanceof zt.FormData,!(0<=tI(Fv,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ac(this),0<this.B&&((this.K=function rh(n){return Qa&&function iN(){return function iI(n){var e=uI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=nS(String(qd)).split("."),t=nS("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Jf(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Jf(0==i[2].length,0==a[2].length)||Jf(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.qa,this)):this.A=rl(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Dc(this,a)}},Dt.qa=function(){typeof J0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mi(this,"timeout"),this.abort(8))},Dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mi(this,"complete"),mi(this,"abort"),tu(this))},Dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tu(this,!0)),Vn.X.M.call(this)},Dt.Ha=function(){this.s||(this.F||this.v||this.l?Sc(this):this.fb())},Dt.fb=function(){Sc(this)},Dt.aa=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},Dt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Dt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Si(e)}},Dt.Ea=function(){return this.m},Dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dt=Lv.prototype).ma=8,Dt.G=1,Dt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Xd(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=gv(a),lI(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=PI(this,i,e),Cn(t=oa(this.F),"RID",n),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),Ep(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Rc(a)))+"&"+e:this.o&&Hm(t,this.o,a)),Pv(this.h,i),this.Ya&&Cn(t,"TYPE","init"),this.O?(Cn(t,"$req",e),Cn(t,"SID","null"),i.Z=!0,Rv(i,t,null)):Rv(i,t,e),this.G=2}}else 3==this.G&&(n?Uv(this,n):0==this.i.length||Bm(this.h)||Uv(this))},Dt.Ia=function(){if(this.u=null,Gm(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=lp(fi(this.eb,this),n)}},Dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vi(10),vp(this),Gm(this))},Dt.cb=function(){null!=this.v&&(this.v=null,vp(this),$v(this),Vi(19))},Dt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vi(2)):(this.j.info("Failed to ping google.com"),Vi(1))},(Dt=Zm.prototype).xa=function(){},Dt.wa=function(){},Dt.va=function(){},Dt.ua=function(){},Dt.Ra=function(){},Cp.prototype.g=function(n,e){return new Xi(n,e)},pi(Xi,$r),Xi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=FI(n,null,n.V),wp(n)},Xi.prototype.close=function(){Wm(this.g)},Xi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ip(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&wp(e)},Xi.prototype.M=function(){this.g.l=null,delete this.j,Wm(this.g),delete this.g,Xi.X.M.call(this)},pi(Km,Sv),pi(Hv,km),pi(Mc,Zm),Mc.prototype.xa=function(){mi(this.g,"a")},Mc.prototype.wa=function(n){mi(this.g,new Km(n))},Mc.prototype.va=function(n){mi(this.g,new Hv)},Mc.prototype.ua=function(){mi(this.g,"b")},Cp.prototype.createWebChannel=Cp.prototype.g,Xi.prototype.send=Xi.prototype.u,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,Yd.NO_ERROR=0,Yd.TIMEOUT=8,Yd.HTTP_ERROR=6,Dv.COMPLETE="complete",II.EventType=Qd,Qd.OPEN="a",Qd.CLOSE="b",Qd.ERROR="c",Qd.MESSAGE="d",$r.prototype.listen=$r.prototype.N,Vn.prototype.listenOnce=Vn.prototype.O,Vn.prototype.getLastError=Vn.prototype.Oa,Vn.prototype.getLastErrorCode=Vn.prototype.Ea,Vn.prototype.getStatus=Vn.prototype.aa,Vn.prototype.getResponseJson=Vn.prototype.Sa,Vn.prototype.getResponseText=Vn.prototype.fa,Vn.prototype.send=Vn.prototype.da,Vn.prototype.setWithCredentials=Vn.prototype.Ka;var Wv=Ju.createWebChannelTransport=function(){return new Cp},LI=Ju.getStatEventTarget=function(){return up()},Gv=Ju.ErrorCode=Yd,VI=Ju.EventType=Dv,UI=Ju.Event=wc,zv=Ju.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},BI=Ju.FetchXmlHttpFactory=mp,Ym=Ju.WebChannel=II,bS=Ju.XhrIo=Vn;const $I="@firebase/firestore";class jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jr.UNAUTHENTICATED=new jr(null),jr.GOOGLE_CREDENTIALS=new jr("google-credentials-uid"),jr.FIRST_PARTY=new jr("first-party-uid"),jr.MOCK_USER=new jr("mock-user");let al="9.17.1";const nu=new Ls.Yd("@firebase/firestore");function Qm(){return nu.logLevel}function $e(n,...e){if(nu.logLevel<=Ls.in.DEBUG){const t=e.map(Xm);nu.debug(`Firestore (${al}): ${n}`,...t)}}function br(n,...e){if(nu.logLevel<=Ls.in.ERROR){const t=e.map(Xm);nu.error(`Firestore (${al}): ${n}`,...t)}}function ul(n,...e){if(nu.logLevel<=Ls.in.WARN){const t=e.map(Xm);nu.warn(`Firestore (${al}): ${n}`,...t)}}function Xm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function Ct(n,e){n||at()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class on{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jr.UNAUTHENTICATED))}shutdown(){}}class SS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HI{constructor(e){this.t=e,this.currentUser=jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new on;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new on,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,ye.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new on)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new jr(e)}}class AS{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=jr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class WI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new AS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oh{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.A=t.token,new Zv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Kv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=xS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function Nc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function RS(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Qn(0,0))}static max(){return new Tt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ji{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ji.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends Ji{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const MS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Ji{construct(e,t,r){return new Tn(e,t,r)}static isValidIdentifier(e){return MS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ue(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ue(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ue(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ue(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(pn.fromString(e))}static fromName(e){return new Ge(pn.fromString(e).popFirst(5))}static empty(){return new Ge(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new pn(e.slice()))}}class es{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Jm(n){return n.fields.find(e=>2===e.kind)}function ll(n){return n.fields.filter(e=>2!==e.kind)}es.UNKNOWN_ID=-1;class e_{constructor(e,t){this.fieldPath=e,this.kind=t}}class bp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bp(0,_s.min())}}function t_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new _s(i,Ge.empty(),e)}function ah(n){return new _s(n.readTime,n.key,-1)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Tt.min(),Ge.empty(),-1)}static max(){return new _s(Tt.max(),Ge.empty(),-1)}}function n_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const GI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ru(n){return uh.apply(this,arguments)}function uh(){return uh=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==GI)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),uh.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(D=>{l[v]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Dp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new on,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new cl(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=r_(r.target.error);this.P.reject(new cl(e,i))}}static open(e,t,r,i){try{return new Dp(t,e.transaction(i,r))}catch(a){throw new cl(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zI(t)}}class $s{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===$s.D((0,Q.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),dl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Q.hl)())return!1;if($s.N())return!0;const e=(0,Q.z$)(),t=$s.D(e),r=0<t&&t<10,i=$s.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new cl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ue(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ue(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new cl(e,h))},a.onupgradeneeded=l=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const m=Dp.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(D=>(m.V(),D)).catch(D=>(m.abort(D),ue.reject(D))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,D="FirebaseError"!==v.name&&h<3;if($e("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qv{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return dl(this.q.delete())}}class cl extends Ue{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function iu(n){return"IndexedDbTransactionError"===n.name}class zI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dl(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),dl(this.store.add(e))}get(e){return dl(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),dl(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),dl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const l=r_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new Qv(h),v=t(h.primaryKey,h.value,m);if(v instanceof ue){const D=v.catch(S=>(m.done(),ue.reject(S)));r.push(D)}m.isDone?i():null===m.G?h.continue():h.continue(m.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function dl(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=r_(r.target.error);t(i)}})}let Xv=!1;function r_(n){const e=$s.D((0,Q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xv||(Xv=!0,setTimeout(()=>{throw r},0)),r}}return n}class qI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){iu(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ru(r)}yield t.nt(6e4)}))}}class ZI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return $e("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=ah(a);n_(l,r)>0&&(r=l)}),new _s(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ts=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class PS{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class hl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}function KI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tp(n){return null==n}function Sp(n){return 0===n&&1/n==-1/0}function QI(n){return"number"==typeof n&&Number.isInteger(n)&&!Sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Kr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kr.EMPTY_BYTE_STRING=new Kr("");const FS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fl(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=FS.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pc(n){return"string"==typeof n?Kr.fromBase64String(n):Kr.fromUint8Array(n)}function Jv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XI(n){const e=n.mapValue.fields.__previous_value__;return Jv(e)?XI(e):e}function Ap(n){const e=fl(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}const pl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xp={nullValue:"NULL_VALUE"};function gl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jv(n)?4:LS(n)?9007199254740991:10:at()}function _o(n,e){if(n===e)return!0;const t=gl(n);if(t!==gl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ap(n).isEqual(Ap(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=fl(r.timestampValue),l=fl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pc(n.bytesValue).isEqual(Pc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Dr(r.geoPointValue.latitude)===Dr(i.geoPointValue.latitude)&&Dr(r.geoPointValue.longitude)===Dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Dr(r.integerValue)===Dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Dr(r.doubleValue),l=Dr(i.doubleValue);return a===l?Sp(a)===Sp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Nc(n.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(KI(a)!==KI(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!_o(a[h],l[h])))return!1;return!0}(n,e);default:return at()}var i}function lh(n,e){return void 0!==(n.values||[]).find(t=>_o(t,e))}function su(n,e){if(n===e)return 0;const t=gl(n),r=gl(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Dr(i.integerValue||i.doubleValue),h=Dr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return ew(n.timestampValue,e.timestampValue);case 4:return ew(Ap(n),Ap(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Pc(i),h=Pc(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=qt(l[m],h[m]);if(0!==v)return v}return qt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=qt(Dr(i.latitude),Dr(a.latitude));return 0!==l?l:qt(Dr(i.longitude),Dr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=su(l[m],h[m]);if(v)return v}return qt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pl.mapValue&&a===pl.mapValue)return 0;if(i===pl.mapValue)return 1;if(a===pl.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=qt(h[D],v[D]);if(0!==S)return S;const k=su(l[h[D]],m[v[D]]);if(0!==k)return k}return qt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw at()}}function ew(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=fl(n),r=fl(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function Oc(n){return i_(n)}function i_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=fl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=i_(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${i_(r.fields[h])}`;return a+"}"}(n.mapValue):at();var e}function ml(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function s_(n){return!!n&&"integerValue"in n}function ch(n){return!!n&&"arrayValue"in n}function _l(n){return!!n&&"nullValue"in n}function JI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function o_(n){return!!n&&"mapValue"in n}function ua(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ua(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ua(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tw(n){return"nullValue"in n?xp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ml(hl.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function cN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ml(hl.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pl:at()}function nw(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rw(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fc{constructor(e,t){this.position=e,this.inclusive=t}}function Nt(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):su(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function eC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_o(n.position[t],e.position[t]))return!1;return!0}class tC{}class cn extends tC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new iC(e,t,r):"array-contains"===t?new VS(e,r):"in"===t?new aC(e,r):"not-in"===t?new US(e,r):"array-contains-any"===t?new Rp(e,r):new cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new sC(e,r):new oC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(su(t,this.value)):null!==t&&gl(this.value)===gl(t)&&this.matchesComparison(su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gn extends tC{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new gn(e,t)}matches(e){return dh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dh(n){return"and"===n.op}function hh(n){return"or"===n.op}function fh(n){return _r(n)&&dh(n)}function _r(n){for(const e of n.filters)if(e instanceof gn)return!1;return!0}function nC(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+Oc(n.value);if(fh(n))return n.filters.map(e=>nC(e)).join(",");{const e=n.filters.map(t=>nC(t)).join(",");return`${n.op}(${e})`}}function iw(n,e){return n instanceof cn?(t=n,(r=e)instanceof cn&&t.op===r.op&&t.field.isEqual(r.field)&&_o(t.value,r.value)):n instanceof gn?function(t,r){return r instanceof gn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&iw(a,r.filters[l]),!0)}(n,e):void at();var t,r}function sw(n,e){const t=n.filters.concat(e);return gn.create(t,n.op)}function rC(n){return n instanceof cn?`${(e=n).field.canonicalString()} ${e.op} ${Oc(e.value)}`:n instanceof gn?function(e){return e.op.toString()+" {"+e.getFilters().map(rC).join(" ,")+"}"}(n):"Filter";var e}class iC extends cn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class sC extends cn{constructor(e,t){super(e,"in",t),this.keys=ow(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oC extends cn{constructor(e,t){super(e,"not-in",t),this.keys=ow(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ow(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class VS extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&lh(t.arrayValue,this.value)}}class aC extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lh(this.value.arrayValue,t)}}class US extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lh(this.value.arrayValue,t)}}class Rp extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lh(this.value.arrayValue,r))}}class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function BS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Tr{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ni.RED,this.left=i??ni.EMPTY,this.right=a??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ni(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aw(this.data.getIterator())}getIteratorFrom(e){return new aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gh(n){return n.hasNext()?n.getNext():void 0}class ri{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new ri([])}unionWith(e){let t=new Pn(Tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ri(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kr{constructor(e){this.value=e}static empty(){return new kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!o_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=ua(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());o_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];o_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new kr(ua(this.value))}}function uC(n){const e=[];return kc(n.fields,(t,r)=>{const i=new Tn([t]);if(o_(r)){const a=uC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new ri(e)}class Xn{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Xn(e,0,Tt.min(),Tt.min(),Tt.min(),kr.empty(),0)}static newFoundDocument(e,t,r,i){return new Xn(e,1,t,Tt.min(),r,i,0)}static newNoDocument(e,t){return new Xn(e,2,t,Tt.min(),Tt.min(),kr.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,Tt.min(),Tt.min(),kr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $S{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ft=null}}function a_(n,e=null,t=[],r=[],i=null,a=null,l=null){return new $S(n,e,t,r,i,a,l)}function yl(n){const e=Ye(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oc(r)).join(",")),e.ft=t}return e.ft}function mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eC(n.startAt,e.startAt)&&eC(n.endAt,e.endAt)}function u_(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Mp(n,e){return n.filters.filter(t=>t instanceof cn&&t.field.isEqual(e))}function lC(n,e,t){let r=xp,i=!0;for(const a of Mp(n,e)){let l=xp,h=!0;switch(a.op){case"<":case"<=":l=tw(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=xp}nw({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];nw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function cC(n,e,t){let r=pl,i=!0;for(const a of Mp(n,e)){let l=pl,h=!0;switch(a.op){case">=":case">":l=cN(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=pl}rw({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];rw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class vl{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.dt=null,this._t=null}}function jS(n,e,t,r,i,a,l,h){return new vl(n,e,t,r,i,a,l,h)}function Np(n){return new vl(n)}function HS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function l_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vc(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function uw(n){return null!==n.collectionGroup}function Uc(n){const e=Ye(n);if(null===e.dt){e.dt=[];const t=Vc(e),r=l_(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ph(t)),e.dt.push(new ph(Tn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ph(Tn.keyField(),a))}}}return e.dt}function Ai(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=a_(e.path,e.collectionGroup,Uc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Uc(e))t.push(new ph(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Fc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Fc(e.startAt.position,e.startAt.inclusive):null;e._t=a_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Bc(n,e){e.getFirstInequalityField(),Vc(n);const t=n.filters.concat([e]);return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function c_(n,e,t){return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kp(n,e){return mh(Ai(n),Ai(e))&&n.limitType===e.limitType}function dC(n){return`${yl(Ai(n))}|lt:${n.limitType}`}function lw(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>rC(r)).join(", ")}]`),Tp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oc(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oc(r)).join(",")),`Target(${t})`}(Ai(n))}; limitType=${n.limitType})`}function Pp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Uc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=Nt(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Uc(t),r)||t.endAt&&!function(i,a,l){const h=Nt(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Uc(t),r)));var t,r}function cw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hC(n){return(e,t)=>{let r=!1;for(const i of Uc(n)){const a=WS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function WS(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?su(h,m):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function _h(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sp(e)?"-0":e}}function fC(n){return{integerValue:""+n}}function dw(n,e){return QI(e)?fC(e):_h(n,e)}class d_{constructor(){this._=void 0}}function pC(n,e,t){return n instanceof yh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof ou?gC(n,e):n instanceof wl?fw(n,e):function(r,i){const a=hw(r,i),l=mC(a)+mC(r.gt);return s_(a)&&s_(r.gt)?fC(l):_h(r.yt,l)}(n,e)}function GS(n,e,t){return n instanceof ou?gC(n,e):n instanceof wl?fw(n,e):t}function hw(n,e){return n instanceof vh?s_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yh extends d_{}class ou extends d_{constructor(e){super(),this.elements=e}}function gC(n,e){const t=_C(e);for(const r of n.elements)t.some(i=>_o(i,r))||t.push(r);return{arrayValue:{values:t}}}class wl extends d_{constructor(e){super(),this.elements=e}}function fw(n,e){let t=_C(e);for(const r of n.elements)t=t.filter(i=>!_o(i,r));return{arrayValue:{values:t}}}class vh extends d_{constructor(e,t){super(),this.yt=e,this.gt=t}}function mC(n){return Dr(n.integerValue||n.doubleValue)}function _C(n){return ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $c{constructor(e,t){this.field=e,this.transform=t}}class yC{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function h_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class f_{}function vC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new wh(n.key,ir.none()):new jc(n.key,n.data,ir.none());{const t=n.data,r=kr.empty();let i=new Pn(Tn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new la(n.key,r,new ri(i.toArray()),ir.none())}}function qS(n,e,t){n instanceof jc?function(r,i,a){const l=r.value.clone(),h=IC(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof la?function(r,i,a){if(!h_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=IC(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(EC(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Op(n,e,t,r){return n instanceof jc?function(i,a,l,h){if(!h_(i.precondition,a))return l;const m=i.value.clone(),v=pw(i.fieldTransforms,h,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof la?function(i,a,l,h){if(!h_(i.precondition,a))return l;const m=pw(i.fieldTransforms,h,a),v=a.data;return v.setAll(EC(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,h_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function ZS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=hw(r.transform,i||null);null!=a&&(null===t&&(t=kr.empty()),t.set(r.field,a))}return t||null}function wC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nc(t,r,(i,a)=>function zS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ou&&r instanceof ou||t instanceof wl&&r instanceof wl?Nc(t.elements,r.elements,_o):t instanceof vh&&r instanceof vh?_o(t.gt,r.gt):t instanceof yh&&r instanceof yh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jc extends f_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class la extends f_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function EC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IC(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,GS(l,h,t[i]))}return r}function pw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,pC(a,l,e))}return r}class wh extends f_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gw extends f_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KS{constructor(e){this.count=e}}var Sr,dn;function mw(n){switch(n){default:return at();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function p_(n){if(void 0===n)return br("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Sr.OK:return ce.OK;case Sr.CANCELLED:return ce.CANCELLED;case Sr.UNKNOWN:return ce.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return ce.INTERNAL;case Sr.UNAVAILABLE:return ce.UNAVAILABLE;case Sr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Sr.NOT_FOUND:return ce.NOT_FOUND;case Sr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Sr.ABORTED:return ce.ABORTED;case Sr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Sr.DATA_LOSS:return ce.DATA_LOSS;default:return at()}}(dn=Sr||(Sr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class El{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return YI(this.inner)}size(){return this.innerSize}}const YS=new Tr(Ge.comparator);function xi(){return YS}const CC=new Tr(Ge.comparator);function Eh(...n){let e=CC;for(const t of n)e=e.insert(t.key,t);return e}function Hc(n){let e=CC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yo(){return g_()}function bC(){return g_()}function g_(){return new El(n=>n.toString(),(n,e)=>n.isEqual(e))}const DC=new Tr(Ge.comparator),_w=new Pn(Ge.comparator);function Qt(...n){let e=_w;for(const t of n)e=e.add(t);return e}const yw=new Pn(qt);function m_(){return yw}class Ih{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ih(Tt.min(),i,m_(),xi(),Qt())}}class Wc{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wc(r,t,Qt(),Qt(),Qt())}}class Fp{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class vw{constructor(e,t){this.targetId=e,this.Et=t}}class ww{constructor(e,t,r=Kr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ew{constructor(){this.At=0,this.Rt=SC(),this.bt=Kr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Qt(),t=Qt(),r=Qt();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new Wc(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=SC()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class QS{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=xi(),this.qt=TC(),this.Ut=new Pn(qt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(u_(a))if(0===r){const l=new Ge(a.path);this.Qt(t,l,Xn.newNoDocument(l,Tt.min()))}else Ct(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const h=this.Yt(l);if(h){if(a.current&&u_(h.target)){const m=new Ge(h.target.path);null!==this.Lt.get(m)||this.te(l,m)||this.Qt(l,m,Xn.newNoDocument(m,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=Qt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new Ih(e,t,this.Ut,this.Lt,r);return this.Lt=xi(),this.qt=TC(),this.Ut=new Pn(qt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Ew,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Pn(qt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Ew),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function TC(){return new Tr(Ge.comparator)}function SC(){return new Tr(Ge.comparator)}const XS={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dN={and:"AND",or:"OR"};class xC{constructor(e,t){this.databaseId=e,this.wt=t}}function Ch(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(n,e){return n.wt?e.toBase64():e.toUint8Array()}function hN(n,e){return Ch(n,e.toTimestamp())}function Hr(n){return Ct(!!n),Tt.fromTimestamp(function(e){const t=fl(e);return new Qn(t.seconds,t.nanos)}(n))}function Iw(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function MC(n){const e=pn.fromString(n);return Ct(UC(e)),e}function Lp(n,e){return Iw(n.databaseId,e.path)}function ca(n,e){const t=MC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(kC(t))}function Cw(n,e){return Iw(n.databaseId,e)}function NC(n){const e=MC(n);return 4===e.length?pn.emptyPath():kC(e)}function Vp(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kC(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function PC(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function OC(n,e,t){const r=ca(n,e.name),i=Hr(e.updateTime),a=e.createTime?Hr(e.createTime):Tt.min(),l=new kr({mapValue:{fields:e.fields}}),h=Xn.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function au(n,e){let t;if(e instanceof jc)t={update:PC(n,e.key,e.value)};else if(e instanceof wh)t={delete:Lp(n,e.key)};else if(e instanceof la)t={update:PC(n,e.key,e.data),updateMask:Up(e.fieldMask)};else{if(!(e instanceof gw))return at();t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof yh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ou)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vh)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hN(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function __(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(Hr(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),h=new yh):"appendMissingElements"in l?h=new ou(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new wl(l.removeAllFromArray.values||[]):"increment"in l?h=new vh(a,l.increment):at();const m=Tn.fromServerFormat(l.fieldPath);return new $c(m,h)}(n,i)):[];var i;if(e.update){const i=ca(n,e.update.name),a=new kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ri((e.updateMask.fieldPaths||[]).map(v=>Tn.fromServerFormat(v)));return new la(i,a,l,t,r)}return new jc(i,a,t,r)}if(e.delete){const i=ca(n,e.delete);return new wh(i,t)}if(e.verify){const i=ca(n,e.verify);return new gw(i,t)}return at()}function bw(n,e){return{documents:[Cw(n,e.path)]}}function y_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Cw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return VC(gn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:bh((D=v).field),direction:fN(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.wt||Tp(v)?v:{value:v});var v,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Dw(n){let e=NC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const S=LC(D);return S instanceof gn&&fh(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new ph(Dh((S=D).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Tp(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new Fc((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new Fc(D.values||[],!D.before)}(t.endAt)),jS(e,i,l,a,h,"F",m,v)}function LC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Dh(e.unaryFilter.field);return cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Dh(e.unaryFilter.field);return cn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dh(e.unaryFilter.field);return cn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Dh(e.unaryFilter.field);return cn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?cn.create(Dh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return gn.create(e.compositeFilter.filters.map(t=>LC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function fN(n){return XS[n]}function nA(n){return AC[n]}function rA(n){return dN[n]}function bh(n){return{fieldPath:n.canonicalString()}}function Dh(n){return Tn.fromServerFormat(n.fieldPath)}function VC(n){return n instanceof cn?function(e){if("=="===e.op){if(JI(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NAN"}};if(_l(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(JI(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NAN"}};if(_l(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(e.field),op:nA(e.op),value:e.value}}}(n):n instanceof gn?function(e){const t=e.getFilters().map(r=>VC(r));return 1===t.length?t[0]:{compositeFilter:{op:rA(e.op),filters:t}}}(n):at()}function Up(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BC(e)),e=da(n.get(t),e);return BC(e)}function da(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function BC(n){return n+"\x01\x01"}function js(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:at()}a=l+2}return new pn(r)}const Th=["userId","batchId"];function v_(n,e){return[n,yi(e)]}function $C(n,e,t){return[n,yi(e),t]}const iA={},w_=["prefixPath","collectionGroup","readTime","documentId"],E_=["prefixPath","collectionGroup","documentId"],sA=["collectionGroup","readTime","prefixPath","documentId"],oA=["canonicalId","targetId"],jC=["targetId","path"],HC=["path","targetId"],Tw=["collectionId","parent"],WC=["indexId","uid"],aA=["uid","sequenceNumber"],uA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pN=["indexId","uid","orderedDocumentKey"],Sw=["userId","collectionPath","documentId"],Aw=["userId","collectionPath","largestBatchId"],GC=["userId","collectionGroup","largestBatchId"],I_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xw=[...I_,"documentOverlays"],zC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qC=zC,lA=[...qC,"indexConfiguration","indexState","indexEntries"];class Rw extends Yv{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=Ye(n);return $s.M(t.se,e)}class Bp{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&qS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Op(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Op(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bC();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const m=vC(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Nc(this.mutations,e.mutations,(t,r)=>wC(t,r))&&Nc(this.baseMutations,e.baseMutations,(t,r)=>wC(t,r))}}class C_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=DC;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new C_(e,t,r,i)}}class Mw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uu{constructor(e,t,r,i,a=Tt.min(),l=Tt.min(),h=Kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new uu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Nw{constructor(e){this.ie=e}}function kw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$p(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Lp(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ch(i,a.version.toTimestamp()),createTime:Ch(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gc(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Gc(e.version)}}var i,a;return r}function $p(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Il(n){const e=new Qn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function zc(n,e){const t=(e.baseMutations||[]).map(a=>__(n.ie,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>__(n.ie,a)),i=Qn.fromMillis(e.localWriteTimeMs);return new Bp(e.batchId,i,t,r)}function Qr(n){const e=Il(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Il(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=Ai(Np(NC(i.documents[0])))):r=Ai(Dw(n.query)),new uu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Kr.fromBase64String(n.resumeToken))}function qc(n,e){const t=Gc(e.snapshotVersion),r=Gc(e.lastLimboFreeSnapshotVersion);let i;i=u_(e.target)?bw(n.ie,e.target):y_(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Pw(n){const e=Dw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?c_(e,e.limit,"L"):e}function Ow(n,e){return new Mw(e.largestBatchId,__(n.ie,e.overlayMutation))}function dA(n,e){const t=e.path.lastSegment();return[n,yi(e.path.popLast()),t]}function hA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gc(r.readTime),documentKey:yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class ZC{getBundleMetadata(e,t){return Fw(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Il(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Fw(e).put({bundleId:(r=t).id,createTime:Gc(Hr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Sh(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Pw(i.bundledQuery),readTime:Il(i.readTime)};var i})}saveNamedQuery(e,t){return Sh(e).put({name:(r=t).name,readTime:Gc(Hr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Fw(n){return Yr(n,"bundles")}function Sh(n){return Yr(n,"namedQueries")}class b_{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new b_(e,t.uid||"")}getOverlay(e,t){return Zc(e).get(dA(this.userId,t)).next(r=>r?Ow(this.yt,r):null)}getOverlays(e,t){const r=yo();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Mw(t,l);i.push(this.oe(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(yi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Zc(e).Y("collectionPathOverlayIndex",h))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=yo(),a=yi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Zc(e).W("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const v=Ow(this.yt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=yo();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zc(e).Z({index:"collectionGroupOverlayIndex",range:h},(m,v,D)=>{const S=Ow(this.yt,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}oe(e,t){return Zc(e).put(function(r,i,a){const[l,h,m]=dA(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:au(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function Zc(n){return Yr(n,"documentOverlays")}class Kc{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Dr(e.integerValue));else if("doubleValue"in e){const r=Dr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Sp(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Pc(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?LS(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):at()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Ge.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function KC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function YC(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=KC(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Kc.Ie=new Kc;class fA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=YC(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=YC(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class pA{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Lw{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Ah{constructor(){this.$e=new fA,this.Be=new pA(this.$e),this.Le=new Lw(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Cl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cl(this.indexId,this.documentKey,this.arrayValue,r)}}function vo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=D_(n.arrayValue,e.arrayValue),0!==t?t:(t=D_(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function D_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class gN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Ct(e.collectionGroup===this.collectionId);const t=Jm(e);if(void 0!==t&&!this.We(t))return!1;const r=ll(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ke.length||!this.He(this.Ke[a++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vw(n){var e,t;if(Ct(n instanceof cn||n instanceof gn),n instanceof cn){if(n instanceof aC){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>cn.create(n.field,"==",a)))||[];return gn.create(i,"or")}return n}const r=n.filters.map(i=>Vw(i));return gn.create(r,n.op)}function gA(n){if(0===n.getFilters().length)return[];const e=S_(Vw(n));return Ct(QC(e)),T_(e)||bl(e)?[e]:e.getFilters()}function T_(n){return n instanceof cn}function bl(n){return n instanceof gn&&fh(n)}function QC(n){return T_(n)||bl(n)||function(e){if(e instanceof gn&&hh(e)){for(const t of e.getFilters())if(!T_(t)&&!bl(t))return!1;return!0}return!1}(n)}function S_(n){if(Ct(n instanceof cn||n instanceof gn),n instanceof cn)return n;if(1===n.filters.length)return S_(n.filters[0]);const e=n.filters.map(r=>S_(r));let t=gn.create(e,n.op);return t=A_(t),QC(t)?t:(Ct(t instanceof gn),Ct(dh(t)),Ct(t.filters.length>1),t.filters.reduce((r,i)=>jp(r,i)))}function jp(n,e){let t;return Ct(n instanceof cn||n instanceof gn),Ct(e instanceof cn||e instanceof gn),t=n instanceof cn?e instanceof cn?gn.create([n,e],"and"):mA(n,e):e instanceof cn?mA(e,n):function(r,i){if(Ct(r.filters.length>0&&i.filters.length>0),dh(r)&&dh(i))return sw(r,i.getFilters());const a=hh(r)?r:i,l=hh(r)?i:r,h=a.filters.map(m=>jp(m,l));return gn.create(h,"or")}(n,e),A_(t)}function mA(n,e){if(dh(e))return sw(e,n.getFilters());{const t=e.filters.map(r=>jp(n,r));return gn.create(t,"or")}}function A_(n){if(Ct(n instanceof cn||n instanceof gn),n instanceof cn)return n;const e=n.getFilters();if(1===e.length)return A_(e[0]);if(_r(n))return n;const t=e.map(i=>A_(i)),r=[];return t.forEach(i=>{i instanceof cn?r.push(i):i instanceof gn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:gn.create(r,n.op)}class mN{constructor(){this.Je=new Uw}addToCollectionParentIndex(e,t){return this.Je.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(_s.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class Uw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(pn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(pn.comparator)).toArray()}}const x_=new Uint8Array(0);class _A{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Uw,this.Xe=new El(r=>yl(r),(r,i)=>mh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:yi(i)};return Bw(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[RS(t),""],!1,!0);return Bw(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(js(l.parent))}return r})}addFieldIndex(e,t){const r=R_(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Rh(e);return a.next(h=>{l.put(hA(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=R_(e),i=Rh(e),a=xh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xh(e);let i=!0;const a=new Map;return ue.forEach(this.Ze(t),l=>this.tn(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Qt();const h=[];return ue.forEach(a,(m,v)=>{var D;$e("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${yl(t)}`);const S=function(ht,gt){const Lt=Jm(gt);if(void 0===Lt)return null;for(const Zt of Mp(ht,Lt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(v,m),k=function(ht,gt){const Lt=new Map;for(const Zt of ll(gt))for(const Fr of Mp(ht,Zt.fieldPath))switch(Fr.op){case"==":case"in":Lt.set(Zt.fieldPath.canonicalString(),Fr.value);break;case"not-in":case"!=":return Lt.set(Zt.fieldPath.canonicalString(),Fr.value),Array.from(Lt.values())}return null}(v,m),j=function(ht,gt){const Lt=[];let Zt=!0;for(const Fr of ll(gt)){const vu=0===Fr.kind?lC(ht,Fr.fieldPath,ht.startAt):cC(ht,Fr.fieldPath,ht.startAt);Lt.push(vu.value),Zt&&(Zt=vu.inclusive)}return new Fc(Lt,Zt)}(v,m),Z=function(ht,gt){const Lt=[];let Zt=!0;for(const Fr of ll(gt)){const vu=0===Fr.kind?cC(ht,Fr.fieldPath,ht.endAt):lC(ht,Fr.fieldPath,ht.endAt);Lt.push(vu.value),Zt&&(Zt=vu.inclusive)}return new Fc(Lt,Zt)}(v,m),fe=this.en(m,v,j),Ce=this.en(m,v,Z),St=this.nn(m,v,k),At=this.sn(m.indexId,S,fe,j.inclusive,Ce,Z.inclusive,St);return ue.forEach(At,ht=>r.J(ht,t.limit).next(gt=>{gt.forEach(Lt=>{const Zt=Ge.fromSegments(Lt.documentKey);l.has(Zt)||(l=l.add(Zt),h.push(Zt))})}))}).next(()=>h)}return ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:gA(gn.create(e.filters,"and")).map(r=>a_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const k=t?this.rn(t[S/v]):x_,j=this.on(e,k,r[S%v],i),Z=this.un(e,k,a[S%v],l),fe=h.map(Ce=>this.on(e,k,Ce,!0));D.push(...this.createRange(j,Z,fe))}return D}on(e,t,r,i){const a=new Cl(e,Ge.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Cl(e,Ge.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new gN(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.je(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ue.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let m=new Pn(Tn.comparator),v=!1;for(const D of h.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const D of h.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new Ah;for(const i of ll(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Kc.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new Ah;return Kc.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Ah;return Kc.Ie.ue(ml(this.databaseId,t),r.qe(function(i){const a=ll(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new Ah);let a=0;for(const l of ll(e)){const h=r[a++];for(const m of i)if(this.hn(t,l.fieldPath)&&ch(h))i=this.ln(i,l,h);else{const v=m.qe(l.kind);Kc.Ie.ue(h,v)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new Ah;m.seed(h.Fe()),Kc.Ie.ue(l,m.qe(t.kind)),a.push(m)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof cn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=R_(e),i=Rh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ue.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,D){const S=D?new bp(D.sequenceNumber,new _s(Il(D.readTime),new Ge(js(D.documentKey)),D.largestBatchId)):bp.empty(),k=v.fields.map(([j,Z])=>new e_(Tn.fromServerFormat(j),Z));return new es(v.indexId,v.collectionGroup,k,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=R_(e),a=Rh(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,m=>a.put(hA(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,m=>this._n(e,i,m).next(v=>{const D=this.wn(a,m);return v.isEqual(D)?ue.resolve():this.mn(e,a,m,v,D)}))))})}gn(e,t,r,i){return xh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return xh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=xh(e);let a=new Pn(vo);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,h)=>{a=a.add(new Cl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}wn(e,t){let r=new Pn(vo);const i=this.cn(t,e);if(null==i)return r;const a=Jm(t);if(null!=a){const l=e.data.field(a.fieldPath);if(ch(l))for(const h of l.arrayValue.values||[])r=r.add(new Cl(t.indexId,e.key,this.rn(h),i))}else r=r.add(new Cl(t.indexId,e.key,x_,i));return r}mn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,v,D,S){const k=h.getIterator(),j=m.getIterator();let Z=gh(k),fe=gh(j);for(;Z||fe;){let Ce=!1,St=!1;if(Z&&fe){const At=v(Z,fe);At<0?St=!0:At>0&&(Ce=!0)}else null!=Z?St=!0:Ce=!0;Ce?(D(fe),fe=gh(j)):St?(S(Z),Z=gh(k)):(Z=gh(k),fe=gh(j))}}(i,a,vo,h=>{l.push(this.gn(e,t,r,h))},h=>{l.push(this.yn(e,t,r,h))}),ue.waitFor(l)}dn(e){let t=1;return Rh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>vo(l,h)).filter((l,h,m)=>!h||0!==vo(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=vo(l,e),m=vo(l,t);if(0===h)i[0]=e.Ue();else if(h>0&&m<0)i.push(l),i.push(l.Ue());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,x_,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,x_,[]]))}return a}pn(e,t){return vo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($w)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||at())).next($w)}}function Bw(n){return Yr(n,"collectionParents")}function xh(n){return Yr(n,"indexEntries")}function R_(n){return Yr(n,"indexConfiguration")}function Rh(n){return Yr(n,"indexState")}function $w(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;n_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _s(e.readTime,e.documentKey,t)}const XC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jw(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.Z({range:l},(D,S,k)=>(h++,k.delete()));a.push(m.next(()=>{Ct(1===h)}));const v=[];for(const D of t.mutations){const S=$C(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return ue.waitFor(a).next(()=>v)}function M_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class Hp{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Hp(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Yc(e),l=lu(e);return l.add({}).next(h=>{Ct("number"==typeof h);const m=new Bp(h,t,r,i),v=function(k,j,Z){const fe=Z.baseMutations.map(St=>au(k.ie,St)),Ce=Z.mutations.map(St=>au(k.ie,St));return{userId:j,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:fe,mutations:Ce}}(this.yt,this.userId,m),D=[];let S=new Pn((k,j)=>qt(k.canonicalString(),j.canonicalString()));for(const k of i){const j=$C(this.userId,k.key.path,h);S=S.add(k.key.path.popLast()),D.push(l.put(v)),D.push(a.put(j,iA))}return S.forEach(k=>{D.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.In[h]=m.keys()}),ue.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return lu(e).get(t).next(r=>r?(Ct(r.userId===this.userId),zc(this.yt,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return lu(e).Z({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(Ct(h.batchId>=r),a=zc(this.yt,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).W("userMutationsIndex",t).next(r=>r.map(i=>zc(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=v_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Yc(e).Z({range:i},(l,h,m)=>{const[v,D,S]=l,k=js(D);if(v===this.userId&&t.path.isEqual(k))return lu(e).get(S).next(j=>{if(!j)throw at();Ct(j.userId===this.userId),a.push(zc(this.yt,j))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(qt);const i=[];return t.forEach(a=>{const l=v_(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=Yc(e).Z({range:h},(v,D,S)=>{const[k,j,Z]=v,fe=js(j);k===this.userId&&a.path.isEqual(fe)?r=r.add(Z):S.done()});i.push(m)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=v_(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Pn(qt);return Yc(e).Z({range:l},(m,v,D)=>{const[S,k,j]=m,Z=js(k);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(j)):D.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(lu(e).get(a).next(l=>{if(null===l)throw at();Ct(l.userId===this.userId),r.push(zc(this.yt,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return jw(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Yc(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=js(a[1]);i.push(m)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return Hw(e,this.userId,t)}Rn(e){return JC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hw(n,e,t){const r=v_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Yc(n).Z({range:a,X:!0},(h,m,v)=>{const[D,S,k]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function lu(n){return Yr(n,"mutations")}function Yc(n){return Yr(n,"documentMutations")}function JC(n){return Yr(n,"mutationQueues")}class Qc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Qc(0)}static vn(){return new Qc(-1)}}class _N{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Qc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Tt.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Xc(e).Z((l,h)=>{const m=Qr(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Xc(e).Z((r,i)=>{const a=Qr(i);t(a)})}Vn(e){return yA(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Sn(e,t){return yA(e).put("targetGlobalKey",t)}Dn(e,t){return Xc(e).put(qc(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Xc(e).Z({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const v=Qr(h);mh(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Jc(e);return t.forEach(l=>{const h=yi(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Jc(e);return ue.forEach(t,a=>{const l=yi(a.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Jc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Jc(e);let a=Qt();return i.Z({range:r,X:!0},(l,h,m)=>{const v=js(l[1]),D=new Ge(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=yi(t.path),i=IDBKeyRange.bound([r],[RS(r)],!1,!0);let a=0;return Jc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return Xc(e).get(t).next(r=>r?Qr(r):null)}}function Xc(n){return Yr(n,"targets")}function yA(n){return Yr(n,"targetGlobal")}function Jc(n){return Yr(n,"targetDocuments")}function vA([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class yN{constructor(e){this.xn=e,this.buffer=new Pn(vA),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){iu(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ru(r)}yield t.Fn(3e5)}))}}class wN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(ts.at);const r=new yN(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(XC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XC):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,h,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Qm()<=Ls.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class EN{constructor(e,t){this.db=e,this.garbageCollector=new wN(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Ww(e,r)}removeReference(e,t,r){return Ww(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ww(e,t)}Gn(e,t){return function(r,i){let a=!1;return JC(r).tt(l=>Hw(r,l,i).next(h=>(h&&(a=!0),ue.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Tt.min()),Jc(e).delete([0,yi(l.path)])))});i.push(m)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ww(e,t)}Kn(e,t){const r=Jc(e);let i,a=ts.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==ts.at&&t(new Ge(js(i)),a),a=v,i=m):a=ts.at}).next(()=>{a!==ts.at&&t(new Ge(js(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ww(n,e){return Jc(n).put((r=n.currentSequenceNumber,{targetId:0,path:yi(e.path),sequenceNumber:r}));var r}class Wp{constructor(){this.changes=new El(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IN{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Dl(e).put(r)}removeEntry(e,t,r){return Dl(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],$p(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Xn.newInvalidDocument(t);return Dl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(k_(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Xn.newInvalidDocument(t)};return Dl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(k_(t))},(i,a)=>{r={document:this.jn(t,a),size:M_(a)}}).next(()=>r)}getEntries(e,t){let r=xi();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=xi(),i=new Tr(Ge.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,M_(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new Pn(qw);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(k_(i.first()),k_(i.last())),l=i.getIterator();let h=l.getNext();return Dl(e).Z({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=Ge.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&qw(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.j(k_(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),$p(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dl(e).W(IDBKeyRange.bound(l,h,!0)).next(m=>{let v=xi();for(const D of m){const S=this.jn(Ge.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(Pp(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=xi();const l=P_(t,r),h=P_(t,_s.max());return Dl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,v,D)=>{const S=this.jn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new N_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zw(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Qn(e,t){return zw(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function cA(n,e){let t;if(e.document)t=OC(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Il(e.noDocument.readTime);t=Xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ge.fromSegments(e.unknownDocument.path),i=Il(e.unknownDocument.version);t=Xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qn(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return Xn.newInvalidDocument(e)}}function Gw(n){return new IN(n)}class N_ extends Wp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new El(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((a,l)=>qt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=kw(this.Yn.yt,l);i=i.add(a.path.popLast()),r+=M_(m)-h.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=kw(this.Yn.yt,l.convertToNoDocument(Tt.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function zw(n){return Yr(n,"remoteDocumentGlobal")}function Dl(n){return Yr(n,"remoteDocumentsV14")}function k_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P_(n,e){const t=e.documentKey.path.toArray();return[n,$p(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=qt(t[a],r[a]),i)return i;return i=qt(t.length,r.length),i||(i=qt(t[t.length-2],r[r.length-2]),i||qt(t[t.length-1],r[r.length-1]))}class wA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Zw{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Op(r.mutation,i,ri.empty(),Qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=yo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Eh();return a.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=xi();const l=g_(),h=g_();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof la)?a=a.insert(v.key,v):void 0!==D?(l.set(v.key,D.mutation.getFieldMask()),Op(D.mutation,v,D.mutation.getFieldMask(),Qn.now())):l.set(v.key,ri.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return h.set(v,new wA(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=g_();let i=new Tr((l,h)=>l-h),a=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||ri.empty();D=h.applyToLocalView(v,D),r.set(m,D);const S=(i.get(h.batchId)||Qt()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,D=m.value,S=bC();D.forEach(k=>{if(!a.has(k)){const j=vC(t.get(k),r.get(k));null!==j&&S.set(k,j),a=a.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):uw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(yo());let h=-1,m=a;return l.next(v=>ue.forEach(v,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?ue.resolve():this.remoteDocumentCache.getEntry(e,D).next(k=>{m=m.insert(D,k)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Qt())).next(D=>({batchId:h,changes:Hc(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=Eh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Eh();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,h=>{const m=(v=t,D=h.child(i),new vl(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,Xn.newInvalidDocument(v)))});let l=Eh();return a.forEach((h,m)=>{const v=i.get(h);void 0!==v&&Op(v.mutation,m,ri.empty(),Qn.now()),Pp(t,m)&&(l=l.insert(h,m))}),l})}}class CN{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Hr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Pw(r.bundledQuery),readTime:Hr(r.readTime)}),ue.resolve();var r}}class bN{constructor(){this.overlays=new Tr(Ge.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=yo();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=yo(),a=t.length+1,l=new Ge(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Tr((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=yo(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=yo(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return ue.resolve(h)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Mw(t,r));let a=this.es.get(t);void 0===a&&(a=Qt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class Kw{constructor(){this.ns=new Pn(ii.ss),this.rs=new Pn(ii.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ii(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ii(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new pn([])),r=new ii(t,e),i=new ii(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new pn([])),r=new ii(t,e),i=new ii(t,e+1);let a=Qt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ii(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ii{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||qt(e._s,t._s)}static os(e,t){return qt(e._s,t._s)||Ge.comparator(e.key,t.key)}}class O_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Pn(ii.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new Bp(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new ii(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ii(t,0),i=new ii(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(qt);return t.forEach(i=>{const a=new ii(i,0),l=new ii(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const l=new ii(new Ge(a),0);let h=new Pn(qt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m._s)),!0)},l),ue.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const a=new ii(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ii(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class EA{constructor(e){this.Es=e,this.docs=new Tr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=xi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Xn.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=xi();const l=t.path,h=new Ge(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:D}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||n_(ah(D),r)<=0||(i.has(D.key)||Pp(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){at()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DN(this)}getSize(e){return ue.resolve(this.size)}}class DN extends Wp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class TN{constructor(e){this.persistence=e,this.Rs=new El(t=>yl(t),mh),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Kw,this.targetCount=0,this.vs=Qc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Qc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class IA{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ts(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new TN(this),this.indexManager=new mN,this.remoteDocumentCache=new EA(r=>this.referenceDelegate.xs(r)),this.yt=new Nw(t),this.Ns=new CN(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new O_(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new CA(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class CA extends Yv{constructor(e){super(),this.currentSequenceNumber=e}}class F_{constructor(e){this.persistence=e,this.Fs=new Kw,this.$s=null}static Bs(e){return new F_(e)}get Ls(){if(this.$s)return this.$s;throw at()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=Ge.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class bA{constructor(e){this.yt=e}$(e,t,r,i){const a=new Dp("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Th,{unique:!0}),h.createObjectStore("documentMutations"),DA(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),DA(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").W().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Th,{unique:!0});const D=m.store("mutations"),S=v.map(k=>D.put(k));return ue.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:Sw});m.createIndex("collectionPathOverlayIndex",Aw,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",GC,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:w_});m.createIndex("documentKeyIndex",E_),m.createIndex("collectionGroupIndex",sA)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:WC}).createIndex("sequenceNumberIndex",aA,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:uA}).createIndex("documentKeyIndex",pN,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=M_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>ue.forEach(h,m=>{Ct(m.userId===a.userId);const v=zc(this.yt,m);return jw(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const m=new pn(l),v=[0,yi(m)];a.push(t.get(v).next(D=>D?ue.resolve():t.put({targetId:0,path:yi(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Tw});const r=t.store("collectionParents"),i=new Uw,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:yi(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const m=new pn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,m],v)=>{const D=js(h);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Qr(i),l=qc(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Ge(pn.fromString(v.document.name).popFirst(5)):v.noDocument?Ge.fromSegments(v.noDocument.path):v.unknownDocument?Ge.fromSegments(v.unknownDocument.path):at()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Gw(this.yt),a=new IA(F_.Bs,this.yt.ie);return r.W().next(l=>{const h=new Map;return l.forEach(m=>{var v;let D=null!==(v=h.get(m.userId))&&void 0!==v?v:Qt();zc(this.yt,m).keys().forEach(S=>D=D.add(S)),h.set(m.userId,D)}),ue.forEach(h,(m,v)=>{const D=new jr(v),S=b_.re(this.yt,D),k=a.getIndexManager(D),j=Hp.re(D,this.yt,k,a.referenceDelegate);return new Zw(i,j,S,k).recalculateAndSaveOverlaysForDocumentKeys(new Rw(t,ts.at),m).next()})})}}function DA(n){n.createObjectStore("targetDocuments",{keyPath:jC}).createIndex("documentTargetsIndex",HC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oA,{unique:!0}),n.createObjectStore("targetGlobal")}const Yw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class L_{constructor(e,t,r,i,a,l,h,m,v,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=v,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=k=>Promise.resolve(),!L_.C())throw new Ue(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EN(this,i),this.ii=t+"main",this.yt=new Nw(m),this.ri=new $s(this.ii,this.Xs,new bA(this.yt)),this.Cs=new _N(this.referenceDelegate,this.yt),this.remoteDocumentCache=Gw(this.yt),this.Ns=new ZC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ce.FAILED_PRECONDITION,Yw);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ts(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(iu(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Mh(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return Qw(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Yr(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return ue.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Mh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(ce.FAILED_PRECONDITION,Yw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qw(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Rw(t,ts.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Qw(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Hp.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _A(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return b_.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?lA:14===l?qC:13===l?zC:12===l?xw:11===l?I_:void at();var l;let h;return this.ri.runTransaction(e,i,a,m=>(h=new Rw(m,this.Ss?this.Ss.next():ts.at),"readwrite-primary"===t?this.fi(h).next(v=>!!v||this.di(h)).next(v=>{if(!v)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(ce.FAILED_PRECONDITION,GI);return r(h)}).next(v=>this.wi(h).next(()=>v)):this.Vi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Vi(e){return Mh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ce.FAILED_PRECONDITION,Yw)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mh(e).put("owner",t)}static C(){return $s.C()}_i(e){const t=Mh(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mh(n){return Yr(n,"owner")}function Qw(n){return Yr(n,"clientMetadata")}function ys(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Xw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Qt(),i=Qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Xw(e,t.fromCache,r,i)}}class V_{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(HS(t))return ue.resolve(null);let r=Ai(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=c_(t,null,"F"),r=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Qt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,h);return this.$i(t,v,l,m.readTime)?this.ki(e,c_(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return HS(t)||i.isEqual(Tt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(Qm()<=Ls.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lw(t)),this.Bi(e,l,t,t_(i,-1)))})}Fi(e,t){let r=new Pn(hC(e));return t.forEach((i,a)=>{Pp(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return Qm()<=Ls.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",lw(t)),this.Ni.getDocumentsMatchingQuery(e,t,_s.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class TA{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Tr(qt),this.Ui=new El(a=>yl(a),mh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zw(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function vs(n,e,t,r){return new TA(n,e,t,r)}function eb(n,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,ye.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=Qt();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:h}))})})}),Gp.apply(this,arguments)}function SA(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const D=m.batch,S=D.keys();let k=ue.resolve();return S.forEach(j=>{k=k.next(()=>v.getEntry(h,j)).next(Z=>{const fe=m.docVersions.get(j);Ct(null!==fe),Z.version.compareTo(fe)<0&&(D.applyToRemoteDocument(Z,m),Z.isValidDocument()&&(Z.setReadTime(m.commitVersion),v.addEntry(Z)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Qt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tb(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Jw(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const h=[];e.targetChanges.forEach((D,S)=>{const k=i.get(S);if(!k)return;h.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let j=k.withSequenceNumber(a.currentSequenceNumber);var Z,fe,Ce;e.targetMismatches.has(S)?j=j.withResumeToken(Kr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):D.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(D.resumeToken,r)),i=i.insert(S,j),fe=j,Ce=D,(0===(Z=k).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,j))});let m=xi(),v=Qt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(eE(a,l,e.documentUpdates).next(D=>{m=D.Wi,v=D.zi})),!r.isEqual(Tt.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return ue.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.qi=i,a))}function eE(n,e,t){let r=Qt(),i=Qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=xi();return t.forEach((h,m)=>{const v=a.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Tt.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function nb(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nh(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new uu(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function ed(n,e,t){return U_.apply(this,arguments)}function U_(){return U_=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!iu(l))throw l;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),U_.apply(this,arguments)}function B_(n,e,t){const r=Ye(n);let i=Tt.min(),a=Qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const D=Ye(h),S=D.Ui.get(v);return void 0!==S?ue.resolve(D.qi.get(S)):D.Cs.getTargetData(m,v)}(r,l,Ai(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Tt.min(),t?a:Qt())).next(h=>($_(r,cw(e),h),{documents:h,Hi:a})))}function tE(n,e){const t=Ye(n),r=Ye(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function rb(n,e){const t=Ye(n),r=t.Ki.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,t_(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($_(t,e,i),i))}function $_(n,e,t){let r=n.Ki.get(e)||Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function j_(){return j_=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n);let a=Qt(),l=xi();for(const v of t){const D=e.Ji(v.metadata.name);v.document&&(a=a.add(D));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(D,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield Nh(i,(v=r,Ai(Np(pn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>eE(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.Wi,D.zi)).next(()=>D.Wi)))}),j_.apply(this,arguments)}function nE(n,e){return wo.apply(this,arguments)}function wo(){return wo=(0,ye.Z)(function*(n,e,t=Qt()){const r=yield Nh(n,Ai(Pw(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Hr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(Kr.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),wo.apply(this,arguments)}function ib(n,e){return`firestore_clients_${n}_${e}`}function AA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rE(n,e){return`firestore_targets_${n}_${e}`}class H_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ue(i.error.code,i.error.message))),l?new H_(e,t,i.state,a):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ue(r.error.code,r.error.message))),a?new zp(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class W_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=m_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=QI(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new W_(e,a):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class G_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new G_(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sb{constructor(){this.activeTargetIds=m_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z_{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Tr(qt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=ib(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new sb),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(ib(e.persistenceKey,i));if(a){const l=W_.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(rE(this.persistenceKey,e));if(r){const i=zp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rE(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=ts.at;if(null!=a)try{const h=JSON.parse(a);Ct("number"==typeof h),l=h}catch(h){br("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==ts.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new H_(this.currentUser,e,t,r),a=AA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=AA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=rE(this.persistenceKey,e),a=new zp(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return W_.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return H_.Zi(new jr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return zp.Zi(i,t)}yr(e){return G_.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=m_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ob{constructor(){this.Lr=new sb,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new sb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ab{Ur(e){}shutdown(){}}class xA{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ub{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class lb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);$e("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(m=>($e("RestConnection","Received: ",m),m),m=>{throw ul("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+al,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${iE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new bS;h.setWithCredentials(!0),h.listenOnce(VI.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Gv.NO_ERROR:const v=h.getResponseJson();$e("Connection","XHR received:",JSON.stringify(v)),a(v);break;case Gv.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),l(new Ue(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Gv.HTTP_ERROR:const D=h.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S?.error;if(k&&k.status&&k.message){const j=function(Z){const fe=Z.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(fe)>=0?fe:ce.UNKNOWN}(k.status);l(new Ue(j,k.message))}else l(new Ue(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ue(ce.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Wv(),l=LI(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new BI({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=i.join("");$e("Connection","Creating WebChannel: "+m,h);const v=a.createWebChannel(m,h);let D=!1,S=!1;const k=new ub({Hr:Z=>{S?$e("Connection","Not sending because WebChannel is closed:",Z):(D||($e("Connection","Opening WebChannel transport."),v.open(),D=!0),$e("Connection","WebChannel sending:",Z),v.send(Z))},Jr:()=>v.close()}),j=(Z,fe,Ce)=>{Z.listen(fe,St=>{try{Ce(St)}catch(At){setTimeout(()=>{throw At},0)}})};return j(v,Ym.EventType.OPEN,()=>{S||$e("Connection","WebChannel transport opened.")}),j(v,Ym.EventType.CLOSE,()=>{S||(S=!0,$e("Connection","WebChannel transport closed"),k.io())}),j(v,Ym.EventType.ERROR,Z=>{S||(S=!0,ul("Connection","WebChannel transport errored:",Z),k.io(new Ue(ce.UNAVAILABLE,"The operation could not be completed")))}),j(v,Ym.EventType.MESSAGE,Z=>{var fe;if(!S){const Ce=Z.data[0];Ct(!!Ce);const St=Ce,At=St.error||(null===(fe=St[0])||void 0===fe?void 0:fe.error);if(At){$e("Connection","WebChannel received error:",At);const ht=At.status;let gt=function(Zt){const Fr=Sr[Zt];if(void 0!==Fr)return p_(Fr)}(ht),Lt=At.message;void 0===gt&&(gt=ce.INTERNAL,Lt="Unknown error status: "+ht+" with message "+At.message),S=!0,k.io(new Ue(gt,Lt)),v.close()}else $e("Connection","WebChannel received:",Ce),k.ro(Ce)}}),j(l,UI.STAT_EVENT,Z=>{Z.stat===zv.PROXY?$e("Connection","Detected buffering proxy"):Z.stat===zv.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.so()},0),k}}function sE(){return typeof window<"u"?window:null}function qp(){return typeof document<"u"?document:null}function kh(n){return new xC(n,!0)}class Ph{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Zp{constructor(e,t,r,i,a,l,h,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ph(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ue(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cb extends Zp{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function eA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:at(),i=e.targetChange.targetIds||[],a=function(m,v){return m.wt?(Ct(void 0===v||"string"==typeof v),Kr.fromBase64String(v||"")):(Ct(void 0===v||v instanceof Uint8Array),Kr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?ce.UNKNOWN:p_(m.code);return new Ue(v,m.message||"")}(l);t=new ww(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ca(n,r.document.name),a=Hr(r.document.updateTime),l=r.document.createTime?Hr(r.document.createTime):Tt.min(),h=new kr({mapValue:{fields:r.document.fields}}),m=Xn.newFoundDocument(i,a,l,h);t=new Fp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=ca(n,r.document),a=r.readTime?Hr(r.readTime):Tt.min(),l=Xn.newNoDocument(i,a);t=new Fp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ca(n,r.document);t=new Fp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,a=new KS(r.count||0);t=new vw(r.targetId,a)}}var m;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?Hr(a.readTime):Tt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Vp(this.yt),t.addTarget=function(i,a){let l;const h=a.target;return l=u_(h)?{documents:bw(i,h)}:{query:y_(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=RC(i,a.resumeToken):a.snapshotVersion.compareTo(Tt.min())>0&&(l.readTime=Ch(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function tA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Vp(this.yt),t.removeTarget=e,this.Bo(t)}}class RA extends Zp{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function FC(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=Hr(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=Hr(i)),new yC(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.Zo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Vp(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>au(this.yt,r))};this.Bo(t)}}class db extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ue(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ce.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(ce.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class MA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(br(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class SN{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(h=>{r.enqueueAndForget((0,ye.Z)(function*(){var m;cu(l)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ye.Z)(function*(v){const D=Ye(v);D._u.add(4),yield Oh(D),D.gu.set("Unknown"),D._u.delete(4),yield q_(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new MA(r,i)}}function q_(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ye.Z)(function*(n){if(cu(n))for(const e of n.wu)yield e(!0)}),Z_.apply(this,arguments)}function Oh(n){return aE.apply(this,arguments)}function aE(){return aE=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),aE.apply(this,arguments)}function K_(n,e){const t=Ye(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),gb(t)?pb(t):Xp(t).ko()&&fb(t,e))}function Y_(n,e){const t=Ye(n),r=Xp(t);t.du.delete(e),r.ko()&&NA(t,e),0===t.du.size&&(r.ko()?r.Fo():cu(t)&&t.gu.set("Unknown"))}function fb(n,e){n.yu.Ot(e.targetId),Xp(n).zo(e)}function NA(n,e){n.yu.Ot(e),Xp(n).Ho(e)}function pb(n){n.yu=new QS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Xp(n).start(),n.gu.uu()}function gb(n){return cu(n)&&!Xp(n).No()&&n.du.size>0}function cu(n){return 0===Ye(n)._u.size}function Kp(n){n.yu=void 0}function kA(n){return uE.apply(this,arguments)}function uE(){return uE=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{fb(n,e)})}),uE.apply(this,arguments)}function mb(n,e){return du.apply(this,arguments)}function du(){return du=(0,ye.Z)(function*(n,e){Kp(n),gb(n)?(n.gu.hu(e),pb(n)):n.gu.set("Unknown")}),du.apply(this,arguments)}function _b(n,e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof ww&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fh(n,r)}else if(e instanceof Fp?n.yu.Kt(e):e instanceof vw?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Tt.min()))try{const r=yield tb(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i.du.get(h);if(!m)return;i.du.set(h,m.withResumeToken(Kr.EMPTY_BYTE_STRING,m.snapshotVersion)),NA(i,h);const v=new uu(m.target,h,1,m.sequenceNumber);fb(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield Fh(n,r)}var r}),Yp.apply(this,arguments)}function Fh(n,e,t){return lE.apply(this,arguments)}function lE(){return lE=(0,ye.Z)(function*(n,e,t){if(!iu(e))throw e;n._u.add(1),yield Oh(n),n.gu.set("Offline"),t||(t=()=>tb(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield q_(n)}))}),lE.apply(this,arguments)}function Q_(n,e){return e().catch(t=>Fh(n,t,e))}function Sl(n){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,ye.Z)(function*(n){const e=Ye(n),t=hu(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;AN(e);)try{const i=yield nb(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,xN(e,i)}catch(i){yield Fh(e,i)}PA(e)&&OA(e)}),Lh.apply(this,arguments)}function AN(n){return cu(n)&&n.fu.length<10}function xN(n,e){n.fu.push(e);const t=hu(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function PA(n){return cu(n)&&!hu(n).No()&&n.fu.length>0}function OA(n){hu(n).start()}function yb(n){return cE.apply(this,arguments)}function cE(){return cE=(0,ye.Z)(function*(n){hu(n).eu()}),cE.apply(this,arguments)}function FA(n){return dE.apply(this,arguments)}function dE(){return dE=(0,ye.Z)(function*(n){const e=hu(n);for(const t of n.fu)e.Xo(t.mutations)}),dE.apply(this,arguments)}function LA(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),i=C_.from(r,e,t);yield Q_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sl(n)}),X_.apply(this,arguments)}function vb(n,e){return J_.apply(this,arguments)}function J_(){return J_=(0,ye.Z)(function*(n,e){var t;e&&hu(n).Yo&&(yield(t=(0,ye.Z)(function*(r,i){if(mw(a=i.code)&&a!==ce.ABORTED){const l=r.fu.shift();hu(r).Mo(),yield Q_(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Sl(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),PA(n)&&OA(n)}),J_.apply(this,arguments)}function wb(n,e){return hE.apply(this,arguments)}function hE(){return hE=(0,ye.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=cu(t);t._u.add(3),yield Oh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield q_(t)}),hE.apply(this,arguments)}function ey(n,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ye.Z)(function*(n,e){const t=Ye(n);e?(t._u.delete(2),yield q_(t)):e||(t._u.add(2),yield Oh(t),t.gu.set("Unknown"))}),Qp.apply(this,arguments)}function Xp(n){return n.pu||(n.pu=function(e,t,r){const i=Ye(e);return i.su(),new cb(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:kA.bind(null,n),Zr:mb.bind(null,n),Wo:_b.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),gb(n)?pb(n):n.gu.set("Unknown")):(yield n.pu.stop(),Kp(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function hu(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ye(e);return i.su(),new RA(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:yb.bind(null,n),Zr:vb.bind(null,n),tu:FA.bind(null,n),Zo:LA.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield Sl(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Jp{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Jp(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vh(n,e){if(br("AsyncQueue",`${e}: ${n}`),iu(n))return new Ue(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Uh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Eh(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new Uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VA{constructor(){this.Tu=new Tr(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):at():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class eg{constructor(e,t,r,i,a,l,h,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new eg(e,t,Uh.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class UA{constructor(){this.Au=void 0,this.listeners=[]}}class BA{constructor(){this.queries=new El(e=>dC(e),kp),this.onlineState="Unknown",this.Ru=new Set}}function fE(n,e){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new UA),i)try{a.Au=yield t.onListen(r)}catch(l){const h=Vh(l,`Initialization of query '${lw(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&pE(t)}),Eb.apply(this,arguments)}function Ib(n,e){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Cb.apply(this,arguments)}function RN(n,e){const t=Ye(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&pE(t)}function MN(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function pE(n){n.Ru.forEach(e=>{e.next()})}class bb{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new eg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=eg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class NN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class $A{constructor(e){this.yt=e}Ji(e){return ca(this.yt,e)}Yi(e){return e.metadata.exists?OC(this.yt,e.document,!1):Xn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Hr(e)}}class kN{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=pn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new $A(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Qt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function Tl(n,e,t,r){return j_.apply(this,arguments)}(e.localStore,new $A(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield nE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function jA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class HA{constructor(e){this.key=e}}class s{constructor(e){this.key=e}}class o{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=hC(e),this.Qu=new Uh(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new VA,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const k=i.get(D),j=Pp(this.query,S)?S:null,Z=!!k&&this.mutatedKeys.has(k.key),fe=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Ce=!1;k&&j?k.data.isEqual(j.data)?Z!==fe&&(r.track({type:3,doc:j}),Ce=!0):this.Hu(k,j)||(r.track({type:2,doc:j}),Ce=!0,(m&&this.Gu(j,m)>0||v&&this.Gu(j,v)<0)&&(h=!0)):!k&&j?(r.track({type:0,doc:j}),Ce=!0):k&&!j&&(r.track({type:1,doc:k}),Ce=!0,(m||v)&&(h=!0)),Ce&&(j?(l=l.add(j),a=fe?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,D)=>function(S,k){const j=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return j(S)-j(k)}(v.type,D.type)||this.Gu(v.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,m=h!==this.Uu;return this.Uu=h,0!==a.length||m?{snapshot:new eg(this.query,e.Qu,i,a,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new VA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new s(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new HA(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return eg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class u{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class c{constructor(e){this.key=e,this.nc=!1}}class d{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new El(h=>dC(h),kp),this.rc=new Map,this.oc=new Set,this.uc=new Tr(Ge.comparator),this.cc=new Map,this.ac=new Kw,this.hc={},this.lc=new Map,this.fc=Qc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function p(n,e){return y.apply(this,arguments)}function y(){return y=(0,ye.Z)(function*(n,e){const t=XA(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield Nh(t.localStore,Ai(e));t.isPrimaryClient&&K_(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield E(t,e,r,"current"===h,l.resumeToken)}return i}),y.apply(this,arguments)}function E(n,e,t,r,i){return C.apply(this,arguments)}function C(){return C=(0,ye.Z)(function*(n,e,t,r,i){n._c=(S,k,j)=>{return(Z=(0,ye.Z)(function*(fe,Ce,St,At){let ht=Ce.view.Wu(St);ht.$i&&(ht=yield B_(fe.localStore,Ce.query,!1).then(({documents:Zt})=>Ce.view.Wu(Zt,ht)));const gt=At&&At.targetChanges.get(Ce.targetId),Lt=Ce.view.applyChanges(ht,fe.isPrimaryClient,gt);return rg(fe,Ce.targetId,Lt.Xu),Lt.snapshot}),function(fe,Ce,St,At){return Z.apply(this,arguments)})(n,S,k,j);var Z};const a=yield B_(n.localStore,e,!0),l=new o(e,a.Hi),h=l.Wu(a.documents),m=Wc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(h,n.isPrimaryClient,m);rg(n,t,v.Xu);const D=new u(e,t,l);return n.ic.set(e,D),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),C.apply(this,arguments)}function A(n,e){return N.apply(this,arguments)}function N(){return N=(0,ye.Z)(function*(n,e){const t=Ye(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!kp(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ed(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Y_(t.remoteStore,r.targetId),Al(t,r.targetId)}).catch(ru))):(Al(t,r.targetId),yield ed(t.localStore,r.targetId,!0))}),N.apply(this,arguments)}function q(){return q=(0,ye.Z)(function*(n,e,t){const r=JA(n);try{const i=yield function(a,l){const h=Ye(a),m=Qn.now(),v=l.reduce((k,j)=>k.add(j.key),Qt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let j=xi(),Z=Qt();return h.Gi.getEntries(k,v).next(fe=>{j=fe,j.forEach((Ce,St)=>{St.isValidDocument()||(Z=Z.add(Ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,j)).next(fe=>{D=fe;const Ce=[];for(const St of l){const At=ZS(St,D.get(St.key).overlayedDocument);null!=At&&Ce.push(new la(St.key,At,uC(At.value.mapValue),ir.exists(!0)))}return h.mutationQueue.addMutationBatch(k,m,Ce,l)}).next(fe=>{S=fe;const Ce=fe.applyToLocalDocumentSet(D,Z);return h.documentOverlayCache.saveOverlays(k,fe.batchId,Ce)})}).then(()=>({batchId:S.batchId,changes:Hc(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.hc[a.currentUser.toKey()];m||(m=new Tr(qt)),m=m.insert(l,h),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Eo(r,i.changes),yield Sl(r.remoteStore)}catch(i){const a=Vh(i,"Failed to persist write");t.reject(a)}}),q.apply(this,arguments)}function ee(n,e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,ye.Z)(function*(n,e){const t=Ye(n);try{const r=yield Jw(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Ct(l.nc):i.removedDocuments.size>0&&(Ct(l.nc),l.nc=!1))}),yield Eo(t,r,e)}catch(r){yield ru(r)}}),Ie.apply(this,arguments)}function je(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ye(a);h.onlineState=l;let m=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.bu(l)&&(m=!0)}),m&&pE(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ze(n,e,t){return lt.apply(this,arguments)}function lt(){return lt=(0,ye.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Tr(Ge.comparator);l=l.insert(a,Xn.newNoDocument(a,Tt.min()));const h=Qt().add(a),m=new Ih(Tt.min(),new Map,new Pn(qt),l,h);yield ee(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),ig(r)}else yield ed(r.localStore,e,!1).then(()=>Al(r,e,t)).catch(ru)}),lt.apply(this,arguments)}function Mt(n,e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield SA(t.localStore,e);ng(t,r,null),tg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Eo(t,i)}catch(i){yield ru(i)}}),Pe.apply(this,arguments)}function Bt(n,e,t){return vn.apply(this,arguments)}function vn(){return vn=(0,ye.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,l){const h=Ye(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,l).next(D=>(Ct(null!==D),v=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);ng(r,e,t),tg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Eo(r,i)}catch(i){yield ru(i)}}),vn.apply(this,arguments)}function fu(){return fu=(0,ye.Z)(function*(n,e){const t=Ye(n);cu(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ye(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Vh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fu.apply(this,arguments)}function tg(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function ng(n,e,t){const r=Ye(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Al(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||ty(n,r)})}function ty(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Y_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ig(n))}function rg(n,e,t){for(const r of t)r instanceof HA?(n.ac.addReference(r.key,e),gE(n,r)):r instanceof s?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||ty(n,r.key)):at()}function gE(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oc.add(r),ig(n))}function ig(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(pn.fromString(e)),r=n.fc.next();n.cc.set(r,new c(t)),n.uc=n.uc.insert(t,r),K_(n.remoteStore,new uu(Ai(Np(t.path)),r,2,ts.at))}}function Eo(n,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,m)=>{l.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const D=Xw.Ci(m.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,ye.Z)(function*(m,v){const D=Ye(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ue.forEach(v,k=>ue.forEach(k.Si,j=>D.persistence.referenceDelegate.addReference(S,k.targetId,j)).next(()=>ue.forEach(k.Di,j=>D.persistence.referenceDelegate.removeReference(S,k.targetId,j)))))}catch(S){if(!iu(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const k=S.targetId;if(!S.fromCache){const j=D.qi.get(k),fe=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.qi=D.qi.insert(k,fe)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),sg.apply(this,arguments)}function rL(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,ye.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield eb(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Ue(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Eo(t,r.ji)}var i}),WA.apply(this,arguments)}function iL(n,e){const t=Ye(n),r=t.cc.get(e);if(r&&r.nc)return Qt().add(r.key);{let i=Qt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function sL(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ye.Z)(function*(n,e){const t=Ye(n),r=yield B_(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&rg(t,e.targetId,i.Xu),i}),GA.apply(this,arguments)}function oL(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,ye.Z)(function*(n,e){const t=Ye(n);return rb(t.localStore,e).then(r=>Eo(t,r))}),zA.apply(this,arguments)}function aL(n,e,t,r){return qA.apply(this,arguments)}function qA(){return qA=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(l,h){const m=Ye(l),v=Ye(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Tn(D,h).next(S=>S?m.localDocuments.getDocuments(D,S):ue.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Sl(i.remoteStore):"acknowledged"===t||"rejected"===t?(ng(i,e,r||null),tg(i,e),h=e,Ye(Ye(i.localStore).mutationQueue).An(h)):at(),yield Eo(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),qA.apply(this,arguments)}function ZA(){return ZA=(0,ye.Z)(function*(n,e){const t=Ye(n);if(XA(t),JA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield PN(t,r.toArray());t.dc=!0,yield ey(t.remoteStore,!0);for(const a of i)K_(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Al(t,l),ed(t.localStore,l,!0))),Y_(t.remoteStore,l)}),yield i,yield PN(t,r),function(a){const l=Ye(a);l.cc.forEach((h,m)=>{Y_(l.remoteStore,m)}),l.ac.fs(),l.cc=new Map,l.uc=new Tr(Ge.comparator)}(t),t.dc=!1,yield ey(t.remoteStore,!1)}}),ZA.apply(this,arguments)}function PN(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const l of e){let h;const m=r.rc.get(l);if(m&&0!==m.length){h=yield Nh(r.localStore,Ai(m[0]));for(const v of m){const D=r.ic.get(v),S=yield sL(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield tE(r.localStore,l);h=yield Nh(r.localStore,v),yield E(r,ON(v),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),KA.apply(this,arguments)}function ON(n){return jS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lL(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).vi()}function cL(n,e,t,r){return YA.apply(this,arguments)}function YA(){return YA=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n);if(i.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield rb(i.localStore,cw(a[0])),h=Ih.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Kr.EMPTY_BYTE_STRING);yield Eo(i,l,h);break}case"rejected":yield ed(i.localStore,e,!0),Al(i,e,r);break;default:at()}}),YA.apply(this,arguments)}function dL(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,ye.Z)(function*(n,e,t){const r=XA(n);if(r.dc){for(const i of e){if(r.rc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield tE(r.localStore,i),l=yield Nh(r.localStore,a);yield E(r,ON(a),l.targetId,!1,l.resumeToken),K_(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield ed(r.localStore,i,!1).then(()=>{Y_(r.remoteStore,i),Al(r,i)}).catch(ru))}}),QA.apply(this,arguments)}function XA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ee.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ze.bind(null,e),e.sc.Wo=RN.bind(null,e.eventManager),e.sc.wc=MN.bind(null,e.eventManager),e}function JA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bt.bind(null,e),e}class FN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.yt=kh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return vs(this.persistence,new V_,e.initialUser,this.yt)}yc(e){return new IA(F_.Bs,this.yt)}gc(e){return new ob}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LN extends FN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield JA(r.Ac.syncEngine),yield Sl(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return vs(this.persistence,new V_,e.initialUser,this.yt)}Tc(e,t){return new vN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new ZI(t,this.persistence);return new qI(e.asyncQueue,r)}yc(e){const t=ys(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new L_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sE(),qp(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ob}}class fL extends LN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof z_&&(r.sharedClientState.syncEngine={Fr:aL.bind(null,i),$r:cL.bind(null,i),Br:dL.bind(null,i),vi:lL.bind(null,i),Mr:oL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,ye.Z)(function*(l){yield function uL(n,e){return ZA.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=sE();if(!z_.C(t))throw new Ue(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ys(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new z_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ex{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>je(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=rL.bind(null,r.syncEngine),yield ey(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BA}createDatastore(e){const t=kh(e.databaseInfo.databaseId),r=new lb(e.databaseInfo);return new db(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>je(this.syncEngine,h,0),l=xA.C()?new xA:new ab,new SN(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const D=new d(r,i,a,l,h,m);return v&&(D.dc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ye(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Oh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tx(n,e,t){if(!t)throw new Ue(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VN(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UN(n){if(!Ge.isDocumentKey(n))throw new Ue(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BN(n){if(Ge.isDocumentKey(n))throw new Ue(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Db(n);throw new Ue(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $N(n,e){if(e<=0)throw new Ue(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const jN=new Map;class HN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new TS;switch(t.type){case"gapi":return new WI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jN.get(e);t&&($e("ComponentProvider","Removing Datastore"),jN.delete(e),t.terminate())}(this),Promise.resolve()}}function WN(n,e,t,r={}){var i;const a=(n=mn(n,mE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&ul("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=jr.MOCK_USER;else{l=(0,Q.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ue(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new jr(m)}n._authCredentials=new SS(new qv(l,h))}}class yr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yr(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class xl extends Ui{constructor(e,t,r){super(e,t,Np(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new Ge(e))}withConverter(e){return new xl(this.firestore,e,this._path)}}function GN(n,e,...t){if(n=(0,Q.m9)(n),tx("collection","path",e),n instanceof mE){const r=pn.fromString(e,...t);return BN(r),new xl(n,null,r)}{if(!(n instanceof yr||n instanceof xl))throw new Ue(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return BN(r),new xl(n.firestore,null,r)}}function Tb(n,e,...t){if(n=(0,Q.m9)(n),1===arguments.length&&(e=Kv.R()),tx("doc","path",e),n instanceof mE){const r=pn.fromString(e,...t);return UN(r),new yr(n,null,new Ge(r))}{if(!(n instanceof yr||n instanceof xl))throw new Ue(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return UN(r),new yr(n.firestore,n instanceof xl?n.converter:null,new Ge(r))}}function zN(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),(n instanceof yr||n instanceof xl)&&(e instanceof yr||e instanceof xl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nx(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&kp(n._query,e._query)&&n.converter===e.converter}function qN(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Sb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gL{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new on,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new NN(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class yL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const h=Ye(a),m=Vp(h.yt)+"/documents",v={documents:l.map(j=>Lp(h.yt,j))},D=yield h._o("BatchGetDocuments",m,v,l.length),S=new Map;D.forEach(j=>{const Z=function JS(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=ca(t,r.found.name),a=Hr(r.found.updateTime),l=r.found.createTime?Hr(r.found.createTime):Tt.min(),h=new kr({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(i,a,l,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=ca(t,r.missing),a=Hr(r.readTime);return Xn.newNoDocument(i,a)}(n,e):at()}(h.yt,j);S.set(Z.key.toString(),Z)});const k=[];return l.forEach(j=>{const Z=S.get(j.toString());Ct(!!Z),k.push(Z)}),k}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ge.fromPath(i);e.mutations.push(new gw(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=Ye(i),h=Vp(l.yt)+"/documents",m={writes:a.map(v=>au(l.yt,v))};yield l.ao("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Ue(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vL{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Ph(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new yL(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Tp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!mw(t)}return!1}}class wL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jr.UNAUTHENTICATED,this.clientId=Kv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>($e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ZN(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield eb(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),rx.apply(this,arguments)}function KN(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield sx(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>wb(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>wb(e.remoteStore,a)),n.onlineComponents=e}),ix.apply(this,arguments)}function sx(n){return ox.apply(this,arguments)}function ox(){return ox=(0,ye.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield ZN(n,new FN)),n.offlineComponents}),ox.apply(this,arguments)}function Ab(n){return ax.apply(this,arguments)}function ax(){return ax=(0,ye.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield KN(n,new ex)),n.onlineComponents}),ax.apply(this,arguments)}function YN(n){return sx(n).then(e=>e.persistence)}function xb(n){return sx(n).then(e=>e.localStore)}function ux(n){return Ab(n).then(e=>e.remoteStore)}function lx(n){return Ab(n).then(e=>e.syncEngine)}function ny(n){return cx.apply(this,arguments)}function cx(){return cx=(0,ye.Z)(function*(n){const e=yield Ab(n),t=e.eventManager;return t.onListen=p.bind(null,e.syncEngine),t.onUnlisten=A.bind(null,e.syncEngine),t}),cx.apply(this,arguments)}function XN(n,e,t={}){const r=new on;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,m){const v=new Sb({next:S=>{a.enqueueAndForget(()=>Ib(i,D));const k=S.docs.has(l);!k&&S.fromCache?m.reject(new Ue(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&h&&"server"===h.source?m.reject(new Ue(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new bb(Np(l.path),v,{includeMetadataChanges:!0,Nu:!0});return fE(i,D)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}function JN(n,e,t={}){const r=new on;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,m){const v=new Sb({next:S=>{a.enqueueAndForget(()=>Ib(i,D)),S.fromCache&&"server"===h.source?m.reject(new Ue(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new bb(l,v,{includeMetadataChanges:!0,Nu:!0});return fE(i,D)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}class AL{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ph(this,"async_queue_retry"),this.Wc=()=>{const t=qp();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=qp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=qp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new on;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!iu(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Jp.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&at()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function dx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class xL{constructor(){this._progressObserver={},this._taskCompletionResolver=new on,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vr extends mE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new AL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ek(this),this._firestoreClient.terminate()}}function ML(n,e){const t="object"==typeof n?n:(0,Hn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Hn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,Q.P0)("firestore");a&&WN(i,...a)}return i}function Xr(n){return n._firestoreClient||ek(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ek(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new PS(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new wL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function tk(n,e,t){const r=new on;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield ZN(n,t),yield KN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;ul("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function nk(n){if(n._initialized||n._terminated)throw new Ue(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(Kr.fromBase64String(e))}catch(t){throw new Ue(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rl(Kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class og{constructor(e){this._methodName=e}}class Rb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const BL=/^__.*__$/;class $L{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new la(e,this.data,this.fieldMask,t,this.fieldTransforms):new jc(e,this.data,t,this.fieldTransforms)}}class rk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new la(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ik(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class Mb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Mb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Pb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ik(this.sa)&&BL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class jL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||kh(e)}da(e,t,r,i=!1){return new Mb({sa:e,methodName:t,fa:r,path:Tn.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function ag(n){const e=n._freezeSettings(),t=kh(n._databaseId);return new jL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nb(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);gx("Data must be an object, but it was:",l,r);const h=ak(r,l);let m,v;if(a.merge)m=new ri(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const k=mx(e,S,t);if(!l.contains(k))throw new Ue(ce.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);lk(D,k)||D.push(k)}m=new ri(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new $L(new kr(h),m,v)}class _E extends og{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _E}}function sk(n,e,t){return new Mb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class hx extends og{_toFieldTransform(e){return new $c(e.path,new yh)}isEqual(e){return e instanceof hx}}class HL extends og{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sk(this,e,!0),r=this._a.map(a=>ug(a,t)),i=new ou(r);return new $c(e.path,i)}isEqual(e){return this===e}}class WL extends og{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sk(this,e,!0),r=this._a.map(a=>ug(a,t)),i=new wl(r);return new $c(e.path,i)}isEqual(e){return this===e}}class GL extends og{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new vh(e.yt,dw(e.yt,this.wa));return new $c(e.path,t)}isEqual(e){return this===e}}function fx(n,e,t,r){const i=n.da(1,e,t);gx("Data must be an object, but it was:",i,r);const a=[],l=kr.empty();kc(r,(m,v)=>{const D=kb(e,m,t);v=(0,Q.m9)(v);const S=i.ca(D);if(v instanceof _E)a.push(D);else{const k=ug(v,S);null!=k&&(a.push(D),l.set(D,k))}});const h=new ri(a);return new rk(l,h,i.fieldTransforms)}function px(n,e,t,r,i,a){const l=n.da(1,e,t),h=[mx(e,r,t)],m=[i];if(a.length%2!=0)throw new Ue(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)h.push(mx(e,a[k])),m.push(a[k+1]);const v=[],D=kr.empty();for(let k=h.length-1;k>=0;--k)if(!lk(v,h[k])){const j=h[k];let Z=m[k];Z=(0,Q.m9)(Z);const fe=l.ca(j);if(Z instanceof _E)v.push(j);else{const Ce=ug(Z,fe);null!=Ce&&(v.push(j),D.set(j,Ce))}}const S=new ri(v);return new rk(D,S,l.fieldTransforms)}function ok(n,e,t,r=!1){return ug(t,n.da(r?4:3,e))}function ug(n,e){if(uk(n=(0,Q.m9)(n)))return gx("Unsupported field value:",e,n),ak(n,e);if(n instanceof og)return function(t,r){if(!ik(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=ug(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dw(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qn.fromDate(t);return{timestampValue:Ch(r.yt,i)}}if(t instanceof Qn){const i=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ch(r.yt,i)}}if(t instanceof Rb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rl)return{bytesValue:RC(r.yt,t._byteString)};if(t instanceof yr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Iw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Db(t)}`)}(n,e)}function ak(n,e){const t={};return YI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kc(n,(r,i)=>{const a=ug(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function uk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof Rb||n instanceof Rl||n instanceof yr||n instanceof og)}function gx(n,e,t){if(!uk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Db(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function mx(n,e,t){if((e=(0,Q.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return kb(n,e);throw Pb("Field path arguments must be of type string or ",n,!1,void 0,t)}const zL=new RegExp("[~\\*/\\[\\]]");function kb(n,e,t){if(e.search(zL)>=0)throw Pb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw Pb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pb(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ue(ce.INVALID_ARGUMENT,h+n+m)}function lk(n,e){return n.some(t=>t.isEqual(e))}class yE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ob("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qL extends yE{data(){return super.data()}}function Ob(n,e){return"string"==typeof e?kb(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}function ck(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class vE extends _x{}function Bh(n,e,...t){let r=[];e instanceof _x&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof ry).length,l=i.filter(h=>h instanceof wE).length;if(a>1||a>0&&l>0)throw new Ue(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class wE extends vE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new wE(e,t,r)}_apply(e){const t=this._parse(e);return pk(e._query,t),new Ui(e.firestore,e.converter,Bc(e._query,t))}_parse(e){const t=ag(e.firestore);return function(i,a,l,h,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ue(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){fk(D,v);const k=[];for(const j of D)k.push(hk(h,i,j));S={arrayValue:{values:k}}}else S=hk(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||fk(D,v),S=ok(l,"where",D,"in"===v||"not-in"===v);return cn.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ry extends _x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ry(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const h of l)pk(a,h),a=Bc(a,h)}(e._query,t),new Ui(e.firestore,e.converter,Bc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yx extends vE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yx(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ue(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ph(i,a);return function(h,m){if(null===l_(h)){const v=Vc(h);null!==v&&gk(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ui(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new vl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Fb extends vE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Fb(e,t,r)}_apply(e){return new Ui(e.firestore,e.converter,c_(e._query,this._limit,this._limitType))}}class Lb extends vE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lb(e,t,r)}_apply(e){const t=dk(e,this.type,this._docOrFields,this._inclusive);return new Ui(e.firestore,e.converter,(i=t,new vl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Vb extends vE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Vb(e,t,r)}_apply(e){const t=dk(e,this.type,this._docOrFields,this._inclusive);return new Ui(e.firestore,e.converter,(i=t,new vl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function dk(n,e,t,r){if(t[0]=(0,Q.m9)(t[0]),t[0]instanceof yE)return function(i,a,l,h,m){if(!h)throw new Ue(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Uc(i))if(D.field.isKeyField())v.push(ml(a,h.key));else{const S=h.data.field(D.field);if(Jv(S))throw new Ue(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=D.field.canonicalString();throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}v.push(S)}return new Fc(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ag(n.firestore);return function(a,l,h,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Ue(ce.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let j=0;j<v.length;j++){const Z=v[j];if(S[j].field.isKeyField()){if("string"!=typeof Z)throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Z}`);if(!uw(a)&&-1!==Z.indexOf("/"))throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Z}' contains a slash.`);const fe=a.path.child(pn.fromString(Z));if(!Ge.isDocumentKey(fe))throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Ce=new Ge(fe);k.push(ml(l,Ce))}else{const fe=ok(h,m,Z);k.push(fe)}}return new Fc(k,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hk(n,e,t){if("string"==typeof(t=(0,Q.m9)(t))){if(""===t)throw new Ue(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uw(e)&&-1!==t.indexOf("/"))throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Ge.isDocumentKey(r))throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ml(n,new Ge(r))}if(t instanceof yr)return ml(n,t._key);throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(t)}.`)}function fk(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pk(n,e){if(e.isInequality()){const r=Vc(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=l_(n);null!==a&&gk(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ue(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gk(n,e,t){if(!t.isEqual(e))throw new Ue(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vx{convertValue(e,t="none"){switch(gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return kc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Rb(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ap(e));default:return null}}convertTimestamp(e){const t=fl(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Ct(UC(r));const i=new hl(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Ub(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nV extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,t)}}class lg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends yE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new EE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ob("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class EE extends nd{data(e={}){return super.data(e)}}class $h{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new EE(this._firestore,this._userDataWriter,r.key,r,new lg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new EE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new lg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new EE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new lg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:rV(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function _k(n,e){return n instanceof nd&&e instanceof nd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $h&&e instanceof $h&&n._firestore===e._firestore&&nx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class jh extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,t)}}function yk(n,e,t){n=mn(n,yr);const r=mn(n.firestore,vr),i=Ub(n.converter,e,t);return iy(r,[Nb(ag(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function vk(n,e,t,...r){n=mn(n,yr);const i=mn(n.firestore,vr),a=ag(i);let l;return l="string"==typeof(e=(0,Q.m9)(e))||e instanceof td?px(a,"updateDoc",n._key,e,t,r):fx(a,"updateDoc",n._key,e),iy(i,[l.toMutation(n._key,ir.exists(!0))])}function wk(n,...e){var t,r,i;n=(0,Q.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||dx(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(dx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof yr)v=mn(n.firestore,vr),D=Np(n._key.path),m={next:S=>{e[l]&&e[l](wx(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=mn(n,Ui);v=mn(S.firestore,vr),D=S._query;const k=new jh(v);m={next:j=>{e[l]&&e[l](new $h(v,k,S,j))},error:e[l+1],complete:e[l+2]},ck(n._query)}return function(S,k,j,Z){const fe=new Sb(Z),Ce=new bb(k,fe,j);return S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return fE(yield ny(S),Ce)})),()=>{fe.bc(),S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Ib(yield ny(S),Ce)}))}}(Xr(v),D,h,m)}function iy(n,e){return function(t,r){const i=new on;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function L(n,e,t){return q.apply(this,arguments)}(yield lx(t),r,i)})),i.promise}(Xr(n),e)}function wx(n,e,t){const r=t.docs.get(e._key),i=new jh(n);return new nd(n,i,e._key,r,new lg(t.hasPendingWrites,t.fromCache),e.converter)}const fV={maxAttempts:5};class Ek{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ag(e)}set(e,t,r){this._verifyNotCommitted();const i=Hh(e,this._firestore),a=Ub(i.converter,t,r),l=Nb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Hh(e,this._firestore);let l;return l="string"==typeof(t=(0,Q.m9)(t))||t instanceof td?px(this._dataReader,"WriteBatch.update",a._key,t,r,i):fx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hh(e,this._firestore);return this._mutations=this._mutations.concat(new wh(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hh(n,e){if((n=(0,Q.m9)(n)).firestore!==e)throw new Ue(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ag(e)}get(e){const t=Hh(e,this._firestore),r=new nV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const a=i[0];if(a.isFoundDocument())return new yE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new yE(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Hh(e,this._firestore),a=Ub(i.converter,t,r),l=Nb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Hh(e,this._firestore);let l;return l="string"==typeof(t=(0,Q.m9)(t))||t instanceof td?px(this._dataReader,"Transaction.update",a._key,t,r,i):fx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Hh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hh(e,this._firestore),r=new jh(this._firestore);return super.get(e).then(i=>new nd(this._firestore,r,t._key,i._document,new lg(!1,!1),t.converter))}}function Ex(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ck(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function bk(){if(!function OS(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){al=Hn.SDK_VERSION,(0,Hn._registerComponent)(new Wd.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new vr(new HI(t.getProvider("auth-internal")),new oh(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ue(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)($I,"3.8.3",n),(0,Hn.registerVersion)($I,"3.8.3","esm2017")}();class IE{constructor(e){this._delegate=e}static fromBase64String(e){return bk(),new IE(Rl.fromBase64String(e))}static fromUint8Array(e){return Ck(),new IE(Rl.fromUint8Array(e))}toBase64(){return bk(),this._delegate.toBase64()}toUint8Array(){return Ck(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ix(n){return function CV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bV{enableIndexedDbPersistence(e,t){return function NL(n,e){nk(n=mn(n,vr));const t=Xr(n),r=n._freezeSettings(),i=new ex;return tk(t,i,new LN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function kL(n){nk(n=mn(n,vr));const e=Xr(n),t=n._freezeSettings(),r=new ex;return tk(e,r,new fL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function PL(n){if(n._initialized&&!n._terminated)throw new Ue(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new on;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!$s.C())return Promise.resolve();const i=r+"main";yield $s.delete(i)}),function(r){return t.apply(this,arguments)})(ys(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Dk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ul("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){WN(this._delegate,e,t,r)}enableNetwork(){return function FL(n){return function EL(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield YN(n),t=yield ux(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i._u.delete(0),q_(i)}(t)}))}(Xr(n=mn(n,vr)))}(this._delegate)}disableNetwork(){return function LL(n){return function IL(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield YN(n),t=yield ux(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Ye(i);a._u.add(0),yield Oh(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Xr(n=mn(n,vr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function OL(n){return function(e){const t=new on;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function sr(n,e){return fu.apply(this,arguments)}(yield lx(e),t)})),t.promise}(Xr(n=mn(n,vr)))}(this._delegate)}onSnapshotsInSync(e){return function hV(n,e){return function DL(n,e){const t=new Sb(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield ny(n),i=t,Ye(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield ny(n),i=t,void Ye(r).Ru.delete(i);var r,i}))}}(Xr(n=mn(n,vr)),dx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sy(this,GN(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new ha(this,Tb(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,function pL(n,e){if(n=mn(n,mE),tx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new vl(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gV(n,e,t){n=mn(n,vr);const r=Object.assign(Object.assign({},fV),t);return function(i){if(i.maxAttempts<1)throw new Ue(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new on;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const m=yield function QN(n){return Ab(n).then(e=>e.datastore)}(i);new vL(i.asyncQueue,m,l,a,h).run()})),h.promise}(Xr(n),i=>e(new pV(n,i)),r)}(this._delegate,t=>e(new Tk(this,t)))}batch(){return Xr(this._delegate),new Sk(new Ek(this._delegate,e=>iy(this._delegate,e)))}loadBundle(e){return function VL(n,e){const t=Xr(n=mn(n,vr)),r=new xL;return function TL(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return qN(m,v);if(m instanceof ArrayBuffer)return qN(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new gL(m,l);var m}(t,kh(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function hL(n,e,t){const r=Ye(n);var i;(i=(0,ye.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(k,j){const Z=Ye(k),fe=Hr(j.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Ce=>Z.Ns.getBundleMetadata(Ce,j.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(fe)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=m).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(jA(m));const v=new kN(m,a.localStore,l.yt);let D=yield l.mc();for(;D;){const k=yield v.Fu(D);k&&h._updateProgress(k),D=yield l.mc()}const S=yield v.complete();return yield Eo(a,S.Lu,void 0),yield function(k,j){const Z=Ye(k);return Z.persistence.runTransaction("Save bundle","readwrite",fe=>Z.Ns.saveBundleMetadata(fe,j))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return ul("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var k}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield lx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function UL(n,e){return function SL(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield xb(n),e)}))}(Xr(n=mn(n,vr)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Es(this,t):null)}}class Bb extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new IE(new Rl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ha.forKey(t,this.firestore,null)}}class Tk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bb(e)}get(e){const t=dg(e);return this._delegate.get(t).then(r=>new CE(this._firestore,new nd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=dg(e);return r?(Ex("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=dg(e);return this._delegate.delete(t),this}}class Sk{constructor(e){this._delegate=e}set(e,t,r){const i=dg(e);return r?(Ex("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=dg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new EE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new cg(e,new Bb(e),t),i.set(t,a)),a}}cg.INSTANCES=new WeakMap;class ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ha(t,new yr(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new ha(t,new yr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sy(this.firestore,GN(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Q.m9)(e))instanceof yr&&zN(this._delegate,e)}set(e,t){t=Ex("DocumentReference.set",t);try{return t?yk(this._delegate,e,t):yk(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vk(this._delegate,e):vk(this._delegate,e,t,...r)}catch(i){throw ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function cV(n){return iy(mn(n.firestore,vr),[new wh(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=Ak(e),r=xk(e,i=>new CE(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function sV(n){n=mn(n,yr);const e=mn(n.firestore,vr),t=Xr(e),r=new jh(e);return function CL(n,e){const t=new on;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield function(m,v){const D=Ye(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ue(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Vh(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield xb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nd(e,r,n._key,i,new lg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function oV(n){n=mn(n,yr);const e=mn(n.firestore,vr);return XN(Xr(e),n._key,{source:"server"}).then(t=>wx(e,n,t))}(this._delegate):function iV(n){n=mn(n,yr);const e=mn(n.firestore,vr);return XN(Xr(e),n._key).then(t=>wx(e,n,t))}(this._delegate),t.then(r=>new CE(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ha(this.firestore,this._delegate.withConverter(e?cg.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function Ak(n){for(const e of n)if("object"==typeof e&&!Ix(e))return e;return{}}function xk(n,e){var t,r;let i;return i=Ix(n[0])?n[0]:Ix(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class CE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _k(this._delegate,e._delegate)}}class bE extends CE{data(e){const t=this._delegate.data(e);return function DS(n,e){n||at()}(void 0!==t),t}}class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bb(e)}where(e,t,r){try{return new Es(this.firestore,Bh(this._delegate,function ZL(n,e,t){const r=e,i=Ob("where",n);return wE._create(i,r,t)}(e,t,r)))}catch(i){throw ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Es(this.firestore,Bh(this._delegate,function KL(n,e="asc"){const t=e,r=Ob("orderBy",n);return yx._create(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Es(this.firestore,Bh(this._delegate,function YL(n){return $N("limit",n),Fb._create("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Es(this.firestore,Bh(this._delegate,function QL(n){return $N("limitToLast",n),Fb._create("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Es(this.firestore,Bh(this._delegate,function XL(...n){return Lb._create("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Es(this.firestore,Bh(this._delegate,function JL(...n){return Lb._create("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Es(this.firestore,Bh(this._delegate,function eV(...n){return Vb._create("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Es(this.firestore,Bh(this._delegate,function tV(...n){return Vb._create("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return nx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function uV(n){n=mn(n,Ui);const e=mn(n.firestore,vr),t=Xr(e),r=new jh(e);return function bL(n,e){const t=new on;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield B_(i,a,!0),m=new o(a,h.Hi),v=m.Wu(h.documents),D=m.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const m=Vh(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield xb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $h(e,r,n,i))}(this._delegate):"server"===e?.source?function lV(n){n=mn(n,Ui);const e=mn(n.firestore,vr),t=Xr(e),r=new jh(e);return JN(t,n._query,{source:"server"}).then(i=>new $h(e,r,n,i))}(this._delegate):function aV(n){n=mn(n,Ui);const e=mn(n.firestore,vr),t=Xr(e),r=new jh(e);return ck(n._query),JN(t,n._query).then(i=>new $h(e,r,n,i))}(this._delegate),t.then(r=>new Cx(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ak(e),r=xk(e,i=>new Cx(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wk(this._delegate,t,r)}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?cg.getInstance(this.firestore,e):null))}}class TV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new bE(this._firestore,r))})}isEqual(e){return _k(this._delegate,e._delegate)}}class sy extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ha(this.firestore,e):null}doc(e){try{return new ha(this.firestore,void 0===e?Tb(this._delegate):Tb(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function dV(n,e){const t=mn(n.firestore,vr),r=Tb(n),i=Ub(n.converter,e);return iy(t,[Nb(ag(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ha(this.firestore,t))}isEqual(e){return zN(this._delegate,e._delegate)}withConverter(e){return new sy(this.firestore,this._delegate.withConverter(e?cg.getInstance(this.firestore,e):null))}}function dg(n){return mn(n,yr)}class bx{constructor(...e){this._delegate=new td(...e)}static documentId(){return new bx(Tn.keyField().canonicalString())}isEqual(e){return(e=(0,Q.m9)(e))instanceof td&&this._delegate._internalPath.isEqual(e._internalPath)}}class hg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _V(){return new hx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hg(e)}static delete(){const e=function mV(){return new _E("deleteField")}();return e._methodName="FieldValue.delete",new hg(e)}static arrayUnion(...e){const t=function yV(...n){return new HL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new hg(t)}static arrayRemove(...e){const t=function vV(...n){return new WL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new hg(t)}static increment(e){const t=function wV(n){return new GL("increment",n)}(e);return t._methodName="FieldValue.increment",new hg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SV={Firestore:Dk,GeoPoint:Rb,Timestamp:Qn,Blob:IE,Transaction:Tk,WriteBatch:Sk,DocumentReference:ha,DocumentSnapshot:CE,Query:Es,QueryDocumentSnapshot:bE,QuerySnapshot:Cx,CollectionReference:sy,FieldPath:bx,FieldValue:hg,setLogLevel:function DV(n){!function jI(n){nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function xV(n){(function AV(n,e){n.INTERNAL.registerComponent(new Wd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SV)))})(n,(e,t)=>new Dk(e,t,new bV)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(X0.Z);var RV=F(6451),$b=F(5363),MV=F(6063);class NV extends zi.x{constructor(e=1/0,t=1/0,r=MV.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var kV=F(3099);function Rk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,kV.B)({connector:()=>new NV(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Mk(n,e){return(0,Ps.m)(e)?gr(()=>n,e):gr(()=>n)}var Dx=F(9468),Ml=F(259);class Wh{constructor(e){return e}}class DE{constructor(){return(0,Ml.C6)()}}const Tx=new f.OlP("angularfire2._apps"),OV={provide:Wh,useFactory:function PV(n){return n&&1===n.length?n[0]:new Wh((0,Ml.Mq)())},deps:[[new f.FiY,Tx]]},FV={provide:DE,deps:[[new f.FiY,Tx]]};function LV(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Wh(r)}}let VV=(()=>{class n{constructor(t){(0,Ml.KN)("angularfire",Jt.q4.full,"core"),(0,Ml.KN)("angularfire",Jt.q4.full,"app"),(0,Ml.KN)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[OV,FV]}),n})();function UV(n,...e){return{ngModule:VV,providers:[{provide:Tx,useFactory:LV(n),multi:!0,deps:[f.R0b,f.zs3,Jt.HU,...e]}]}}const BV=(0,Jt.u3)(Ml.ZF,!0),Sx=new Map,Nk={activated:!1,tokenObservers:[]},$V={initialized:!1,enabled:!1};function Bi(n){return Sx.get(n)||Object.assign({},Nk)}function jb(){return $V}class qV{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Q.BH,yield function ZV(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Q.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Is=new Q.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Pk(n){if(!Bi(n).activated)throw Is.create("use-before-activation",{appName:n.name})}function Rx(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Is.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Is.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Is.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}}),Mx.apply(this,arguments)}function XV(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const TE="firebase-app-check-store";let Gb=null;function Fk(){return Gb||(Gb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Is.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(TE,{keyPath:"compositeKey"})}}catch(t){e(Is.create("storage-open",{originalErrorMessage:t?.message}))}}),Gb)}function Nx(){return Nx=(0,ye.Z)(function*(n,e){const r=(yield Fk()).transaction(TE,"readwrite"),a=r.objectStore(TE).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(Is.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),Nx.apply(this,arguments)}const SE=new Ls.Yd("@firebase/app-check");function Ox(n,e){return(0,Q.hl)()?function nU(n,e){return function Lk(n,e){return Nx.apply(this,arguments)}(function Uk(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{SE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Bk(){return jb().enabled}function $k(){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,ye.Z)(function*(){const n=jb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Lx.apply(this,arguments)}const uU={error:"UNKNOWN_ERROR"};function lU(n){return Q.US.encodeString(JSON.stringify(n),!1)}function zb(n){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,ye.Z)(function*(n,e=!1){const t=n.app;Pk(t);const r=Bi(t);let a,i=r.token;if(i&&!oy(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(oy(m)?i=m:yield Ox(t,void 0))}if(!e&&i&&oy(i))return{token:i.token};let h,l=!1;if(Bk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Rx(XV(t,yield $k()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Ox(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Bi(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?SE.warn(m.message):SE.error(m),a=m}return i?a?h=oy(i)?{token:i.token,internalError:a}:Wk(a):(h={token:i.token},r.token=i,yield Ox(t,i)):h=Wk(a),l&&Hk(t,h),h}),Vx.apply(this,arguments)}function Bx(n,e){const t=Bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jk(n){const{app:e}=n,t=Bi(e);let r=t.tokenRefresher;r||(r=function cU(n){const{app:e}=n;return new qV((0,ye.Z)(function*(){let r;if(r=Bi(e).token?yield zb(n,!0):yield zb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Hk(n,e){const t=Bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function oy(n){return n.expireTimeMillis-Date.now()>0}function Wk(n){return{token:lU(uU),error:n}}class dU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Bi(this.app);for(const t of e)Bx(this.app,t.next);return Promise.resolve()}}const Xk="app-check-internal";!function DU(){(0,Hn._registerComponent)(new Wd.wA("app-check",n=>function hU(n,e){return new dU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Xk).initialize()})),(0,Hn._registerComponent)(new Wd.wA(Xk,n=>function fU(n){return{getToken:e=>zb(n,e),addTokenListener:e=>function Ux(n,e,t,r){const{app:i}=n,a=Bi(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&oy(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),jk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>jk(n))}(n,"INTERNAL",e),removeTokenListener:e=>Bx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hn.registerVersion)("@firebase/app-check","0.6.3")}();class fg{constructor(){return(0,Jt.vb)("app-check")}}typeof window<"u"&&window,F(9260);const eP=new f.OlP("angularfire2.auth.use-emulator"),tP=new f.OlP("angularfire2.auth.settings"),nP=new f.OlP("angularfire2.auth.tenant-id"),rP=new f.OlP("angularfire2.auth.langugage-code"),iP=new f.OlP("angularfire2.auth.use-device-language"),sP=new f.OlP("angularfire.auth.persistence"),oP=(n,e,t,r,i,a,l,h)=>(0,mo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))m.settings[v]=D;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let Gx=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,k,j){const Z=new zi.x,fe=dt(void 0).pipe((0,$b.Q)(l.outsideAngular),gr(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,pt.U)(()=>(0,mo.on)(t,a,r)),(0,pt.U)(Ce=>oP(Ce,a,h,v,D,S,m,k)),Rk({bufferSize:1,refCount:!1}));if(Mo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{fe.pipe(Y()).subscribe();const St=fe.pipe(gr(gt=>gt.getRedirectResult().then(Lt=>Lt,()=>null)),Jt.iC,Rk({bufferSize:1,refCount:!1})),At=fe.pipe(gr(gt=>new zr.y(Lt=>({unsubscribe:a.runOutsideAngular(()=>gt.onAuthStateChanged(Zt=>Lt.next(Zt),Zt=>Lt.error(Zt),()=>Lt.complete()))})))),ht=fe.pipe(gr(gt=>new zr.y(Lt=>({unsubscribe:a.runOutsideAngular(()=>gt.onIdTokenChanged(Zt=>Lt.next(Zt),Zt=>Lt.error(Zt),()=>Lt.complete()))}))));this.authState=St.pipe(Mk(At),(0,Dx.R)(l.outsideAngular),(0,$b.Q)(l.insideAngular)),this.user=St.pipe(Mk(ht),(0,Dx.R)(l.outsideAngular),(0,$b.Q)(l.insideAngular)),this.idToken=this.user.pipe(gr(gt=>gt?(0,yn.D)(gt.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(gr(gt=>gt?(0,yn.D)(gt.getIdTokenResult()):dt(null))),this.credential=(0,RV.T)(St,Z,this.authState.pipe(Di(gt=>!gt))).pipe((0,pt.U)(gt=>gt?.user?gt:null),(0,Dx.R)(l.outsideAngular),(0,$b.Q)(l.insideAngular))}return(0,mo.pX)(this,fe,a,{spy:{apply:(Ce,St,At)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&At.then(ht=>Z.next(ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(mo.Dh),f.LFG(mo.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Jt.HU),f.LFG(eP,8),f.LFG(tP,8),f.LFG(nP,8),f.LFG(rP,8),f.LFG(iP,8),f.LFG(sP,8),f.LFG(fg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function aP(n,e){return function MU(n,e=QT.z){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function zx(n,e){return aP(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function Zb(n,e){return zx(n,e).pipe(ho(void 0),uv(),(0,pt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function uP(n,e,t){return Zb(n,t).pipe(wt((r,i)=>function kU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function Q0(n,e=oo.y){return n=n??XT,(0,jn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Ir.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}(),(0,pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function qx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function lP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ho(void 0),uv(),Di(([r,i])=>i.length>0||!r),(0,pt.U)(([r,i])=>i),Jt.iC)}auditTrail(e){return this.stateChanges(e).pipe(wt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lP(e);return uP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jt.iC)}valueChanges(e={}){return zx(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Jt.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(Jt.iC)}add(e){return this.ref.add(e)}doc(e){return new dP(this.ref.doc(e),this.afs)}}class dP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=hP(r,t);return new cP(i,a,this.afs)}snapshotChanges(){return function NU(n,e){return aP(n,e).pipe(ho(void 0),uv(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Jt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(Jt.iC)}}class OU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zb(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Di(t=>t.length>0),Jt.iC):Zb(this.query,this.afs.schedulers.outsideAngular).pipe(Jt.iC)}auditTrail(e){return this.stateChanges(e).pipe(wt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lP(e);return uP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jt.iC)}valueChanges(e={}){return zx(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Jt.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(Jt.iC)}}const FU=new f.OlP("angularfire2.enableFirestorePersistence"),LU=new f.OlP("angularfire2.firestore.persistenceSettings"),VU=new f.OlP("angularfire2.firestore.settings"),UU=new f.OlP("angularfire2.firestore.use-emulator");function hP(n,e=(t=>t)){return{query:e(n),ref:n}}let fP=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,k,j,Z,fe,Ce,St,At){this.schedulers=m;const ht=(0,mo.on)(t,h,r),gt=D;S&&oP(ht,h,k,Z,fe,Ce,j,St),[this.firestore,this.persistenceEnabled$]=(0,mo.cc)(`${ht.name}.firestore`,"AngularFirestore",ht.name,()=>{const Lt=h.runOutsideAngular(()=>ht.firestore());if(a&&Lt.settings(a),gt&&Lt.useEmulator(...gt),i&&!Mo(l)){const Zt=()=>{try{return(0,yn.D)(Lt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Fr){return typeof console<"u"&&console.warn(Fr),dt(!1)}};return[Lt,h.runOutsideAngular(Zt)]}return[Lt,dt(!1)]},[a,gt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=hP(i,r),h=this.schedulers.ngZone.run(()=>a);return new cP(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new OU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new dP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(mo.Dh),f.LFG(mo.xv,8),f.LFG(FU,8),f.LFG(VU,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Jt.HU),f.LFG(LU,8),f.LFG(UU,8),f.LFG(Gx,8),f.LFG(eP,8),f.LFG(tP,8),f.LFG(nP,8),f.LFG(rP,8),f.LFG(iP,8),f.LFG(sP,8),f.LFG(fg,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zx=(()=>{class n{constructor(t){this.afs=t}addsafari(t){return t.id=this.afs.createId(),this.afs.collection("/mycol").add(t)}getAllsafari(){return this.afs.collection("/mycol").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fP))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),pg=(()=>{class n extends pP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Nl=new f.OlP("NgValueAccessor"),jU={provide:Nl,useExisting:(0,f.Gpc)(()=>ay),multi:!0},WU=new f.OlP("CompositionEventMode");let ay=(()=>{class n extends pP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function HU(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(WU,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([jU]),f.qOj]}),n})();const rs=new f.OlP("NgValidators"),zh=new f.OlP("NgAsyncValidators");function DP(n){return null!=n}function TP(n){return(0,f.QGY)(n)?(0,yn.D)(n):n}function SP(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function AP(n,e){return e.map(t=>t(n))}function xP(n){return n.map(e=>function qU(n){return!n.validate}(e)?e:t=>e.validate(t))}function Kx(n){return null!=n?function RP(n){if(!n)return null;const e=n.filter(DP);return 0==e.length?null:function(t){return SP(AP(t,e))}}(xP(n)):null}function Yx(n){return null!=n?function MP(n){if(!n)return null;const e=n.filter(DP);return 0==e.length?null:function(t){return function BU(...n){const e=(0,gs.jO)(n),{args:t,keys:r}=ks(n),i=new zr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,ao.Xf)(t[D]).subscribe((0,Ir.x)(a,k=>{S||(S=!0,v--),h[D]=k},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?La(r,h):h),a.complete())}))}});return e?i.pipe(Fu(e)):i}(AP(t,e).map(TP)).pipe((0,pt.U)(SP))}}(xP(n)):null}function NP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Qx(n){return n?Array.isArray(n)?n:[n]:[]}function Yb(n,e){return Array.isArray(n)?n.includes(e):n===e}function OP(n,e){const t=Qx(e);return Qx(n).forEach(i=>{Yb(t,i)||t.push(i)}),t}function FP(n,e){return Qx(e).filter(t=>!Yb(n,t))}class LP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Kx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Cs extends LP{get formDirective(){return null}get path(){return null}}class qh extends LP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Qb=(()=>{class n extends VP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(qh,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),Xb=(()=>{class n extends VP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cs,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const AE="VALID",eD="INVALID",uy="PENDING",xE="DISABLED";function tR(n){return(tD(n)?n.validators:n)||null}function BP(n){return Array.isArray(n)?Kx(n):n||null}function nR(n,e){return(tD(e)?e.asyncValidators:n)||null}function $P(n){return Array.isArray(n)?Yx(n):n||null}function tD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class WP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=BP(this._rawValidators),this._composedAsyncValidatorFn=$P(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===AE}get invalid(){return this.status===eD}get pending(){return this.status==uy}get disabled(){return this.status===xE}get enabled(){return this.status!==xE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=BP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=$P(e)}addValidators(e){this.setValidators(OP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FP(e,this._rawAsyncValidators))}hasValidator(e){return Yb(this._rawValidators,e)}hasAsyncValidator(e){return Yb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=uy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=AE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===AE||this.status===uy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xE:AE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=uy,this._hasOwnPendingAsyncValidator=!0;const t=TP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?xE:this.errors?eD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uy)?uy:this._anyControlsHaveStatus(eD)?eD:AE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class rR extends WP{constructor(e,t,r){super(tR(t),nR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function HP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function jP(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function RE(n,e){iR(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function nB(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&GP(n,e)})}(n,e),function iB(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function rB(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&GP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tB(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function iD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iR(n,e){const t=function kP(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(NP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function PP(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(NP(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();iD(e._rawValidators,i),iD(e._rawAsyncValidators,i)}function GP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const lB={provide:Cs,useExisting:(0,f.Gpc)(()=>ly)},ME=(()=>Promise.resolve())();let ly=(()=>{class n extends Cs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new rR({},Kx(t),Yx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ME.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),RE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ME.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ME.then(()=>{const r=this._findContainer(t.path),i=new rR({});(function zP(n,e){iR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ME.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ME.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function ZP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(rs,10),f.Y36(zh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([lB]),f.qOj]}),n})();function KP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function YP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const QP=class extends WP{constructor(e=null,t,r){super(tR(t),nR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=YP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){YP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},hB={provide:qh,useExisting:(0,f.Gpc)(()=>NE)},eO=(()=>Promise.resolve())();let NE=(()=>{class n extends qh{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new QP,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function oR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===ay?t=a:function aB(n){return Object.getPrototypeOf(n.constructor)===pg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function sR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){RE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){eO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);eO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function nD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cs,9),f.Y36(rs,10),f.Y36(zh,10),f.Y36(Nl,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([hB]),f.qOj,f.TTD]}),n})(),oD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),nO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),FB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[nO]}),n})(),LB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[FB]}),n})(),UB=(()=>{class n{constructor(t){this.data=t,this.safari={url:"",title:"",id:""}}ngOnInit(){}add(){""!=this.safari.title&&""!=this.safari.url?this.data.addsafari(this.safari).finally(()=>{alert("Safari added")}).then(()=>{this.safari.title="",this.safari.url=""}):alert("Please Fill All inputs")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-addsafari"]],decls:23,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","text","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"addsafari works!"),f.qZA(),f.TgZ(2,"div",0)(3,"div",1),f._UZ(4,"div",2),f.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"form")(9,"div",6)(10,"h4",7),f._uU(11,"Add Book"),f.qZA()(),f.TgZ(12,"div",6)(13,"label",8),f._uU(14,"Book Title"),f.qZA(),f.TgZ(15,"input",9),f.NdJ("ngModelChange",function(a){return r.safari.title=a}),f.qZA()(),f.TgZ(16,"div",6)(17,"label",10),f._uU(18,"Book Link"),f.qZA(),f.TgZ(19,"input",11),f.NdJ("ngModelChange",function(a){return r.safari.url=a}),f.qZA()(),f.TgZ(20,"button",12),f.NdJ("click",function(){return r.add()}),f._uU(21,"Login"),f.qZA()()()()(),f._UZ(22,"div",2),f.qZA()()),2&t&&(f.xp6(15),f.Q6J("ngModel",r.safari.title),f.xp6(4),f.Q6J("ngModel",r.safari.url))},dependencies:[oD,ay,Qb,Xb,NE,ly]}),n})();function BB(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",12),f._uU(2,"Addbook"),f.qZA()())}function $B(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",13),f._uU(2,"BookList"),f.qZA()())}function jB(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",14),f._uU(2,"Login"),f.qZA()())}function HB(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li",7)(1,"a",15),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.logout())}),f._uU(2,"Logout"),f.qZA()()}}let wO=(()=>{class n{constructor(){this.login=!1}ngOnInit(){localStorage.getItem("token")&&(this.login=!0)}logout(){localStorage.clear(),this.login=!1,console.log(this.login)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:19,vars:4,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],["routerLink","dashboard",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/dashboard",1,"nav-link","active"],["routerLink","/dashboard",1,"nav-link","active"],["class","nav-item",4,"ngIf"],[1,"navbar-nav","mb-2","mb-lg-0"],["routerLink","/addbook",1,"nav-link","active"],["routerLink","/booklist",1,"nav-link","active"],["aria-current","page","routerLink","/login",1,"nav-link","active"],["aria-current","page","routerLink","/dashboard",1,"nav-link","active",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Safari"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"Home"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f._uU(13,"About"),f.qZA()(),f.YNc(14,BB,3,0,"li",10),f.YNc(15,$B,3,0,"li",10),f.qZA(),f.TgZ(16,"ul",11),f.YNc(17,jB,3,0,"li",10),f.YNc(18,HB,3,0,"li",10),f.qZA()()()()),2&t&&(f.xp6(14),f.Q6J("ngIf",r.login),f.xp6(1),f.Q6J("ngIf",r.login),f.xp6(2),f.Q6J("ngIf",!r.login),f.xp6(1),f.Q6J("ngIf",r.login))},dependencies:[fm,cr]}),n})();function WB(n,e){if(1&n&&(f.TgZ(0,"tr")(1,"th",3),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td")(8,"button",4),f._uU(9,"Edit"),f.qZA(),f.TgZ(10,"button",5),f._uU(11,"Delete"),f.qZA()()()),2&n){const t=e.$implicit,r=e.index;f.xp6(2),f.Oqu(r),f.xp6(2),f.hij("",t.title,"}"),f.xp6(2),f.hij("",t.url,"}")}}let GB=(()=>{class n{constructor(t){this.data=t,this.safari=[]}ngOnInit(){this.getAllsafaris()}getAllsafaris(){this.data.getAllsafari().subscribe(t=>{this.safari=t.map(r=>{const i=r.payload.doc.data();return i.id=r.payload.doc.id,i}),console.log(this.safari)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-book-list"]],decls:32,vars:1,consts:[[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-primary"],[1,"btn","btn-danger"]],template:function(t,r){1&t&&(f._UZ(0,"app-navbar"),f.TgZ(1,"table",0)(2,"thead")(3,"tr")(4,"th",1),f._uU(5,"#"),f.qZA(),f.TgZ(6,"th",1),f._uU(7,"Book Title"),f.qZA(),f.TgZ(8,"th",1),f._uU(9,"Book Url"),f.qZA(),f.TgZ(10,"th",1),f._uU(11,"Action"),f.qZA()()(),f.TgZ(12,"tbody"),f.YNc(13,WB,12,3,"tr",2),f.TgZ(14,"tr")(15,"th",3),f._uU(16,"2"),f.qZA(),f.TgZ(17,"td"),f._uU(18,"Jacob"),f.qZA(),f.TgZ(19,"td"),f._uU(20,"Thornton"),f.qZA(),f.TgZ(21,"td"),f._uU(22,"@fat"),f.qZA()(),f.TgZ(23,"tr")(24,"th",3),f._uU(25,"3"),f.qZA(),f.TgZ(26,"td"),f._uU(27,"Larry"),f.qZA(),f.TgZ(28,"td"),f._uU(29,"the Bird"),f.qZA(),f.TgZ(30,"td"),f._uU(31,"@twitter"),f.qZA()()()()),2&t&&(f.xp6(13),f.Q6J("ngForOf",r.safari))},dependencies:[as,wO],styles:["button[_ngcontent-%COMP%]{margin-left:4px}"]}),n})(),fR=(()=>{class n{constructor(t,r){this.Fireauth=t,this.router=r}login(t,r){this.Fireauth.signInWithEmailAndPassword(t,r).then(()=>{localStorage.setItem("token","true"),this.router.navigate(["dashboard"])},i=>{alert(i.message),this.router.navigate(["/login"])})}register(t,r){this.Fireauth.createUserWithEmailAndPassword(t,r).then(()=>{alert("Registerd Succesfully"),this.router.navigate(["/login"])},i=>{alert(i.message),this.router.navigate(["/register"])})}logout(){this.Fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Gx),f.LFG(Br))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zB(n,e){if(1&n&&(f.TgZ(0,"div",3)(1,"div",10)(2,"div",6)(3,"h5",7),f._uU(4),f.qZA(),f.TgZ(5,"a",11),f._uU(6,"Open"),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(4),f.Oqu(t.title),f.xp6(1),f.s9C("href",t.url,f.LSH)}}const qB=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}login(){""!=this.email?"safariapp07@gmail.com"==this.email?""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Please enter email"):alert("Please enter valid email"):alert("Please enter email")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:23,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["id","emailHelp",1,"form-text"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),f._uU(9,"Login"),f.qZA()(),f.TgZ(10,"div",6)(11,"label",8),f._uU(12,"Email address"),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(a){return r.email=a}),f.qZA(),f.TgZ(14,"div",10),f._uU(15,"We'll never share your email with anyone else."),f.qZA()(),f.TgZ(16,"div",6)(17,"label",11),f._uU(18,"Password"),f.qZA(),f.TgZ(19,"input",12),f.NdJ("ngModelChange",function(a){return r.password=a}),f.qZA()(),f.TgZ(20,"button",13),f.NdJ("click",function(){return r.login()}),f._uU(21,"Login"),f.qZA()()()()(),f._UZ(22,"div",2),f.qZA()()),2&t&&(f.xp6(13),f.Q6J("ngModel",r.email),f.xp6(6),f.Q6J("ngModel",r.password))},dependencies:[oD,ay,Qb,Xb,NE,ly]}),n})()},{path:"dashboard",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.afs=r,this.data=i,this.safari=[],this.id="",this.title="",this.url="",this.login=!1,this.img_url=""}ngOnInit(){this.getAllsafaris(),localStorage.getItem("token")&&(this.login=!0)}register(){this.auth.logout()}logout(){localStorage.clear()}getAllsafaris(){this.data.getAllsafari().subscribe(t=>{this.safari=t.map(r=>{const i=r.payload.doc.data();return i.id=r.payload.doc.id,i}),console.log(this.safari)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fR),f.Y36(fP),f.Y36(Zx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:64,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],["class","col-md-3 mt-3",4,"ngFor","ngForOf"],[1,"col-md-3","mt-3"],[1,"card","shadow"],["src","...","alt","...",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary"],[1,"card","shadow",2,"height","150px !important"],[1,"btn","btn-primary",3,"href"]],template:function(t,r){1&t&&(f._UZ(0,"app-navbar"),f.TgZ(1,"div",0)(2,"div",1),f.YNc(3,zB,7,2,"div",2),f.TgZ(4,"div",3)(5,"div",4),f._UZ(6,"img",5),f.TgZ(7,"div",6)(8,"h5",7),f._uU(9,"Card title"),f.qZA(),f.TgZ(10,"p",8),f._uU(11,"Some quick example text to build on the card title and make up the bulk of the card's content."),f.qZA(),f.TgZ(12,"a",9),f._uU(13,"Go somewhere"),f.qZA()()()(),f.TgZ(14,"div",3)(15,"div",4),f._UZ(16,"img",5),f.TgZ(17,"div",6)(18,"h5",7),f._uU(19,"Card title"),f.qZA(),f.TgZ(20,"p",8),f._uU(21,"Some quick example text to build on the card title and make up the bulk of the card's content."),f.qZA(),f.TgZ(22,"a",9),f._uU(23,"Go somewhere"),f.qZA()()()(),f.TgZ(24,"div",3)(25,"div",4),f._UZ(26,"img",5),f.TgZ(27,"div",6)(28,"h5",7),f._uU(29,"Card title"),f.qZA(),f.TgZ(30,"p",8),f._uU(31,"Some quick example text to build on the card title and make up the bulk of the card's content."),f.qZA(),f.TgZ(32,"a",9),f._uU(33,"Go somewhere"),f.qZA()()()(),f.TgZ(34,"div",3)(35,"div",4),f._UZ(36,"img",5),f.TgZ(37,"div",6)(38,"h5",7),f._uU(39,"Card title"),f.qZA(),f.TgZ(40,"p",8),f._uU(41,"Some quick example text to build on the card title and make up the bulk of the card's content."),f.qZA(),f.TgZ(42,"a",9),f._uU(43,"Go somewhere"),f.qZA()()()(),f.TgZ(44,"div",3)(45,"div",4),f._UZ(46,"img",5),f.TgZ(47,"div",6)(48,"h5",7),f._uU(49,"Card title"),f.qZA(),f.TgZ(50,"p",8),f._uU(51,"Some quick example text to build on the card title and make up the bulk of the card's content."),f.qZA(),f.TgZ(52,"a",9),f._uU(53,"Go somewhere"),f.qZA()()()(),f.TgZ(54,"div",3)(55,"div",4),f._UZ(56,"img",5),f.TgZ(57,"div",6)(58,"h5",7),f._uU(59,"Card title"),f.qZA(),f.TgZ(60,"p",8),f._uU(61,"Some quick example text to build on the card title and make up the bulk of the card's content."),f.qZA(),f.TgZ(62,"a",9),f._uU(63,"Go somewhere"),f.qZA()()()()()()),2&t&&(f.xp6(3),f.Q6J("ngForOf",r.safari))},dependencies:[as,wO]}),n})()},{path:"register",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}register(){""!=this.email&&""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("Please enter email")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:29,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["id","emailHelp",1,"form-text"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),f._uU(9,"Login"),f.qZA()(),f.TgZ(10,"div",6)(11,"label",8),f._uU(12,"Email address"),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(a){return r.email=a}),f.qZA(),f.TgZ(14,"div",10),f._uU(15,"We'll never share your email with anyone else."),f.qZA()(),f.TgZ(16,"div",6)(17,"label",11),f._uU(18,"Password"),f.qZA(),f.TgZ(19,"input",12),f.NdJ("ngModelChange",function(a){return r.password=a}),f.qZA()(),f.TgZ(20,"button",13),f.NdJ("click",function(){return r.register()}),f._uU(21,"Register"),f.qZA(),f.TgZ(22,"div",14)(23,"div",15)(24,"a",16),f._uU(25,"Have an Account> "),f.TgZ(26,"span",17),f._uU(27,"Login"),f.qZA()()()()()()()(),f._UZ(28,"div",2),f.qZA()()),2&t&&(f.xp6(13),f.Q6J("ngModel",r.email),f.xp6(6),f.Q6J("ngModel",r.password))},dependencies:[oD,ay,Qb,Xb,NE,ly]}),n})()},{path:"addbook",component:UB},{path:"booklist",component:GB}];let ZB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[_m.forRoot(qB),_m]}),n})(),KB=(()=>{class n{constructor(){this.title="safari-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],features:[f._Bn([])],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[qy]}),n})();const pR_firebase={projectId:"safariapp-70d71",appId:"1:771133664732:web:bd44d743798dc402ddf319",databaseURL:"https://safariapp-70d71-default-rtdb.firebaseio.com",storageBucket:"safariapp-70d71.appspot.com",locationId:"asia-south1",apiKey:"AIzaSyDSFM30lvAkgN5-AKVyRkBCEMcsOPu-MD8",authDomain:"safariapp-70d71.firebaseapp.com",messagingSenderId:"771133664732",measurementId:"G-7VV9LHG5J9"};var YB=F(2722);class gR{constructor(e){return e}}class aD{constructor(){return(0,Jt.vb)("auth")}}const mR=new f.OlP("angularfire2.auth-instances");function XB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gR(r)}}const JB={provide:aD,deps:[[new f.FiY,mR]]},e2={provide:gR,useFactory:function QB(n,e){const t=(0,Jt.JM)("auth",n,e);return t&&new gR(t)},deps:[[new f.FiY,mR],Wh]};let t2=(()=>{class n{constructor(){(0,Ml.KN)("angularfire",Jt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[e2,JB]}),n})();function n2(n,...e){return{ngModule:t2,providers:[{provide:mR,useFactory:XB(n),multi:!0,deps:[f.R0b,f.zs3,Jt.HU,DE,[new f.FiY,fg],...e]}]}}const r2=(0,Jt.u3)(YB.n,!0),IO="@firebase/database";let _R="";class s2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Q.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class o2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const bO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new s2(e)}}catch{}return new o2},mg=bO("localStorage"),yR=bO("sessionStorage"),cy=new Ls.Yd("@firebase/database"),DO=function(){let n=1;return function(){return n++}}(),TO=function(n){const e=(0,Q.dS)(n),t=new Q.gQ;t.update(e);const r=t.digest();return Q.US.encodeByteArray(r)},kE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=kE.apply(null,r):e+="object"==typeof r?(0,Q.Wl)(r):r,e+=" "}return e};let _g=null,SO=!0;const Ri=function(...n){if(!0===SO&&(SO=!1,null===_g&&!0===yR.get("logging_enabled")&&function(n,e){(0,Q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cy.logLevel=Ls.in.VERBOSE,_g=cy.log.bind(cy),e&&yR.set("logging_enabled",!0)):"function"==typeof n?_g=n:(_g=null,yR.remove("logging_enabled"))}(!0)),_g){const e=kE.apply(null,n);_g(e)}},PE=function(n){return function(...e){Ri(n,...e)}},vR=function(...n){const e="FIREBASE INTERNAL ERROR: "+kE(...n);cy.error(e)},kl=function(...n){const e=`FIREBASE FATAL ERROR: ${kE(...n)}`;throw cy.error(e),new Error(e)},is=function(...n){const e="FIREBASE WARNING: "+kE(...n);cy.warn(e)},uD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zh="[MIN_NAME]",rd="[MAX_NAME]",yg=function(n,e){if(n===e)return 0;if(n===Zh||e===rd)return-1;if(e===Zh||n===rd)return 1;{const t=MO(n),r=MO(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},l2=function(n,e){return n===e?0:n<e?-1:1},OE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Q.Wl)(e))},wR=function(n){if("object"!=typeof n||null===n)return(0,Q.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Q.Wl)(e[r]),t+=":",t+=wR(n[e[r]]);return t+="}",t},xO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const RO=function(n){(0,Q.hu)(!uD(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let k=parseInt(D.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},f2=new RegExp("^-?(0*)\\d{1,10}$"),MO=function(n){if(f2.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dy=function(n){try{n()}catch(e){setTimeout(()=>{throw is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},FE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class _2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class y2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ri("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',is(e)}}let LE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const FO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,UO="websocket",BO="long_polling";class IR{constructor(e,t,r,i,a=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $O(n,e,t){let r;if((0,Q.hu)("string"==typeof e,"typeof type must == string"),(0,Q.hu)("object"==typeof t,"typeof params must == object"),e===UO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==BO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function v2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class w2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Q.p$)(this.counters_)}}const CR={},bR={};function DR(n){const e=n.toString();return CR[e]||(CR[e]=new w2),CR[e]}class I2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Kh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=PE(e),this.stats_=DR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),$O(t,BO,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new I2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TR((...a)=>{const[l,h,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&FO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kh.forceAllow_=!0}static forceDisallow(){Kh.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!Kh.forceAllow_&&(Kh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Q.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Q.h$)(t),i=xO(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Q.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class TR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=DO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=TR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ri("frame writing exception"),h.stack&&Ri(h.stack),Ri(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ri("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,Q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ri("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let cD=null;typeof MozWebSocket<"u"?cD=MozWebSocket:typeof WebSocket<"u"&&(cD=WebSocket);let hy=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=PE(this.connId),this.stats_=DR(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,Q.Yr)()&&typeof location<"u"&&location.hostname&&FO.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),$O(t,UO,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mg.set("previous_websocket_failure",!0);try{let i;if((0,Q.Yr)()){i={headers:{"User-Agent":`Firebase/5/${_R}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new cD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==cD&&!n.forceDisallow_}static previouslyFailed(){return mg.isInMemoryStorage||!0===mg.get("previous_websocket_failure")}markConnectionHealthy(){mg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Q.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,Q.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=xO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),ZO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Kh,hy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hy&&hy.isAvailable();let i=r&&!hy.previouslyFailed();if(t.webSocketOnly&&(r||is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class t1{constructor(e,t,r,i,a,l,h,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=PE("c:"+this.id+":"),this.transportManager_=new ZO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=FE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=OE("t",e),r=OE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=OE("t",e),r=OE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=OE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?vR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),FE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):FE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class n1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class r1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,Q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class dD extends r1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dD}getInitialEvent(e){return(0,Q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Un{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Un("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Yh(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Un(n.pieces_,e)}function AR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function VE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function o1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Un(e,0)}function Ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Un)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Un(t,0)}function un(n){return n.pieceNum_>=n.pieces_.length}function bs(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return bs(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function xR(n,e){if(Yh(n)!==Yh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function fa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Yh(n)>Yh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class G2{constructor(e,t){this.errorPrefix_=t,this.parts_=VE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Q.ug)(this.parts_[r]);a1(this)}}function a1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vg(n))}function vg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RR extends r1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RR}getInitialEvent(e){return(0,Q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const UE=1e3;let fD,wg=(()=>{class n extends n1{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=PE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=UE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&dD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,Q.Wl)(l)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new Q.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Q.r3)(t,"w")){const i=(0,Q.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Q.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Q.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):vR("Unrecognized action received from server: "+(0,Q.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=UE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=UE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=UE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(j){(0,Q.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(j)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Z]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);m?Ri("getToken() completed but was canceled"):(Ri("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Z&&Z.token,v=new t1(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{is(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(j){t.log_("Failed to get token: "+j),m||(t.repoInfo_.nodeAdmin&&is(j),D())}}})()}interrupt(t){Ri("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ri("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=UE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>wR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Un(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ri("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ri("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+_R.replace(/\./g,"-")]=1,(0,Q.uI)()?t["framework.cordova"]=1:(0,Q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=dD.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class hD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(Zh,e),i=new hn(Zh,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class c1 extends hD{static get __EMPTY_NODE(){return fD}static set __EMPTY_NODE(e){fD=e}compare(e,t){return yg(e.name,t.name)}isDefinedOn(e){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(rd,fD)}makePost(e,t){return(0,Q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,fD)}toString(){return".key"}}const Pl=new c1;class pD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let NR,pu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Hs.EMPTY_NODE,this.right=l??Hs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Hs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Hs{constructor(e,t=Hs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Hs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,pu.BLACK,null,null))}remove(e){return new Hs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pD(this.root_,null,this.comparator_,!0,e)}}function J2(n,e){return yg(n.name,e.name)}function MR(n,e){return yg(n,e)}Hs.EMPTY_NODE=new class X2{copy(e,t,r,i,a){return this}insert(e,t,r){return new pu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const d1=function(n){return"number"==typeof n?"number:"+RO(n):"string:"+n},h1=function(n){if(n.isLeafNode()){const e=n.val();(0,Q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(n===NR||n.isEmpty(),"priority of unexpected type.");(0,Q.hu)(n===NR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let f1,p1,g1,fy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),h1(this.priorityNode_)}static set __childrenNodeConstructor(t){f1=t}static get __childrenNodeConstructor(){return f1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return un(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Q.hu)(".priority"!==i||1===Yh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+d1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?RO(this.value_):this.value_,this.lazyHash_=TO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Q.hu)(a>=0,"Unknown leaf type: "+r),(0,Q.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const or=new class r$ extends hD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?yg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(rd,new fy("[PRIORITY-POST]",g1))}makePost(e,t){const r=p1(e);return new hn(t,new fy("[PRIORITY-POST]",r))}toString(){return".priority"}},i$=Math.log(2);class s${constructor(e){this.count=parseInt(Math.log(e+1)/i$,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gD=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,k;if(0===D)return null;if(1===D)return S=n[m],k=t?t(S):S,new pu(k,S.node,pu.BLACK,null,null);{const j=parseInt(D/2,10)+m,Z=i(m,j),fe=i(j+1,v);return S=n[j],k=t?t(S):S,new pu(k,S.node,pu.BLACK,Z,fe)}},h=function(m){let v=null,D=null,S=n.length;const k=function(Z,fe){const Ce=S-Z,St=S;S-=Z;const At=i(Ce+1,St),ht=n[Ce],gt=t?t(ht):ht;j(new pu(gt,ht.node,fe,null,At))},j=function(Z){v?(v.left=Z,v=Z):(D=Z,v=Z)};for(let Z=0;Z<m.count;++Z){const fe=m.nextBitIsOne(),Ce=Math.pow(2,m.count-(Z+1));fe?k(Ce,pu.BLACK):(k(Ce,pu.BLACK),k(Ce,pu.RED))}return D}(new s$(n.length));return new Hs(r||e,h)};let kR;const py={};class id{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Q.hu)(py&&or,"ChildrenNode.ts has not been loaded"),kR=kR||new id({".priority":py},{".priority":or}),kR}get(e){const t=(0,Q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hs?t:null}hasIndex(e){return(0,Q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Q.hu)(e!==Pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(hn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?gD(r,e.getCompare()):py;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new id(D,v)}addToIndexes(e,t){const r=(0,Q.UI)(this.indexes_,(i,a)=>{const l=(0,Q.DV)(this.indexSet_,a);if((0,Q.hu)(l,"Missing index implementation for "+a),i===py){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(hn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),gD(h,l.getCompare())}return py}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new hn(e.name,h))),m.insert(e,e.node)}});return new id(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Q.UI)(this.indexes_,i=>{if(i===py)return i;{const a=t.get(e.name);return a?i.remove(new hn(e.name,a)):i}});return new id(r,this.indexSet_)}}let BE,en=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&h1(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return BE||(BE=new n(new Hs(MR),null,id.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||BE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?BE:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Q.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?BE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,Q.hu)(".priority"!==an(t)||1===Yh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(or,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+d1(this.getPriority().val())+":"),this.forEachChild(or,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":TO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new hn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,hn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$E?-1:0}withIndex(t){if(t===Pl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(or),a=r.getIterator(or);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Pl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const $E=new class o$ extends en{constructor(){super(new Hs(MR),en.EMPTY_NODE,id.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}};function Pr(n,e=null){if(null===n)return en.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fy(n,Pr(e));if(n instanceof Array){let t=en.EMPTY_NODE;return Mi(n,(r,i)=>{if((0,Q.r3)(n,r)&&"."!==r.substring(0,1)){const a=Pr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Pr(e))}{const t=[];let r=!1;if(Mi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Pr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new hn(l,m)))}}),0===t.length)return en.EMPTY_NODE;const a=gD(t,J2,l=>l.name,MR);if(r){const l=gD(t,or.getCompare());return new en(a,Pr(e),new id({".priority":l},{".priority":or}))}return new en(a,Pr(e),id.Default)}}Object.defineProperties(hn,{MIN:{value:new hn(Zh,en.EMPTY_NODE)},MAX:{value:new hn(rd,$E)}}),c1.__EMPTY_NODE=en.EMPTY_NODE,fy.__childrenNodeConstructor=en,function e$(n){NR=n}($E),function n$(n){g1=n}($E),function t$(n){p1=n}(Pr);class PR extends hD{constructor(e){super(),this.indexPath_=e,(0,Q.hu)(!un(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?yg(e.name,t.name):a}makePost(e,t){const r=Pr(e),i=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,$E);return new hn(rd,e)}toString(){return VE(this.indexPath_,0).join("/")}}const OR=new class u$ extends hD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?yg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Pr(e);return new hn(t,r)}toString(){return".value"}};function HE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class LR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=or}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===or}copy(){const e=new LR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _1(n){const e={};if(n.isDefault())return e;let t;if(n.index_===or?t="$priority":n.index_===OR?t="$value":n.index_===Pl?t="$key":((0,Q.hu)(n.index_ instanceof PR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Q.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,Q.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,Q.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,Q.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,Q.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function y1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==or&&(e.i=n.index_.toString()),e}class _D extends n1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=PE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=_D.getListenId_(e,r),h={};this.listens_[l]=h;const m=_1(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,Q.DV)(this.listens_,l)===h){let k;k=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(k,null)}})}unlisten(e,t){const r=_D.getListenId_(e,t);delete this.listens_[r]}get(e){const t=_1(e._queryParams),r=e._path.toString(),i=new Q.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,Q.cI)(h.responseText)}catch{is("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&is("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class m${constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yD(){return{value:null,children:new Map}}function my(n,e,t){if(un(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,yD()),my(n.children.get(r),e=Jn(e),t)}}function $R(n,e,t){null!==n.value?t(e,n.value):function _$(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{$R(i,new Un(e.toString()+"/"+r),t)})}class y${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class E${constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new y$(e);const r=1e4+2e4*Math.random();FE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mi(e,(i,a)=>{a>0&&(0,Q.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),FE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pa||(pa={})),pa))();function WR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class vD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=pa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(un(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Un(e));return new vD(xn(),t,this.revert)}}return(0,Q.hu)(an(this.path)===e,"operationForChild called for unrelated child."),new vD(Jn(this.path),this.affectedTree,this.revert)}}class Eg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=pa.OVERWRITE}operationForChild(e){return un(this.path)?new Eg(this.source,xn(),this.snap.getImmediateChild(e)):new Eg(this.source,Jn(this.path),this.snap)}}class _y{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=pa.MERGE}operationForChild(e){if(un(this.path)){const t=this.children.subtree(new Un(e));return t.isEmpty()?null:t.value?new Eg(this.source,xn(),t.value):new _y(this.source,xn(),t)}return(0,Q.hu)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _y(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(un(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function zE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function D$(n,e,t){if(null==e.childName||null==t.childName)throw(0,Q.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function b$(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function wD(n,e){return{eventCache:n,serverCache:e}}function qE(n,e,t,r){return wD(new Qh(e,t,r),n.serverCache)}function w1(n,e,t,r){return wD(n.eventCache,new Qh(e,t,r))}function ED(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ig(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let GR;class ar{constructor(e,t=(()=>(GR||(GR=new Hs(l2)),GR))()){this.value=e,this.children=t}static fromObject(e){let t=new ar(null);return Mi(e,(r,i)=>{t=t.set(new Un(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(un(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=a?{path:Ar(new Un(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(un(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new ar(null)}}set(e,t){if(un(e))return new ar(t,this.children);{const r=an(e),a=(this.children.get(r)||new ar(null)).set(Jn(e),t),l=this.children.insert(r,a);return new ar(this.value,l)}}remove(e){if(un(e))return this.children.isEmpty()?new ar(null):new ar(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new ar(null):new ar(this.value,a)}return this}}get(e){if(un(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(un(e))return t;{const r=an(e),a=(this.children.get(r)||new ar(null)).setTree(Jn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new ar(this.value,l)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(un(e))return null;{const a=an(e),l=this.children.get(a);return l?l.findOnPath_(Jn(e),Ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,r){if(un(e))return this;{this.value&&r(t,this.value);const i=an(e),a=this.children.get(i);return a?a.foreachOnPath_(Jn(e),Ar(t,i),r):new ar(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class gu{constructor(e){this.writeTree_=e}static empty(){return new gu(new ar(null))}}function ZE(n,e,t){if(un(e))return new gu(new ar(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=bs(i,e);return a=a.updateChild(l,t),new gu(n.writeTree_.set(i,a))}{const i=new ar(t),a=n.writeTree_.setTree(e,i);return new gu(a)}}}function zR(n,e,t){let r=n;return Mi(t,(i,a)=>{r=ZE(r,Ar(e,i),a)}),r}function E1(n,e){if(un(e))return gu.empty();{const t=n.writeTree_.setTree(e,new ar(null));return new gu(t)}}function qR(n,e){return null!=Cg(n,e)}function Cg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(bs(t.path,e)):null}function I1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(or,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function Xh(n,e){if(un(e))return n;{const t=Cg(n,e);return new gu(null!=t?new ar(t):n.writeTree_.subtree(e))}}function ZR(n){return n.writeTree_.isEmpty()}function yy(n,e){return C1(xn(),n.writeTree_,e)}function C1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,Q.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=C1(Ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ar(n,".priority"),r)),t}}function ID(n,e){return A1(e,n)}function M$(n,e){if(n.snap)return fa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&fa(Ar(n.path,t),e))return!0;return!1}function k$(n){return n.visible}function b1(n,e,t){let r=gu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)fa(t,l)?(h=bs(t,l),r=ZE(r,h,a.snap)):fa(l,t)&&(h=bs(l,t),r=ZE(r,xn(),a.snap.getChild(h)));else{if(!a.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(fa(t,l))h=bs(t,l),r=zR(r,h,a.children);else if(fa(l,t))if(h=bs(l,t),un(h))r=zR(r,xn(),a.children);else{const m=(0,Q.DV)(a.children,an(h));if(m){const v=m.getChild(Jn(h));r=ZE(r,xn(),v)}}}}}return r}function D1(n,e,t,r,i){if(r||i){const a=Xh(n.visibleWrites,e);return!i&&ZR(a)?t:i||null!=t||qR(a,xn())?yy(b1(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(fa(v.path,e)||fa(e,v.path))},e),t||en.EMPTY_NODE):null}{const a=Cg(n.visibleWrites,e);if(null!=a)return a;{const l=Xh(n.visibleWrites,e);return ZR(l)?t:null!=t||qR(l,xn())?yy(l,t||en.EMPTY_NODE):null}}}function CD(n,e,t,r){return D1(n.writeTree,n.treePath,e,t,r)}function KR(n,e){return function P$(n,e,t){let r=en.EMPTY_NODE;const i=Cg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(or,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Xh(n.visibleWrites,e);return t.forEachChild(or,(l,h)=>{const m=yy(Xh(a,new Un(l)),h);r=r.updateImmediateChild(l,m)}),I1(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return I1(Xh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function T1(n,e,t,r){return function O$(n,e,t,r,i){(0,Q.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ar(e,t);if(qR(n.visibleWrites,a))return null;{const l=Xh(n.visibleWrites,a);return ZR(l)?i.getChild(t):yy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function bD(n,e){return function L$(n,e){return Cg(n.visibleWrites,e)}(n.writeTree,Ar(n.treePath,e))}function YR(n,e,t){return function F$(n,e,t,r){const i=Ar(e,t),a=Cg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?yy(Xh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function S1(n,e){return A1(Ar(n.treePath,e),n.writeTree)}function A1(n,e){return{treePath:n,writeTree:e}}class $${constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,HE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function jE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function gy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,Q.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,HE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const x1=new class j${getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class QR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Qh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return YR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ig(this.viewCache_),a=function B$(n,e,t,r,i,a){return function V$(n,e,t,r,i,a,l){let h;const m=Xh(n.visibleWrites,e),v=Cg(m,xn());if(null!=v)h=v;else{if(null==t)return[];h=yy(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),k=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let j=k.getNext();for(;j&&D.length<i;)0!==S(j,r)&&D.push(j),j=k.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function R1(n,e,t,r,i,a){const l=e.eventCache;if(null!=bD(r,t))return e;{let h,m;if(un(t))if((0,Q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Ig(e),S=KR(r,v instanceof en?v:en.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=CD(r,Ig(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=an(t);if(".priority"===v){(0,Q.hu)(1===Yh(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=T1(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Jn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const k=T1(r,t,l.getNode(),m);S=null!=k?l.getNode().getImmediateChild(v).updateChild(D,k):l.getNode().getImmediateChild(v)}else S=YR(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return qE(e,h,l.isFullyInitialized()||un(t),n.filter.filtersNodes())}}function DD(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(un(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const j=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),j,null)}else{const j=an(t);if(!m.isCompleteForPath(t)&&Yh(t)>1)return e;const Z=Jn(t),Ce=m.getNode().getImmediateChild(j).updateChild(Z,r);v=".priority"===j?D.updatePriority(m.getNode(),Ce):D.updateChild(m.getNode(),j,Ce,Z,x1,null)}const S=w1(e,v,m.isFullyInitialized()||un(t),D.filtersNodes());return R1(n,S,t,i,new QR(i,S,a),h)}function XR(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const D=new QR(i,e,a);if(un(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=qE(e,v,!0,n.filter.filtersNodes());else{const S=an(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=qE(e,v,h.isFullyInitialized(),h.isFiltered());else{const k=Jn(t),j=h.getNode().getImmediateChild(S);let Z;if(un(k))Z=r;else{const fe=D.getCompleteChild(S);Z=null!=fe?".priority"===AR(k)&&fe.getChild(o1(k)).isEmpty()?fe:fe.updateChild(k,r):en.EMPTY_NODE}m=j.equals(Z)?e:qE(e,n.filter.updateChild(h.getNode(),S,Z,k,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function M1(n,e){return n.eventCache.isCompleteForChild(e)}function N1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function JR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=un(t)?r:new ar(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,k)=>{if(D.hasChild(S)){const Z=N1(0,e.serverCache.getNode().getImmediateChild(S),k);m=DD(n,m,new Un(S),Z,i,a,l,h)}}),v.children.inorderTraversal((S,k)=>{const j=!e.serverCache.isCompleteForChild(S)&&null===k.value;if(!D.hasChild(S)&&!j){const fe=N1(0,e.serverCache.getNode().getImmediateChild(S),k);m=DD(n,m,new Un(S),fe,i,a,l,h)}}),m}function ej(n,e){const t=Ig(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!un(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function O1(n,e,t,r){e.type===pa.MERGE&&null!==e.source.queryId&&((0,Q.hu)(Ig(n.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(ED(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function G$(n,e,t,r,i){const a=new $$;let l,h;if(t.type===pa.OVERWRITE){const v=t;v.source.fromUser?l=XR(n,e,v.path,v.snap,r,i,a):((0,Q.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!un(v.path),l=DD(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===pa.MERGE){const v=t;v.source.fromUser?l=function q$(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const D=Ar(t,m);M1(e,an(D))&&(h=XR(n,h,D,v,i,a,l))}),r.foreach((m,v)=>{const D=Ar(t,m);M1(e,an(D))||(h=XR(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,Q.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=JR(n,e,v.path,v.children,r,i,h,a))}else if(t.type===pa.ACK_USER_WRITE){const v=t;l=v.revert?function Y$(n,e,t,r,i,a){let l;if(null!=bD(r,t))return e;{const h=new QR(r,e,i),m=e.eventCache.getNode();let v;if(un(t)||".priority"===an(t)){let D;if(e.serverCache.isFullyInitialized())D=CD(r,Ig(e));else{const S=e.serverCache.getNode();(0,Q.hu)(S instanceof en,"serverChildren would be complete if leaf node"),D=KR(r,S)}v=n.filter.updateFullNode(m,D,a)}else{const D=an(t);let S=YR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,Jn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,en.EMPTY_NODE,Jn(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=CD(r,Ig(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=bD(r,xn()),qE(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Z$(n,e,t,r,i,a,l){if(null!=bD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(un(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return DD(n,e,t,m.getNode().getChild(t),i,a,h,l);if(un(t)){let v=new ar(null);return m.getNode().forEachChild(Pl,(D,S)=>{v=v.set(new Un(D),S)}),JR(n,e,t,v,i,a,h,l)}return e}{let v=new ar(null);return r.foreach((D,S)=>{const k=Ar(t,D);m.isCompleteForPath(k)&&(v=v.set(D,m.getNode().getChild(k)))}),JR(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==pa.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+t.type);l=function K$(n,e,t,r,i){const a=e.serverCache;return R1(n,w1(e,a.getNode(),a.isFullyInitialized()||un(t),a.isFiltered()),t,r,x1,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function z$(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ED(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function m1(n){return{type:"value",snapshotNode:n}}(ED(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function W$(n,e){(0,Q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,Q.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function F1(n,e,t,r){return function C$(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function l$(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),zE(n,i,"child_removed",e,r,t),zE(n,i,"child_added",e,r,t),zE(n,i,"child_moved",a,r,t),zE(n,i,"child_changed",e,r,t),zE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let TD,AD;function eM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,Q.hu)(null!=a,"SyncTree gave us an op for an invalid query."),O1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(O1(l,e,t,r));return a}}function Jh(n,e){let t=null;for(const r of n.views.values())t=t||ej(r,e);return t}class j1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ar(null),this.pendingWriteTree_=function U$(){return{visibleWrites:gu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tM(n,e,t,r,i){return function S$(n,e,t,r,i){(0,Q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=ZE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vy(n,new Eg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function tf(n,e,t=!1){const r=function x$(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function R$(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,Q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&M$(h,r.path)?i=!1:fa(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function N$(n){n.visibleWrites=b1(n.allWrites,k$,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=E1(n.visibleWrites,r.path):Mi(r.children,m=>{n.visibleWrites=E1(n.visibleWrites,Ar(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new ar(null);return null!=r.snap?a=a.set(xn(),!0):Mi(r.children,l=>{a=a.set(new Un(l),!0)}),vy(n,new vD(r.path,a,t))}return[]}function KE(n,e,t){return vy(n,new Eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function RD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=Jh(h,bs(l,e));if(v)return v});return D1(i,e,a,t,!0)}function vy(n,e){return W1(e,n.syncPointTree_,null,ID(n.pendingWriteTree_,xn()))}function W1(n,e,t,r){if(un(n.path))return G1(n,e,t,r);{const i=e.get(xn());null==t&&null!=i&&(t=Jh(i,xn()));let a=[];const l=an(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,D=S1(r,l);a=a.concat(W1(h,m,v,D))}return i&&(a=a.concat(eM(i,n,r,t))),a}}function G1(n,e,t,r){const i=e.get(xn());null==t&&null!=i&&(t=Jh(i,xn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=S1(r,l),D=n.operationForChild(l);D&&(a=a.concat(G1(D,h,m,v)))}),i&&(a=a.concat(eM(i,n,r,t))),a}function rM(n,e){return n.tagToQueryMap.get(e)}function iM(n){const e=n.indexOf("$");return(0,Q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Un(n.substr(0,e))}}function sM(n,e,t){const r=n.syncPointTree_.get(e);return(0,Q.hu)(r,"Missing sync point for query tag that we're tracking"),eM(r,t,ID(n.pendingWriteTree_,e),null)}class oM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new oM(t)}node(){return this.node_}}class aM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ar(this.path_,e);return new aM(this.syncTree_,t)}node(){return RD(this.syncTree_,this.path_)}}const q1=function(n,e,t){return n&&"object"==typeof n?((0,Q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ij(n[".sv"],e,t):"object"==typeof n[".sv"]?Cj(n[".sv"],e):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ij=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Q.hu)(!1,"Unexpected server value: "+n)},Cj=function(n,e,t){n.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Q.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,Q.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},uM=function(n,e,t){return lM(n,new oM(e),t)};function lM(n,e,t){const r=n.getPriority().val(),i=q1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=q1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new fy(h,Pr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new fy(i))),l.forEachChild(or,(h,m)=>{const v=lM(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class cM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ND(n,e){let t=e instanceof Un?e:new Un(e),r=n,i=an(t);for(;null!==i;){const a=(0,Q.DV)(r.node.children,i)||{children:{},childCount:0};r=new cM(i,r,a),t=Jn(t),i=an(t)}return r}function bg(n){return n.node.value}function dM(n,e){n.node.value=e,hM(n)}function K1(n){return n.node.childCount>0}function kD(n,e){Mi(n.node.children,(t,r)=>{e(new cM(t,n,r))})}function Y1(n,e,t,r){t&&!r&&e(n),kD(n,i=>{Y1(i,e,!0,r)}),t&&r&&e(n)}function XE(n){return new Un(null===n.parent?n.name:XE(n.parent)+"/"+n.name)}function hM(n){null!==n.parent&&function Tj(n,e,t){const r=function bj(n){return void 0===bg(n)&&!K1(n)}(t),i=(0,Q.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,hM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,hM(n))}(n.parent,n.name,n)}const Sj=/[\[\].#$\/\u0000-\u001F\u007F]/,Aj=/[\[\].#$\u0000-\u001F\u007F]/,fM=10485760,PD=function(n){return"string"==typeof n&&0!==n.length&&!Sj.test(n)},e0=function(n,e,t){const r=t instanceof Un?new G2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+vg(r));if("function"==typeof e)throw new Error(n+"contains a function "+vg(r)+" with contents = "+e.toString());if(uD(e))throw new Error(n+"contains "+e.toString()+" "+vg(r));if("string"==typeof e&&e.length>fM/3&&(0,Q.ug)(e)>fM)throw new Error(n+"contains a string greater than "+fM+" utf8 bytes "+vg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Mi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!PD(l)))throw new Error(n+" contains an invalid key ("+l+") "+vg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function z2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Q.ug)(e),a1(n)})(r,l),e0(n,h,r),function q2(n){const e=n.parts_.pop();n.byteLength_-=(0,Q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+vg(r)+" in addition to actual children.")}},J1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!PD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Aj.test(n)}(n)}(t))throw new Error((0,Q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Nj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Io(n,e,t){(function OD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!xR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function tF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(kj(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>fa(r,e)||fa(e,r))}function kj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();_g&&Ri("event: "+t.toString()),dy(r)}}}class Oj{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yD(),this.transactionQueueTree_=new cM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rF(n){const t=n.infoData_.getNode(new Un(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function n0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:rF(n)})}function iF(n,e,t,r,i){n.dataUpdateCount++;const a=new Un(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,Q.UI)(t,v=>Pr(v));l=function gj(n,e,t,r){const i=rM(n,r);if(i){const a=iM(i),l=a.path,h=a.queryId,m=bs(l,e),v=ar.fromObject(t);return sM(n,l,new _y(WR(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Pr(t);l=function H1(n,e,t,r){const i=rM(n,r);if(null!=i){const a=iM(i),l=a.path,h=a.queryId,m=bs(l,e);return sM(n,l,new Eg(WR(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,Q.UI)(t,v=>Pr(v));l=function hj(n,e,t){const r=ar.fromObject(t);return vy(n,new _y({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Pr(t);l=KE(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=Ey(n,a)),Io(n.eventQueue_,h,l)}function sF(n,e){mM(n,"connected",e),!1===e&&function Bj(n){wy(n,"onDisconnectEvents");const e=n0(n),t=yD();$R(n.onDisconnect_,xn(),(i,a)=>{const l=function(n,e,t,r){return lM(e,new aM(t,n),r)}(i,a,n.serverSyncTree_,e);my(t,i,l)});let r=[];$R(t,xn(),(i,a)=>{r=r.concat(KE(n.serverSyncTree_,i,a));const l=function wM(n,e){const t=XE(uF(n,e)),r=ND(n.transactionQueueTree_,e);return function Dj(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{EM(n,i)}),EM(n,r),Y1(r,i=>{EM(n,i)}),t}(n,i);Ey(n,l)}),n.onDisconnect_=yD(),Io(n.eventQueue_,xn(),r)}(n)}function mM(n,e,t){const r=new Un("/.info/"+e),i=Pr(t);n.infoData_.updateSnapshot(r,i);const a=KE(n.infoSyncTree_,r,i);Io(n.eventQueue_,r,a)}function FD(n){return n.nextWriteId_++}function wy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ri(t,...e)}function vM(n,e,t){return RD(n.serverSyncTree_,e,t)||en.EMPTY_NODE}function LD(n,e=n.transactionQueueTree_){if(e||VD(n,e),bg(e)){const t=lF(n,e);(0,Q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function qj(n,e,t){const r=t.map(v=>v.currentWriteId),i=vM(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,Q.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=bs(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{wy(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,D=D.concat(tf(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();VD(n,ND(n.transactionQueueTree_,e)),LD(n,n.transactionQueueTree_),Io(n.eventQueue_,e,D);for(let k=0;k<S.length;k++)dy(S[k])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{is("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Ey(n,e)}},l)}(n,XE(e),t)}else K1(e)&&kD(e,t=>{LD(n,t)})}function Ey(n,e){const t=uF(n,e),r=XE(t);return function Zj(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=bs(t,m.path);let S,D=!1;if((0,Q.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(tf(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,S="maxretry",i=i.concat(tf(n.serverSyncTree_,m.currentWriteId,!0));else{const k=vM(n,m.path,l);m.currentInputSnapshot=k;const j=e[h].update(k.val());if(void 0!==j){e0("transaction failed: Data returned ",j,m.path);let Z=Pr(j);"object"==typeof j&&null!=j&&(0,Q.r3)(j,".priority")||(Z=Z.updatePriority(k.getPriority()));const Ce=m.currentWriteId,St=n0(n),At=uM(Z,k,St);m.currentOutputSnapshotRaw=Z,m.currentOutputSnapshotResolved=At,m.currentWriteId=FD(n),l.splice(l.indexOf(Ce),1),i=i.concat(tM(n.serverSyncTree_,m.path,At,m.currentWriteId,m.applyLocally)),i=i.concat(tf(n.serverSyncTree_,Ce,!0))}else D=!0,S="nodata",i=i.concat(tf(n.serverSyncTree_,m.currentWriteId,!0))}Io(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}VD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)dy(r[h]);LD(n,n.transactionQueueTree_)}(n,lF(n,t),r),r}function uF(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===bg(r);)r=ND(r,t),t=an(e=Jn(e));return r}function lF(n,e){const t=[];return cF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function cF(n,e,t){const r=bg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);kD(e,i=>{cF(n,i,t)})}function VD(n,e){const t=bg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,dM(e,t.length>0?t:void 0)}kD(e,r=>{VD(n,r)})}function EM(n,e){const t=bg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,Q.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,Q.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(tf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?dM(e,void 0):t.length=a+1,Io(n.eventQueue_,XE(e),i);for(let l=0;l<r.length;l++)dy(r[l])}}const IM=function(n,e){const t=Qj(n),r=t.namespace;return"firebase.com"===t.domain&&kl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&kl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new IR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Un(t.pathString)}},Qj=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function Kj(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const k=function Yj(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const j=e.slice(0,v);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return un(this._path)?null:AR(this._path)}get ref(){return new mu(this._repo,this._path)}get _queryIdentifier(){const e=y1(this._queryParams),t=wR(e);return"{}"===t?"default":t}get _queryObject(){return y1(this._queryParams)}isEqual(e){if(!((e=(0,Q.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=xR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function H2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class mu extends Co{constructor(e,t){super(e,t,new LR,!1)}get parent(){const e=o1(this._path);return null===e?null:new mu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function rj(n){(0,Q.hu)(!TD,"__referenceConstructor has already been defined"),TD=n})(mu),function uj(n){(0,Q.hu)(!AD,"__referenceConstructor has already been defined"),AD=n}(mu);const bM={};class _H{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Fj(n,e,t){if(n.stats_=DR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new _D(n.repoInfo_,(r,i,a,l)=>{iF(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>sF(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wg(n.repoInfo_,e,(r,i,a,l)=>{iF(n,r,i,a,l)},r=>{sF(n,r)},r=>{!function Lj(n,e){Mi(e,(t,r)=>{mM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function E2(n,e){const t=n.toString();return bR[t]||(bR[t]=e()),bR[t]}(n.repoInfo_,()=>new E$(n.stats_,n.server_)),n.infoData_=new m$,n.infoSyncTree_=new j1({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=KE(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),mM(n,"connected",!1),n.serverSyncTree_=new j1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);Io(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mu(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function pH(n,e){const t=bM[e];(!t||t[n.key]!==n)&&kl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function aF(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&kl("Cannot call "+e+" on a deleted database.")}}function yH(n=(0,Hn.getApp)(),e){const t=(0,Hn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,Q.P0)("database");r&&function vH(n,e,t,r={}){(n=(0,Q.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&kl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&kl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new LE(LE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,Q.Sg)(r.mockUserToken,n.app.options.projectId);a=new LE(l)}!function hH(n,e,t,r){n.repoInfo_=new IR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}wg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function wH(n){(function i2(n){_R=n})(Hn.SDK_VERSION),(0,Hn._registerComponent)(new Wd.wA("database",(e,{instanceIdentifier:t})=>function fH(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||kl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ri("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=IM(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=IM(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new LE(LE.OWNER):new y2(n.name,n.options,e);J1("Invalid Firebase Database URL",l),un(l.path)||kl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function gH(n,e,t,r){let i=bM[e.name];i||(i={},bM[e.name]=i);let a=i[n.toURLString()];return a&&kl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Oj(n,!1,t,r),i[n.toURLString()]=a,a}(h,n,D,new _2(n.name,t));return new _H(S,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(IO,"0.14.3",n),(0,Hn.registerVersion)(IO,"0.14.3","esm2017")}();class DM{constructor(e){return e}}const vF="database",TM=new f.OlP("angularfire2.database-instances");function DH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new DM(r)}}const TH={provide:class CH{constructor(){return(0,Jt.vb)(vF)}},deps:[[new f.FiY,TM]]},SH={provide:DM,useFactory:function bH(n,e){const t=(0,Jt.JM)(vF,n,e);return t&&new DM(t)},deps:[[new f.FiY,TM],Wh]};let AH=(()=>{class n{constructor(){(0,Ml.KN)("angularfire",Jt.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[SH,TH]}),n})();function xH(n,...e){return{ngModule:AH,providers:[{provide:TM,useFactory:DH(n),multi:!0,deps:[f.R0b,f.zs3,Jt.HU,DE,[new f.FiY,aD],[new f.FiY,fg],...e]}]}}const RH=(0,Jt.u3)(yH,!0);class SM{constructor(e){return e}}const wF="firestore",AM=new f.OlP("angularfire2.firestore-instances");function kH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new SM(r)}}const PH={provide:class MH{constructor(){return(0,Jt.vb)(wF)}},deps:[[new f.FiY,AM]]},OH={provide:SM,useFactory:function NH(n,e){const t=(0,Jt.JM)(wF,n,e);return t&&new SM(t)},deps:[[new f.FiY,AM],Wh]};let FH=(()=>{class n{constructor(){(0,Ml.KN)("angularfire",Jt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[OH,PH]}),n})();function LH(n,...e){return{ngModule:FH,providers:[{provide:AM,useFactory:kH(n),multi:!0,deps:[f.R0b,f.zs3,Jt.HU,DE,[new f.FiY,aD],[new f.FiY,fg],...e]}]}}const VH=(0,Jt.u3)(ML,!0),EF="firebasestorage.googleapis.com";class Or extends Q.ZR{constructor(e,t,r=0){super(xM(e),`Firebase Storage: ${t} (${xM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Or.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ur=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ur||(ur={})),ur))();function xM(n){return"storage/"+n}function MM(n){return new Or(ur.INVALID_ARGUMENT,n)}function TF(){return new Or(ur.APP_DELETED,"The Firebase app was deleted.")}class Ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ds.makeFromUrl(e,t)}catch{return new Ds(e,"")}if(""===r.path)return r;throw function ZH(n){return new Or(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(gt){gt.path_=decodeURIComponent(gt.path)}const S=t.replace(/[.]/g,"\\."),ht=[{regex:h,indices:{bucket:1,path:3},postModify:function a(gt){"/"===gt.path.charAt(gt.path.length-1)&&(gt.path_=gt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===EF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let gt=0;gt<ht.length;gt++){const Lt=ht[gt],Zt=Lt.regex.exec(e);if(Zt){let vu=Zt[Lt.indices.path];vu||(vu=""),r=new Ds(Zt[Lt.indices.bucket],vu),Lt.postModify(r);break}}if(null==r)throw function qH(n){return new Or(ur.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class eW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kM(n,e,t,r){if(r<e)throw MM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw MM(`Invalid value for '${n}'. Expected ${t} or less.`)}var sf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(sf||(sf={})),sf))();class oW{constructor(e,t,r,i,a,l,h,m,v,D,S,k=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,Z)=>{this.resolve_=j,this.reject_=Z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function rW(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=function RM(){return new Or(ur.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?TF():function bF(){return new Or(ur.CANCELED,"User canceled the upload/download.")}():function CF(){return new Or(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new HD(!1,null,!0)):this.backoffId_=function tW(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function D(...Ce){v||(v=!0,e.apply(null,Ce))}function S(Ce){i=setTimeout(()=>{i=null,n(j,m())},Ce)}function k(){a&&clearTimeout(a)}function j(Ce,...St){if(v)return void k();if(Ce)return k(),void D.call(null,Ce,...St);if(m()||l)return k(),void D.call(null,Ce,...St);let ht;r<64&&(r*=2),1===h?(h=2,ht=0):ht=1e3*(r+Math.random()),S(ht)}let Z=!1;function fe(Ce){Z||(Z=!0,k(),!v&&(null!==i?(Ce||(h=2),clearTimeout(i),S(0)):Ce||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new HD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===sf.NO_ERROR,m=a.getStatus();if(!h||function xF(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(m,this.additionalRetryCodes_)&&this.retry){const D=a.getErrorCode()===sf.ABORT;return void r(!1,new HD(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new HD(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function nW(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class HD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Tg{constructor(e,t){this._service=e,this._location=t instanceof Ds?t:Ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tg(e,t)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function PF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function wW(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ds(this._location.bucket,e);return new Tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function JH(n){return new Or(ur.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function KF(n,e){const t=e?.storageBucket;return null==t?null:Ds.makeFromBucketSpec(t,n)}class BM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=EF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ds.makeFromBucketSpec(i,this._host):KF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ds.makeFromBucketSpec(this._url,e):KF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new eW(TF());{const l=function dW(n,e,t,r,i,a,l=!0){const h=function AF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),m=n.url+h,v=Object.assign({},n.headers);return function lW(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function aW(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function uW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function cW(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new oW(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const YF="@firebase/storage",XF="storage";function sG(n=(0,Hn.getApp)(),e){n=(0,Q.m9)(n);const r=(0,Hn._getProvider)(n,XF).getImmediate({identifier:e}),i=(0,Q.P0)("storage");return i&&function oG(n,e,t,r={}){!function iG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Q.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function aG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BM(t,r,i,e,Hn.SDK_VERSION)}!function uG(){(0,Hn._registerComponent)(new Wd.wA(XF,aG,"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(YF,"0.11.1",""),(0,Hn.registerVersion)(YF,"0.11.1","esm2017")}();class $M{constructor(e){return e}}const JF="storage",jM=new f.OlP("angularfire2.storage-instances");function dG(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $M(r)}}const hG={provide:class lG{constructor(){return(0,Jt.vb)(JF)}},deps:[[new f.FiY,jM]]},fG={provide:$M,useFactory:function cG(n,e){const t=(0,Jt.JM)(JF,n,e);return t&&new $M(t)},deps:[[new f.FiY,jM],Wh]};let pG=(()=>{class n{constructor(){(0,Ml.KN)("angularfire",Jt.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[fG,hG]}),n})();function gG(n,...e){return{ngModule:pG,providers:[{provide:jM,useFactory:dG(n),multi:!0,deps:[f.R0b,f.zs3,Jt.HU,DE,[new f.FiY,aD],[new f.FiY,fg],...e]}]}}const mG=(0,Jt.u3)(sG,!0);let _G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[KB]}),n.\u0275inj=f.cJS({imports:[_m,Wo,mo.hO.initializeApp(pR_firebase),ZB,LB,UV(()=>BV(pR_firebase)),n2(()=>r2()),xH(()=>RH()),LH(()=>VH()),gG(()=>mG())]}),n})();(0,f.G48)(),Pa().bootstrapModule(_G).catch(n=>console.error(n))},9751:(_t,xe,F)=>{F.d(xe,{y:()=>le});var f=F(2961),$=F(727),P=F(8822),re=F(9635),se=F(2416),pe=F(576),de=F(2806);let le=(()=>{class X{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Te=new X;return Te.source=this,Te.operator=ke,Te}subscribe(ke,Te,tt){const ve=function G(X){return X&&X instanceof f.Lv||function z(X){return X&&(0,pe.m)(X.next)&&(0,pe.m)(X.error)&&(0,pe.m)(X.complete)}(X)&&(0,$.Nn)(X)}(ke)?ke:new f.Hp(ke,Te,tt);return(0,de.x)(()=>{const{operator:he,source:Qe}=this;ve.add(he?he.call(ve,Qe):Qe?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Te){ke.error(Te)}}forEach(ke,Te){return new(Te=me(Te))((tt,ve)=>{const he=new f.Hp({next:Qe=>{try{ke(Qe)}catch(et){ve(et),he.unsubscribe()}},error:ve,complete:tt});this.subscribe(he)})}_subscribe(ke){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(ke)}[P.L](){return this}pipe(...ke){return(0,re.U)(ke)(this)}toPromise(ke){return new(ke=me(ke))((Te,tt)=>{let ve;this.subscribe(he=>ve=he,he=>tt(he),()=>Te(ve))})}}return X.create=He=>new X(He),X})();function me(X){var He;return null!==(He=X??se.v.Promise)&&void 0!==He?He:Promise}},7579:(_t,xe,F)=>{F.d(xe,{x:()=>de});var f=F(9751),$=F(727);const re=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),pe=F(2806);let de=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new le(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new re}next(G){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:He,observers:ke}=this;return X||He?$.Lc:(this.currentObservers=null,ke.push(G),new $.w0(()=>{this.currentObservers=null,(0,se.P)(ke,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:He,isStopped:ke}=this;X?G.error(He):ke&&G.complete()}asObservable(){const G=new f.y;return G.source=this,G}}return me.create=(z,G)=>new le(z,G),me})();class le extends de{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,z)}error(z){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==X?X:$.Lc}}},2961:(_t,xe,F)=>{F.d(xe,{Hp:()=>tt,Lv:()=>X});var f=F(576),$=F(727),P=F(2416),re=F(7849);function se(){}const pe=me("C",void 0,void 0);function me(Re,Me,be){return{kind:Re,value:Me,error:be}}var z=F(3410),G=F(2806);class X extends $.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,$.Nn)(Me)&&Me.add(this)):this.destination=et}static create(Me,be,We){return new tt(Me,be,We)}next(Me){this.isStopped?Qe(function le(Re){return me("N",Re,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?Qe(function de(Re){return me("E",void 0,Re)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?Qe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function ke(Re,Me){return He.call(Re,Me)}class Te{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:be}=this;if(be.next)try{be.next(Me)}catch(We){ve(We)}}error(Me){const{partialObserver:be}=this;if(be.error)try{be.error(Me)}catch(We){ve(We)}else ve(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(be){ve(be)}}}class tt extends X{constructor(Me,be,We){let ne;if(super(),(0,f.m)(Me)||!Me)ne={next:Me??void 0,error:be??void 0,complete:We??void 0};else{let ae;this&&P.v.useDeprecatedNextContext?(ae=Object.create(Me),ae.unsubscribe=()=>this.unsubscribe(),ne={next:Me.next&&ke(Me.next,ae),error:Me.error&&ke(Me.error,ae),complete:Me.complete&&ke(Me.complete,ae)}):ne=Me}this.destination=new Te(ne)}}function ve(Re){P.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Re):(0,re.h)(Re)}function Qe(Re,Me){const{onStoppedNotification:be}=P.v;be&&z.z.setTimeout(()=>be(Re,Me))}const et={closed:!0,next:se,error:function he(Re){throw Re},complete:se}},727:(_t,xe,F)=>{F.d(xe,{Lc:()=>pe,w0:()=>se,Nn:()=>de});var f=F(576);const P=(0,F(3888).d)(me=>function(G){me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,He)=>`${He+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var re=F(8737);class se{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const ke of G)ke.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(ke){z=ke instanceof P?ke.errors:[ke]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const ke of He)try{le(ke)}catch(Te){z=z??[],Te instanceof P?z=[...z,...Te.errors]:z.push(Te)}}if(z)throw new P(z)}}add(z){var G;if(z&&z!==this)if(this.closed)le(z);else{if(z instanceof se){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,re.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,re.P)(G,z),z instanceof se&&z._removeParent(this)}}se.EMPTY=(()=>{const me=new se;return me.closed=!0,me})();const pe=se.EMPTY;function de(me){return me instanceof se||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function le(me){(0,f.m)(me)?me():me.unsubscribe()}},2416:(_t,xe,F)=>{F.d(xe,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,xe,F)=>{F.d(xe,{E:()=>$});const $=new(F(9751).y)(se=>se.complete())},8996:(_t,xe,F)=>{F.d(xe,{D:()=>Me});var f=F(8421),$=F(5363),P=F(9468),pe=F(9751),le=F(2202),me=F(576),z=F(9672);function X(be,We){if(!be)throw new Error("Iterable cannot be null");return new pe.y(ne=>{(0,z.f)(ne,We,()=>{const ae=be[Symbol.asyncIterator]();(0,z.f)(ne,We,()=>{ae.next().then(_e=>{_e.done?ne.complete():ne.next(_e.value)})},0,!0)})})}var He=F(3670),ke=F(8239),Te=F(1144),tt=F(6495),ve=F(2206),he=F(4532),Qe=F(3260);function Me(be,We){return We?function Re(be,We){if(null!=be){if((0,He.c)(be))return function re(be,We){return(0,f.Xf)(be).pipe((0,P.R)(We),(0,$.Q)(We))}(be,We);if((0,Te.z)(be))return function de(be,We){return new pe.y(ne=>{let ae=0;return We.schedule(function(){ae===be.length?ne.complete():(ne.next(be[ae++]),ne.closed||this.schedule())})})}(be,We);if((0,ke.t)(be))return function se(be,We){return(0,f.Xf)(be).pipe((0,P.R)(We),(0,$.Q)(We))}(be,We);if((0,ve.D)(be))return X(be,We);if((0,tt.T)(be))return function G(be,We){return new pe.y(ne=>{let ae;return(0,z.f)(ne,We,()=>{ae=be[le.h](),(0,z.f)(ne,We,()=>{let _e,ze;try{({value:_e,done:ze}=ae.next())}catch(qe){return void ne.error(qe)}ze?ne.complete():ne.next(_e)},0,!0)}),()=>(0,me.m)(ae?.return)&&ae.return()})}(be,We);if((0,Qe.L)(be))return function et(be,We){return X((0,Qe.Q)(be),We)}(be,We)}throw(0,he.z)(be)}(be,We):(0,f.Xf)(be)}},8421:(_t,xe,F)=>{F.d(xe,{Xf:()=>He});var f=F(655),$=F(1144),P=F(8239),re=F(9751),se=F(3670),pe=F(2206),de=F(4532),le=F(6495),me=F(3260),z=F(576),G=F(7849),X=F(8822);function He(Re){if(Re instanceof re.y)return Re;if(null!=Re){if((0,se.c)(Re))return function ke(Re){return new re.y(Me=>{const be=Re[X.L]();if((0,z.m)(be.subscribe))return be.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,$.z)(Re))return function Te(Re){return new re.y(Me=>{for(let be=0;be<Re.length&&!Me.closed;be++)Me.next(Re[be]);Me.complete()})}(Re);if((0,P.t)(Re))return function tt(Re){return new re.y(Me=>{Re.then(be=>{Me.closed||(Me.next(be),Me.complete())},be=>Me.error(be)).then(null,G.h)})}(Re);if((0,pe.D)(Re))return he(Re);if((0,le.T)(Re))return function ve(Re){return new re.y(Me=>{for(const be of Re)if(Me.next(be),Me.closed)return;Me.complete()})}(Re);if((0,me.L)(Re))return function Qe(Re){return he((0,me.Q)(Re))}(Re)}throw(0,de.z)(Re)}function he(Re){return new re.y(Me=>{(function et(Re,Me){var be,We,ne,ae;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(Re);!(We=yield be.next()).done;)if(Me.next(We.value),Me.closed)return}catch(_e){ne={error:_e}}finally{try{We&&!We.done&&(ae=be.return)&&(yield ae.call(be))}finally{if(ne)throw ne.error}}Me.complete()})})(Re,Me).catch(be=>Me.error(be))})}},6451:(_t,xe,F)=>{F.d(xe,{T:()=>pe});var f=F(8189),$=F(8421),P=F(515),re=F(7669),se=F(8996);function pe(...de){const le=(0,re.yG)(de),me=(0,re._6)(de,1/0),z=de;return z.length?1===z.length?(0,$.Xf)(z[0]):(0,f.J)(me)((0,se.D)(z,le)):P.E}},5403:(_t,xe,F)=>{F.d(xe,{x:()=>$});var f=F(2961);function $(re,se,pe,de,le){return new P(re,se,pe,de,le)}class P extends f.Lv{constructor(se,pe,de,le,me,z){super(se),this.onFinalize=me,this.shouldUnsubscribe=z,this._next=pe?function(G){try{pe(G)}catch(X){se.error(X)}}:super._next,this._error=le?function(G){try{le(G)}catch(X){se.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(_t,xe,F)=>{F.d(xe,{U:()=>P});var f=F(4482),$=F(5403);function P(re,se){return(0,f.e)((pe,de)=>{let le=0;pe.subscribe((0,$.x)(de,me=>{de.next(re.call(se,me,le++))}))})}},8189:(_t,xe,F)=>{F.d(xe,{J:()=>P});var f=F(5577),$=F(4671);function P(re=1/0){return(0,f.z)($.y,re)}},5577:(_t,xe,F)=>{F.d(xe,{z:()=>le});var f=F(4004),$=F(8421),P=F(4482),re=F(9672),se=F(5403),de=F(576);function le(me,z,G=1/0){return(0,de.m)(z)?le((X,He)=>(0,f.U)((ke,Te)=>z(X,ke,He,Te))((0,$.Xf)(me(X,He))),G):("number"==typeof z&&(G=z),(0,P.e)((X,He)=>function pe(me,z,G,X,He,ke,Te,tt){const ve=[];let he=0,Qe=0,et=!1;const Re=()=>{et&&!ve.length&&!he&&z.complete()},Me=We=>he<X?be(We):ve.push(We),be=We=>{ke&&z.next(We),he++;let ne=!1;(0,$.Xf)(G(We,Qe++)).subscribe((0,se.x)(z,ae=>{He?.(ae),ke?Me(ae):z.next(ae)},()=>{ne=!0},void 0,()=>{if(ne)try{for(he--;ve.length&&he<X;){const ae=ve.shift();Te?(0,re.f)(z,Te,()=>be(ae)):be(ae)}Re()}catch(ae){z.error(ae)}}))};return me.subscribe((0,se.x)(z,Me,()=>{et=!0,Re()})),()=>{tt?.()}}(X,He,me,G)))}},5363:(_t,xe,F)=>{F.d(xe,{Q:()=>re});var f=F(9672),$=F(4482),P=F(5403);function re(se,pe=0){return(0,$.e)((de,le)=>{de.subscribe((0,P.x)(le,me=>(0,f.f)(le,se,()=>le.next(me),pe),()=>(0,f.f)(le,se,()=>le.complete(),pe),me=>(0,f.f)(le,se,()=>le.error(me),pe)))})}},3099:(_t,xe,F)=>{F.d(xe,{B:()=>se});var f=F(8421),$=F(7579),P=F(2961),re=F(4482);function se(de={}){const{connector:le=(()=>new $.x),resetOnError:me=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=de;return X=>{let He,ke,Te,tt=0,ve=!1,he=!1;const Qe=()=>{ke?.unsubscribe(),ke=void 0},et=()=>{Qe(),He=Te=void 0,ve=he=!1},Re=()=>{const Me=He;et(),Me?.unsubscribe()};return(0,re.e)((Me,be)=>{tt++,!he&&!ve&&Qe();const We=Te=Te??le();be.add(()=>{tt--,0===tt&&!he&&!ve&&(ke=pe(Re,G))}),We.subscribe(be),!He&&tt>0&&(He=new P.Hp({next:ne=>We.next(ne),error:ne=>{he=!0,Qe(),ke=pe(et,me,ne),We.error(ne)},complete:()=>{ve=!0,Qe(),ke=pe(et,z),We.complete()}}),(0,f.Xf)(Me).subscribe(He))})(X)}}function pe(de,le,...me){if(!0===le)return void de();if(!1===le)return;const z=new P.Hp({next:()=>{z.unsubscribe(),de()}});return le(...me).subscribe(z)}},9468:(_t,xe,F)=>{F.d(xe,{R:()=>$});var f=F(4482);function $(P,re=0){return(0,f.e)((se,pe)=>{pe.add(P.schedule(()=>se.subscribe(pe),re))})}},8505:(_t,xe,F)=>{F.d(xe,{b:()=>se});var f=F(576),$=F(4482),P=F(5403),re=F(4671);function se(pe,de,le){const me=(0,f.m)(pe)||de||le?{next:pe,error:de,complete:le}:pe;return me?(0,$.e)((z,G)=>{var X;null===(X=me.subscribe)||void 0===X||X.call(me);let He=!0;z.subscribe((0,P.x)(G,ke=>{var Te;null===(Te=me.next)||void 0===Te||Te.call(me,ke),G.next(ke)},()=>{var ke;He=!1,null===(ke=me.complete)||void 0===ke||ke.call(me),G.complete()},ke=>{var Te;He=!1,null===(Te=me.error)||void 0===Te||Te.call(me,ke),G.error(ke)},()=>{var ke,Te;He&&(null===(ke=me.unsubscribe)||void 0===ke||ke.call(me)),null===(Te=me.finalize)||void 0===Te||Te.call(me)}))}):re.y}},4408:(_t,xe,F)=>{F.d(xe,{o:()=>se});var f=F(727);class $ extends f.w0{constructor(de,le){super()}schedule(de,le=0){return this}}const P={setInterval(pe,de,...le){const{delegate:me}=P;return me?.setInterval?me.setInterval(pe,de,...le):setInterval(pe,de,...le)},clearInterval(pe){const{delegate:de}=P;return(de?.clearInterval||clearInterval)(pe)},delegate:void 0};var re=F(8737);class se extends ${constructor(de,le){super(de,le),this.scheduler=de,this.work=le,this.pending=!1}schedule(de,le=0){var me;if(this.closed)return this;this.state=de;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,le)),this.pending=!0,this.delay=le,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(G,this.id,le),this}requestAsyncId(de,le,me=0){return P.setInterval(de.flush.bind(de,this),me)}recycleAsyncId(de,le,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return le;null!=le&&P.clearInterval(le)}execute(de,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(de,le);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,le){let z,me=!1;try{this.work(de)}catch(G){me=!0,z=G||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:de,scheduler:le}=this,{actions:me}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(me,this),null!=de&&(this.id=this.recycleAsyncId(le,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,xe,F)=>{F.d(xe,{v:()=>P});var f=F(6063);class ${constructor(se,pe=$.now){this.schedulerActionCtor=se,this.now=pe}schedule(se,pe=0,de){return new this.schedulerActionCtor(this,se).schedule(de,pe)}}$.now=f.l.now;class P extends ${constructor(se,pe=$.now){super(se,pe),this.actions=[],this._active=!1}flush(se){const{actions:pe}=this;if(this._active)return void pe.push(se);let de;this._active=!0;do{if(de=se.execute(se.state,se.delay))break}while(se=pe.shift());if(this._active=!1,de){for(;se=pe.shift();)se.unsubscribe();throw de}}}},4986:(_t,xe,F)=>{F.d(xe,{z:()=>P});var f=F(4408);const P=new(F(7565).v)(f.o)},6063:(_t,xe,F)=>{F.d(xe,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(_t,xe,F)=>{F.d(xe,{z:()=>f});const f={setTimeout($,P,...re){const{delegate:se}=f;return se?.setTimeout?se.setTimeout($,P,...re):setTimeout($,P,...re)},clearTimeout($){const{delegate:P}=f;return(P?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(_t,xe,F)=>{F.d(xe,{h:()=>$});const $=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,xe,F)=>{F.d(xe,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,xe,F)=>{F.d(xe,{_6:()=>pe,jO:()=>re,yG:()=>se});var f=F(576);function P(de){return de[de.length-1]}function re(de){return(0,f.m)(P(de))?de.pop():void 0}function se(de){return function $(de){return de&&(0,f.m)(de.schedule)}(P(de))?de.pop():void 0}function pe(de,le){return"number"==typeof P(de)?de.pop():le}},8737:(_t,xe,F)=>{function f($,P){if($){const re=$.indexOf(P);0<=re&&$.splice(re,1)}}F.d(xe,{P:()=>f})},3888:(_t,xe,F)=>{function f($){const re=$(se=>{Error.call(se),se.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}F.d(xe,{d:()=>f})},2806:(_t,xe,F)=>{F.d(xe,{O:()=>re,x:()=>P});var f=F(2416);let $=null;function P(se){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!$;if(pe&&($={errorThrown:!1,error:null}),se(),pe){const{errorThrown:de,error:le}=$;if($=null,de)throw le}}else se()}function re(se){f.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=se)}},9672:(_t,xe,F)=>{function f($,P,re,se=0,pe=!1){const de=P.schedule(function(){re(),pe?$.add(this.schedule(null,se)):this.unsubscribe()},se);if($.add(de),!pe)return de}F.d(xe,{f:()=>f})},4671:(_t,xe,F)=>{function f($){return $}F.d(xe,{y:()=>f})},1144:(_t,xe,F)=>{F.d(xe,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(_t,xe,F)=>{F.d(xe,{D:()=>$});var f=F(576);function $(P){return Symbol.asyncIterator&&(0,f.m)(P?.[Symbol.asyncIterator])}},576:(_t,xe,F)=>{function f($){return"function"==typeof $}F.d(xe,{m:()=>f})},3670:(_t,xe,F)=>{F.d(xe,{c:()=>P});var f=F(8822),$=F(576);function P(re){return(0,$.m)(re[f.L])}},6495:(_t,xe,F)=>{F.d(xe,{T:()=>P});var f=F(2202),$=F(576);function P(re){return(0,$.m)(re?.[f.h])}},8239:(_t,xe,F)=>{F.d(xe,{t:()=>$});var f=F(576);function $(P){return(0,f.m)(P?.then)}},3260:(_t,xe,F)=>{F.d(xe,{L:()=>re,Q:()=>P});var f=F(655),$=F(576);function P(se){return(0,f.FC)(this,arguments,function*(){const de=se.getReader();try{for(;;){const{value:le,done:me}=yield(0,f.qq)(de.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(le)}}finally{de.releaseLock()}})}function re(se){return(0,$.m)(se?.getReader)}},4482:(_t,xe,F)=>{F.d(xe,{A:()=>$,e:()=>P});var f=F(576);function $(re){return(0,f.m)(re?.lift)}function P(re){return se=>{if($(se))return se.lift(function(pe){try{return re(pe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(_t,xe,F)=>{F.d(xe,{U:()=>P,z:()=>$});var f=F(4671);function $(...re){return P(re)}function P(re){return 0===re.length?f.y:1===re.length?re[0]:function(pe){return re.reduce((de,le)=>le(de),pe)}}},7849:(_t,xe,F)=>{F.d(xe,{h:()=>P});var f=F(2416),$=F(3410);function P(re){$.z.setTimeout(()=>{const{onUnhandledError:se}=f.v;if(!se)throw re;se(re)})}},4532:(_t,xe,F)=>{function f($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(xe,{z:()=>f})},655:(_t,xe,F)=>{function re(oe,ge){var Ee={};for(var Oe in oe)Object.prototype.hasOwnProperty.call(oe,Oe)&&ge.indexOf(Oe)<0&&(Ee[Oe]=oe[Oe]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(Oe=Object.getOwnPropertySymbols(oe);Le<Oe.length;Le++)ge.indexOf(Oe[Le])<0&&Object.prototype.propertyIsEnumerable.call(oe,Oe[Le])&&(Ee[Oe[Le]]=oe[Oe[Le]])}return Ee}function X(oe,ge,Ee,Oe){return new(Ee||(Ee=Promise))(function(De,ft){function Ft(Et){try{it(Oe.next(Et))}catch(mt){ft(mt)}}function _n(Et){try{it(Oe.throw(Et))}catch(mt){ft(mt)}}function it(Et){Et.done?De(Et.value):function Le(De){return De instanceof Ee?De:new Ee(function(ft){ft(De)})}(Et.value).then(Ft,_n)}it((Oe=Oe.apply(oe,ge||[])).next())})}function Re(oe){return this instanceof Re?(this.v=oe,this):new Re(oe)}function Me(oe,ge,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,Oe=Ee.apply(oe,ge||[]),De=[];return Le={},ft("next"),ft("throw"),ft("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function ft(tn){Oe[tn]&&(Le[tn]=function(Gn){return new Promise(function(Bn,fn){De.push([tn,Gn,Bn,fn])>1||Ft(tn,Gn)})})}function Ft(tn,Gn){try{!function _n(tn){tn.value instanceof Re?Promise.resolve(tn.value.v).then(it,Et):mt(De[0][2],tn)}(Oe[tn](Gn))}catch(Bn){mt(De[0][3],Bn)}}function it(tn){Ft("next",tn)}function Et(tn){Ft("throw",tn)}function mt(tn,Gn){tn(Gn),De.shift(),De.length&&Ft(De[0][0],De[0][1])}}function We(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ge=oe[Symbol.asyncIterator];return ge?ge.call(oe):(oe=function tt(oe){var ge="function"==typeof Symbol&&Symbol.iterator,Ee=ge&&oe[ge],Oe=0;if(Ee)return Ee.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&Oe>=oe.length&&(oe=void 0),{value:oe&&oe[Oe++],done:!oe}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),Ee={},Oe("next"),Oe("throw"),Oe("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Oe(De){Ee[De]=oe[De]&&function(ft){return new Promise(function(Ft,_n){!function Le(De,ft,Ft,_n){Promise.resolve(_n).then(function(it){De({value:it,done:Ft})},ft)}(Ft,_n,(ft=oe[De](ft)).done,ft.value)})}}}F.d(xe,{FC:()=>Me,KL:()=>We,_T:()=>re,mG:()=>X,qq:()=>Re})},4650:(_t,xe,F)=>{F.d(xe,{$8M:()=>Pu,$Z:()=>iI,AFp:()=>zw,AaK:()=>le,CHM:()=>cf,CRH:()=>Nw,CZH:()=>N_,CqO:()=>Mc,D6c:()=>fE,EJc:()=>EA,EpF:()=>Xi,F4k:()=>Hv,FYo:()=>Zf,FiY:()=>we,G48:()=>MA,GfV:()=>H0,Gpc:()=>G,JOm:()=>Ki,KtG:()=>Po,LFG:()=>Ln,LSH:()=>$d,Lbi:()=>wA,Lck:()=>bC,MMx:()=>yw,NdJ:()=>Wv,OlP:()=>Nn,Oqu:()=>Qv,PXZ:()=>H_,Q6J:()=>Gm,QGY:()=>Km,QP$:()=>Ve,Qsj:()=>OT,R0b:()=>vs,RDi:()=>nT,Rgc:()=>Th,SBq:()=>_c,Sil:()=>F_,Suo:()=>uu,TTD:()=>Ss,TgZ:()=>Ip,X6Q:()=>oE,XFs:()=>Je,Xpm:()=>Se,Xts:()=>am,Y36:()=>tl,YKP:()=>yo,YNc:()=>Bv,Yjl:()=>U,Yz7:()=>it,Z0I:()=>Gn,ZZ4:()=>Qp,_Bn:()=>Eh,_UZ:()=>zm,_Vd:()=>Yu,_c5:()=>UA,_uU:()=>$s,aQg:()=>Jp,c2e:()=>Kw,cJS:()=>mt,cg1:()=>tw,dDg:()=>B_,dqk:()=>Vt,eFA:()=>z_,ekj:()=>Tt,eoX:()=>tE,f3M:()=>Di,g9A:()=>qw,h0i:()=>Hc,hGG:()=>BA,hij:()=>cl,iGM:()=>C_,ifc:()=>vt,ip1:()=>Gw,jDz:()=>Ih,kL8:()=>nw,lG2:()=>K,lqb:()=>Ku,lri:()=>ed,n5z:()=>Ns,oAB:()=>sn,oxw:()=>BI,q4F:()=>W0,qLn:()=>yc,qOj:()=>Um,qZA:()=>aa,rWj:()=>U_,s9C:()=>jr,sBO:()=>Oh,sIi:()=>ol,s_b:()=>E_,soG:()=>O_,tb:()=>Zw,tp0:()=>ut,uIk:()=>Fv,vHH:()=>Te,vpe:()=>da,wAp:()=>Nt,xp6:()=>K0,z2F:()=>Ph,zSh:()=>rv,zs3:()=>Hn});var f=F(7579),$=F(727),P=F(9751),re=F(6451),se=F(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=pe({__forward_ref__:pe});function G(s){return s.__forward_ref__=G,s.toString=function(){return le(this())},s}function X(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}class Te extends Error{constructor(o,u){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function Me(s,o){throw new Te(-201,!1)}function Le(s,o){null==s&&function De(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function it(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function mt(s){return{providers:s.providers||[],imports:s.imports||[]}}function tn(s){return Bn(s,Jr)||Bn(s,Ni)}function Gn(s){return null!==tn(s)}function Bn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Lr(s){return s&&(s.hasOwnProperty(zn)||s.hasOwnProperty($i))?s[zn]:null}const Jr=pe({\u0275prov:pe}),zn=pe({\u0275inj:pe}),Ni=pe({ngInjectableDef:pe}),$i=pe({ngInjectorDef:pe});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let lr;function Sn(s){const o=lr;return lr=s,o}function xr(s,o,u){const c=tn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Je.Optional?null:void 0!==o?o:void Me(le(s))}function An(s){return{toString:s}.toString()}var Rn=(()=>((Rn=Rn||{})[Rn.OnPush=0]="OnPush",Rn[Rn.Default=1]="Default",Rn))(),vt=(()=>{return(s=vt||(vt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",vt;var s})();const Vt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wr={},Pt=[],ei=pe({\u0275cmp:pe}),jt=pe({\u0275dir:pe}),oi=pe({\u0275pipe:pe}),nn=pe({\u0275mod:pe}),Er=pe({\u0275fac:pe}),On=pe({__NG_ELEMENT_ID__:pe});let nt=0;function Se(s){return An(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Rn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Pt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||vt.Emulated,id:"c"+nt++,styles:s.styles||Pt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,y=s.features;return d.inputs=H(s.inputs,c),d.outputs=H(s.outputs),y&&y.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(xt).filter(Ot):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(J).filter(Ot):null,d})}function xt(s){return M(s)||V(s)}function Ot(s){return null!==s}function sn(s){return An(()=>({type:s.type,bootstrap:s.bootstrap||Pt,declarations:s.declarations||Pt,imports:s.imports||Pt,exports:s.exports||Pt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function H(s,o){if(null==s)return Wr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const K=Se;function U(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function M(s){return s[ei]||null}function V(s){return s[jt]||null}function J(s){return s[oi]||null}function Ve(s){const o=M(s)||V(s)||J(s);return null!==o&&o.standalone}function st(s,o){const u=s[nn]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function dr(s){return Array.isArray(s)&&"object"==typeof s[1]}function wi(s){return Array.isArray(s)&&!0===s[1]}function Do(s){return 0!=(8&s.flags)}function Bl(s){return 2==(2&s.flags)}function _a(s){return 1==(1&s.flags)}function ui(s){return null!==s.template}function $l(s){return 0!=(256&s[2])}function Vr(s,o){return s.hasOwnProperty(Er)?s[Er]:null}class xo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ss(){return hd}function hd(s){return s.type.prototype.ngOnChanges&&(s.setInput=Hl),Iu}function Iu(){const s=Ro(this),o=s?.current;if(o){const u=s.previous;if(u===Wr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Hl(s,o,u,c){const d=Ro(s)||function kg(s,o){return s[fd]=o}(s,{previous:Wr,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],C=y[E];p[E]=new xo(C&&C.currentValue,o,y===Wr),s[c]=o}Ss.ngInherit=!0;const fd="__ngSimpleChanges__";function Ro(s){return s[fd]||null}function Wn(s){for(;Array.isArray(s);)s=s[0];return s}function Pi(s,o){return Wn(o[s])}function Rr(s,o){return Wn(o[s.index])}function No(s,o){return s.data[o]}function ln(s,o){const u=o[s];return dr(u)?u:u[0]}function As(s){return 64==(64&s[2])}function Ci(s,o){return null==o?null:s[o]}function wa(s){s[18]=0}function qn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const $t={lFrame:Ra(null),bindingsEnabled:!0};function eo(){return $t.bindingsEnabled}function Ne(){return $t.lFrame.lView}function Xt(){return $t.lFrame.tView}function cf(s){return $t.lFrame.contextLView=s,s[8]}function Po(s){return $t.lFrame.contextLView=null,s}function hr(){let s=Oo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Oo(){return $t.lFrame.currentTNode}function ti(s,o){const u=$t.lFrame;u.currentTNode=s,u.isParent=o}function Du(){return $t.lFrame.isParent}function Sa(){return $t.lFrame.bindingIndex++}function _d(s,o){const u=$t.lFrame;u.bindingIndex=u.bindingRootIndex=s,Lo(o)}function Lo(s){$t.lFrame.currentDirectiveIndex=s}function Aa(){return $t.lFrame.currentQueryIndex}function Kl(s){$t.lFrame.currentQueryIndex=s}function xa(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function yd(s,o,u){if(u&Je.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&Je.Host||(d=xa(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=$t.lFrame=ff();return c.currentTNode=o,c.lView=s,!0}function Vo(s){const o=ff(),u=s[1];$t.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function ff(){const s=$t.lFrame,o=null===s?null:s.child;return null===o?Ra(s):o}function Ra(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function pf(){const s=$t.lFrame;return $t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const vd=pf;function xs(){const s=pf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function $n(){return $t.lFrame.selectedIndex}function hs(s){$t.lFrame.selectedIndex=s}function Fn(){const s=$t.lFrame;return No(s.tView,s.selectedIndex)}function Tu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function Uo(s,o,u){$o(s,o,3,u)}function Bo(s,o,u,c){(3&s[2])===u&&$o(s,o,u,c)}function Id(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function $o(s,o,u,c){const p=c??-1,y=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<p||-1==p)&&(Cd(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Cd(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class bi{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function fs(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],y=u[c++],E=u[c++];s.setAttribute(o,y,E,p)}else{const p=d,y=u[++c];tc(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function Ma(s){return 3===s||4===s||6===s}function tc(s){return 64===s.charCodeAt(0)}function Na(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Dd(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Dd(s,o,u,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function _f(s){return-1!==s}function pr(s){return 32767&s}function Ms(s,o){let u=function yf(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let nc=!0;function ka(s){const o=nc;return nc=s,o}let Td=0;const ci={};function ps(s,o){const u=Mu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,rc(c.data,s),rc(o,null),rc(c.blueprint,null));const d=Pa(s,o),p=s.injectorIndex;if(_f(d)){const y=pr(d),E=Ms(d,o),C=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|C[y+A]}return o[p+8]=d,p}function rc(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Mu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Pa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Ko(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function no(s,o,u){!function Sd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(On)&&(c=u[On]),null==c&&(c=u[On]=Td++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Ho(s,o,u){if(u&Je.Optional||void 0!==s)return s;Me()}function Wo(s,o,u,c){if(u&Je.Optional&&void 0===c&&(c=null),0==(u&(Je.Self|Je.Host))){const d=s[9],p=Sn(void 0);try{return d?d.get(o,c,u&Je.Optional):xr(o,c,u&Je.Optional)}finally{Sn(p)}}return Ho(c,0,u)}function Go(s,o,u,c=Je.Default,d){if(null!==s){if(1024&o[2]){const y=function Ef(s,o,u,c,d){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=Ad(p,y,u,c|Je.Self,ci);if(E!==ci)return E;let C=p.parent;if(!C){const A=y[21];if(A){const N=A.get(u,ci,c);if(N!==ci)return N}C=Ko(y),y=y[15]}p=C}return d}(s,o,u,c,ci);if(y!==ci)return y}const p=Ad(s,o,u,c,ci);if(p!==ci)return p}return Wo(o,u,c,d)}function Ad(s,o,u,c,d){const p=function wf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(On)?s[On]:void 0;return"number"==typeof o?o>=0?255&o:ic:o}(u);if("function"==typeof p){if(!yd(o,s,c))return c&Je.Host?Ho(d,0,c):Wo(o,u,c,d);try{const y=p(c);if(null!=y||c&Je.Optional)return y;Me()}finally{vd()}}else if("number"==typeof p){let y=null,E=Mu(s,o),C=-1,A=c&Je.Host?o[16][6]:null;for((-1===E||c&Je.SkipSelf)&&(C=-1===E?Pa(s,o):o[E+8],-1!==C&&ku(c,!1)?(y=o[1],E=pr(C),o=Ms(C,o)):E=-1);-1!==E;){const N=o[1];if(zo(p,E,N.data)){const L=Nu(E,o,u,y,c,A);if(L!==ci)return L}C=o[E+8],-1!==C&&ku(c,o[1].data[E+8]===A)&&zo(p,E,o)?(y=N,E=pr(C),o=Ms(C,o)):E=-1}}return d}function Nu(s,o,u,c,d,p){const y=o[1],E=y.data[s+8],N=Fa(E,y,u,null==c?Bl(E)&&nc:c!=y&&0!=(3&E.type),d&Je.Host&&p===E);return null!==N?Wi(o,y,N,E):ci}function Fa(s,o,u,c,d){const p=s.providerIndexes,y=o.data,E=1048575&p,C=s.directiveStart,N=p>>20,q=d?E+N:s.directiveEnd;for(let ee=c?E:E+N;ee<q;ee++){const Ie=y[ee];if(ee<C&&u===Ie||ee>=C&&Ie.type===u)return ee}if(d){const ee=y[C];if(ee&&ui(ee)&&ee.type===u)return C}return null}function Wi(s,o,u,c){let d=s[u];const p=o.data;if(function ec(s){return s instanceof bi}(d)){const y=d;y.resolving&&function Qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${u}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(p[u]));const E=ka(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Sn(y.injectImpl):null;yd(s,c,Je.Default);try{d=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Jl(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=hd(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&Sn(C),ka(E),y.resolving=!1,vd()}}return d}function zo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ku(s,o){return!(s&Je.Self||s&Je.Host&&o)}class qo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Go(this._tNode,this._lView,o,c,u)}}function ic(){return new qo(hr(),Ne())}function Ns(s){return An(()=>{const o=s.prototype.constructor,u=o[Er]||Zo(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Er]||Zo(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Zo(s){return He(s)?()=>{const o=Zo(X(s));return o&&o()}:Vr(s)}function Ko(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Pu(s){return function Oa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(Ma(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(hr(),s)}const Yo="__parameters__";function Xo(s,o,u){return An(()=>{const c=function sc(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(C,A,N){const L=C.hasOwnProperty(Yo)?C[Yo]:Object.defineProperty(C,Yo,{value:[]})[Yo];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Nn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=it({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function kn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),kn(c,o)):o!==s&&o.push(c)}return o}function ms(s,o){s.forEach(u=>Array.isArray(u)?ms(u,o):o(u))}function io(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function zr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function pt(s,o,u){let c=qi(s,o);return c>=0?s[1|c]=u:(c=~c,function bf(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function oc(s,o){const u=qi(s,o);if(u>=0)return s[1|u]}function qi(s,o){return function La(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const Fi={},Uu="__NG_DI_FLAG__",Ps="ngTempTokenPath",qr=/\n/gm,jn="__source";let lo;function co(s){const o=lo;return lo=s,o}function gr(s,o=Je.Default){if(void 0===lo)throw new Te(-203,!1);return null===lo?xr(s,void 0,o):lo.get(s,o&Je.Optional?null:void 0,o)}function Ln(s,o=Je.Default){return(function er(){return lr}()||gr)(X(s),o)}function Di(s,o=Je.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Ln(s,o)}function b(s){const o=[];for(let u=0;u<s.length;u++){const c=X(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Te(900,!1);let d,p=Je.Default;for(let y=0;y<c.length;y++){const E=c[y],C=R(E);"number"==typeof C?-1===C?d=E.token:p|=C:d=E}o.push(Ln(d,p))}else o.push(Ln(c))}return o}function T(s,o){return s[Uu]=o,s.prototype[Uu]=o,s}function R(s){return s[Uu]}const we=T(Xo("Optional"),8),ut=T(Xo("SkipSelf"),4);var Ki=(()=>((Ki=Ki||{})[Ki.Important=1]="Important",Ki[Ki.DashCase=2]="DashCase",Ki))();const lc=new Map;let Hg=0;const g="__ngContext__";function _(s,o){dr(o)?(s[g]=o[20],function Fy(s){lc.set(s[20],s)}(o)):s[g]=o}function cc(s,o){return undefined(s,o)}function Ha(s){const o=s[3];return wi(o)?o[3]:o}function Wa(s){return Zg(s[13])}function na(s){return Zg(s[4])}function Zg(s){for(;null!==s&&!wi(s);)s=s[4];return s}function Gu(s,o,u,c,d){if(null!=c){let p,y=!1;wi(c)?p=c:dr(c)&&(y=!0,c=c[0]);const E=Wn(c);0===s&&null!==u?null==d?E0(o,u,E):zu(o,u,E,d||null,!0):1===s&&null!==u?zu(o,u,E,d||null,!0):2===s?function Xg(s,o,u){const c=Os(s,o);c&&function $y(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function JD(s,o,u,c,d){const p=u[7];p!==Wn(u)&&Gu(o,s,c,p,d);for(let E=10;E<u.length;E++){const C=u[E];fc(C[1],C,s,o,c,p)}}(o,s,p,u,d)}}function Of(s,o,u){return s.createElement(o,u)}function _0(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,qn(d,-1)),u.splice(c,1)}function Vy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&_0(d,c),o>0&&(s[u-1][4]=c[4]);const p=zr(s,10+o);!function dc(s,o){fc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function y0(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&fc(s,o,u,3,null,null),function qD(s){let o=s[13];if(!o)return Uy(s[1],s);for(;o;){let u=null;if(dr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)dr(o)&&Uy(o[1],o),o=o[3];null===o&&(o=s),dr(o)&&Uy(o[1],o),u=o&&o[4]}o=u}}(o)}}function Uy(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function QD(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof bi)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],C=p[y+1];try{C.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function YD(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):Wn(o[y]),C=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],C,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const y=c[d=u[p+1]];u[p].call(y)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&wi(o[3])){u!==o[3]&&_0(u,o);const c=o[19];null!==c&&c.detachView(s)}!function Od(s){lc.delete(s[20])}(o)}}function v0(s,o,u){return function w0(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===vt.None||d===vt.Emulated)return null}return Rr(c,u)}(s,o.parent,u)}function zu(s,o,u,c,d){s.insertBefore(o,u,c,d)}function E0(s,o,u){s.appendChild(o,u)}function By(s,o,u,c,d){null!==c?zu(s,o,u,c,d):E0(s,o,u)}function Os(s,o){return s.parentNode(o)}let Zy,C0=function Hy(s,o,u){return 40&s.type?Rr(s,u):null};function Qg(s,o,u,c){const d=v0(s,c,o),p=o[11],E=function jy(s,o,u){return C0(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)By(p,d,u[C],E,!1);else By(p,d,u,E,!1)}function hc(s,o){if(null!==o){const u=o.type;if(3&u)return Rr(o,s);if(4&u)return Ff(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return hc(s,c);{const d=s[o.index];return wi(d)?Ff(-1,d):Wn(d)}}if(32&u)return cc(o,s)()||Wn(s[o.index]);{const c=Gy(s,o);return null!==c?Array.isArray(c)?c[0]:hc(Ha(s[16]),c):hc(s,o.next)}}return null}function Gy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ff(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return hc(c,d)}return o[7]}function Lf(s,o,u,c,d,p,y){for(;null!=u;){const E=c[u.index],C=u.type;if(y&&0===o&&(E&&_(Wn(E),c),u.flags|=4),64!=(64&u.flags))if(8&C)Lf(s,o,u.child,c,d,p,!1),Gu(o,s,d,E,p);else if(32&C){const A=cc(u,c);let N;for(;N=A();)Gu(o,s,d,N,p);Gu(o,s,d,E,p)}else 16&C?Ud(s,o,c,u,d,p):Gu(o,s,d,E,p);u=y?u.projectionNext:u.next}}function fc(s,o,u,c,d,p){Lf(u,c,s.firstChild,o,d,p,!1)}function Ud(s,o,u,c,d,p){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Gu(o,s,d,C[A],p);else Lf(s,o,C,y[3],d,p,!0)}function Jg(s,o,u){s.setAttribute(o,"style",u)}function em(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function nT(s){Zy=s}class rm{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qa(s){return s instanceof rm?s.changingThisBreaksApplicationSecurity:s}const jf=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function $d(s){const o=function Zu(){const s=Ne();return s&&s[12]}();return o?o.sanitize(Cr.URL,s)||"":function Za(s,o){const u=function lT(s){return s instanceof rm&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?qa(s):function gc(s){return(s=String(s)).match(jf)?s:"unsafe:"+s}(ve(s))}const am=new Nn("ENVIRONMENT_INITIALIZER"),jd=new Nn("INJECTOR",-1),Jy=new Nn("INJECTOR_DEF_TYPES");class k0{get(o,u=Fi){if(u===Fi){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}function CT(...s){return{\u0275providers:P0(0,s)}}function P0(s,...o){const u=[],c=new Set;let d;return ms(o,p=>{const y=p;ev(y,u,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&O0(d,u),u}function O0(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];ms(d,p=>{o.push(p)})}}function ev(s,o,u,c){if(!(s=X(s)))return!1;let d=null,p=Lr(s);const y=!p&&M(s);if(p||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(p=Lr(C),!p)return!1;d=C}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)ev(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(d);try{ms(p.imports,N=>{ev(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&O0(A,o)}if(!E){const A=Vr(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Pt},{provide:Jy,useValue:d,multi:!0},{provide:am,useValue:()=>Ln(d),multi:!0})}const C=p.providers;null==C||E||ms(C,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}const bT=pe({provide:String,useValue:pe});function nv(s){return null!==s&&"object"==typeof s&&bT in s}function mc(s){return"function"==typeof s}const rv=new Nn("Set Injector scope."),zf={},TT={};let um;function qf(){return void 0===um&&(um=new k0),um}class Ku{}class iv extends Ku{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cm(o,y=>this.processProvider(y)),this.records.set(jd,Hd(void 0,this)),d.has("environment")&&this.records.set(Ku,Hd(void 0,this));const p=this.records.get(rv);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Jy.multi,Pt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=co(this),c=Sn(void 0);try{return o()}finally{co(u),Sn(c)}}get(o,u=Fi,c=Je.Default){this.assertNotDestroyed();const d=co(this),p=Sn(void 0);try{if(!(c&Je.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function U0(s){return"function"==typeof s||"object"==typeof s&&s instanceof Nn}(o)&&tn(o);E=C&&this.injectableDefInScope(C)?Hd(lm(o),zf):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Je.Self?qf():this.parent).get(o,u=c&Je.Optional&&u===Fi?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Ps]=y[Ps]||[]).unshift(le(o)),d)throw y;return function B(s,o,u,c){const d=s[Ps];throw o[jn]&&d.unshift(o[jn]),s.message=function Y(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(qr,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Ps]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Sn(p),co(d)}}resolveInjectorInitializers(){const o=co(this),u=Sn(void 0);try{const c=this.get(am.multi,Pt,Je.Self);for(const d of c)d()}finally{co(o),Sn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(le(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let u=mc(o=X(o))?o:X(o&&o.provide);const c=function AT(s){return nv(s)?Hd(void 0,s.useValue):Hd(V0(s),zf)}(o);if(mc(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Hd(void 0,zf,!0),d.factory=()=>b(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===zf&&(u.value=TT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function RT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function lm(s){const o=tn(s),u=null!==o?o.factory:Vr(s);if(null!==u)return u;if(s instanceof Nn)throw new Te(204,!1);if(s instanceof Function)return function ST(s){const o=s.length;if(o>0)throw function so(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Te(204,!1);const u=function fn(s){const o=s&&(s[Jr]||s[Ni]);if(o){const u=function wr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Te(204,!1)}function V0(s,o,u){let c;if(mc(s)){const d=X(s);return Vr(d)||lm(d)}if(nv(s))c=()=>X(s.useValue);else if(function L0(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...b(s.deps||[]));else if(function F0(s){return!(!s||!s.useExisting)}(s))c=()=>Ln(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function xT(s){return!!s.deps}(s))return Vr(d)||lm(d);c=()=>new d(...b(s.deps))}return c}function Hd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function sv(s){return!!s.\u0275providers}function cm(s,o){for(const u of s)Array.isArray(u)?cm(u,o):sv(u)?cm(u.\u0275providers,o):o(u)}class MT{}class kT{resolveComponentFactory(o){throw function NT(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Yu=(()=>{class s{}return s.NULL=new kT,s})();function j0(){return Qu(hr(),Ne())}function Qu(s,o){return new _c(Rr(s,o))}let _c=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=j0,s})();function PT(s){return s instanceof _c?s.nativeElement:s}class Zf{}let OT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function FT(){const s=Ne(),u=ln(hr().index,s);return(dr(u)?u:s)[11]}(),s})(),LT=(()=>{class s{}return s.\u0275prov=it({token:s,providedIn:"root",factory:()=>null}),s})();class H0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const W0=new H0("14.2.12"),dm={};function hm(s){return s.ngOriginalError}class yc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&hm(o);for(;u&&hm(u);)u=hm(u);return u||null}}function ra(s){return s instanceof Function?s():s}function ov(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const mm="ng-template";function WT(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==ov(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function z0(s){return 4===s.type&&s.value!==mm}function GT(s,o,u){return o===(4!==s.type||u?s.value:mm)}function q0(s,o,u){let c=4;const d=s.attrs||[],p=function Z0(s){for(let o=0;o<s.length;o++)if(Ma(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!GT(s,C,u)||""===C&&1===o.length){if(go(c))return!1;y=!0}}else{const A=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!WT(s.attrs,A,u)){if(go(c))return!1;y=!0}continue}const L=tN(8&c?"class":C,d,z0(s),u);if(-1===L){if(go(c))return!1;y=!0;continue}if(""!==A){let q;q=L>p?"":d[L+1].toLowerCase();const ee=8&c?q:null;if(ee&&-1!==ov(ee,A,0)||2&c&&A!==q){if(go(c))return!1;y=!0}}}}else{if(!y&&!go(c)&&!go(C))return!1;if(y&&go(C))continue;y=!1,c=C|1&c}}return go(c)||y}function go(s){return 0==(1&s)}function tN(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function zT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Yf(s,o,u=!1){for(let c=0;c<o.length;c++)if(q0(s,o[c],u))return!0;return!1}function _m(s,o){return s?":not("+o.trim()+")":o}function ZT(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!go(y)&&(o+=_m(p,d),d=""),c=y,p=p||!go(c);u++}return""!==d&&(o+=_m(p,d)),o}const Kt={};function K0(s){av(Xt(),Ne(),$n()+s,!1)}function av(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Uo(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Bo(o,p,0,u)}hs(u)}function X0(s,o=null,u=null,c){const d=ye(s,o,u,c);return d.resolveInjectorInitializers(),d}function ye(s,o=null,u=null,c,d=new Set){const p=[u||Pt,CT(s)];return c=c||("object"==typeof s?void 0:le(s)),new iv(p,o||qf(),c||null,d)}let Hn=(()=>{class s{static create(u,c){if(Array.isArray(u))return X0({name:""},c,u,"");{const d=u.name??"";return X0({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Fi,s.NULL=new k0,s.\u0275prov=it({token:s,providedIn:"any",factory:()=>Ln(jd)}),s.__NG_ELEMENT_ID__=-1,s})();function tl(s,o=Je.Default){const u=Ne();return null===u?Ln(s,o):Go(hr(),u,X(s),o)}function iI(){throw new Error("invalid")}function Qa(s,o){return s<<17|o<<2}function Vs(s){return s>>17&32767}function dv(s){return 2|s}function ia(s){return(131068&s)>>2}function qd(s,o){return-131069&s|o<<2}function ep(s){return 1|s}function _I(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];Kl(d),y.contentQueries(2,o[p],p)}}}function Am(s,o,u,c,d,p,y,E,C,A,N){const L=o.blueprint.slice();return L[0]=d,L[2]=76|c,(null!==N||s&&1024&s[2])&&(L[2]|=1024),wa(L),L[3]=L[15]=s,L[8]=u,L[10]=y||s&&s[10],L[11]=E||s&&s[11],L[12]=C||s&&s[12]||null,L[9]=A||s&&s[9]||null,L[6]=p,L[20]=function Oy(){return Hg++}(),L[21]=N,L[16]=2==o.type?s[16]:L,L}function Xa(s,o,u,c,d){let p=s.data[o];if(null===p)p=function sp(s,o,u,c,d){const p=Oo(),y=Du(),C=s.data[o]=function wc(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,u,c,d),function md(){return $t.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const y=function bu(){const s=$t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ti(p,!0),p}function rl(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function xm(s,o,u){Vo(o);try{const c=s.viewQuery;null!==c&&Fm(1,c,u);const d=s.template;null!==d&&Kd(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&_I(s,o),s.staticViewQueries&&Fm(2,s.viewQuery,u);const p=s.components;null!==p&&function yI(s,o){for(let u=0;u<o.length;u++)dp(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,xs()}}function Rm(s,o,u,c){const d=o[2];if(128!=(128&d)){Vo(o);try{wa(o),function Ta(s){return $t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Kd(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&Uo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Bo(o,A,0,null),Id(o,0)}if(function cp(s){for(let o=Wa(s);null!==o;o=na(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(512&d[2])&&qn(p,1),d[2]|=512}}}(o),function mS(s){for(let o=Wa(s);null!==o;o=na(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];As(c)&&Rm(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&_I(s,o),y){const A=s.contentCheckHooks;null!==A&&Uo(o,A)}else{const A=s.contentHooks;null!==A&&Bo(o,A,1),Id(o,1)}!function vv(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)hs(~d);else{const p=d,y=u[++c],E=u[++c];_d(y,p),E(2,o[p])}}}finally{hs(-1)}}(s,o);const E=s.components;null!==E&&function wv(s,o){for(let u=0;u<o.length;u++)bI(s,o[u])}(o,E);const C=s.viewQuery;if(null!==C&&Fm(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Uo(o,A)}else{const A=s.viewHooks;null!==A&&Bo(o,A,2),Id(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,qn(o[3],-1))}finally{xs()}}}function Kd(s,o,u,c,d){const p=$n(),y=2&c;try{hs(-1),y&&o.length>22&&av(s,o,22,!1),u(c,d)}finally{hs(p)}}function Mm(s,o,u){!eo()||(function EI(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||ps(u,o),_(c,o);const y=u.initialInputs;for(let E=d;E<p;E++){const C=s.data[E],A=ui(C);A&&pS(o,u,C);const N=Wi(o,s,E,u);_(N,o),null!==y&&Rv(0,E-d,N,C,0,y),A&&(ln(u.index,o)[8]=N)}}(s,o,u,Rr(u,o)),128==(128&u.flags)&&function II(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,y=function hf(){return $t.lFrame.currentDirectiveIndex}();try{hs(p);for(let E=c;E<d;E++){const C=s.data[E],A=o[E];Lo(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Qd(C,A)}}finally{hs(-1),Lo(y)}}(s,o,u))}function Nm(s,o,u=Rr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function op(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Iv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Iv(s,o,u,c,d,p,y,E,C,A){const N=22+c,L=N+d,q=function dS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Kt);return u}(N,L),ee="function"==typeof A?A():A;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:E,declTNode:o,data:q.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function vI(s,o,u,c){const d=il(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&oa(s).push(c,d.length-1))}function Cv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function up(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,y=[];let E=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=d[A],L=N.inputs,q=null===p||z0(o)?null:CI(L,p);y.push(q),E=Cv(L,A,E),C=Cv(N.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}function _i(s,o,u,c,d,p,y,E){const C=Rr(o,u);let N,A=o.inputs;!E&&null!=A&&(N=A[c])?(Lm(s,u,N,c,d),Bl(o)&&bv(u,o.index)):3&o.type&&(c=function wI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,p.setProperty(C,c,d))}function bv(s,o){const u=ln(o,s);16&u[2]||(u[2]|=32)}function Yd(s,o,u,c){let d=!1;if(eo()){const p=function Sv(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];Yf(u,y.selectors,!1)&&(d||(d=[]),no(ps(u,o),s,y.type),ui(y)?(km(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==p){d=!0,Xd(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const L=p[N];L.providersResolver&&L.providersResolver(L)}let E=!1,C=!1,A=rl(s,o,p.length,null);for(let N=0;N<p.length;N++){const L=p[N];u.mergedAttrs=Na(u.mergedAttrs,L.hostAttrs),xv(s,u,o,A,L),Pm(A,L,y),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const q=L.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}up(s,u)}y&&function Av(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Te(-301,!1);c.push(o[d],p)}}}(u,c,y)}return u.mergedAttrs=Na(u.mergedAttrs,u.attrs),d}function Dv(s,o,u,c,d,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function Tv(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(c,d,y)}}function Qd(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function km(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Pm(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ui(o)&&(u[""]=s)}}function Xd(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function xv(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Vr(d.type)),y=new bi(p,ui(d),tl);s.blueprint[c]=y,u[c]=y,Dv(s,o,0,c,rl(s,u,d.hostVars,Kt),d)}function pS(s,o,u){const c=Rr(o,s),d=op(u),p=s[10],y=th(s,Am(s,d,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=y}function Us(s,o,u,c,d,p){const y=Rr(s,o);!function Jd(s,o,u,c,d,p,y){if(null==p)s.removeAttribute(o,d,u);else{const E=null==y?ve(p):y(p,c||"",d);s.setAttribute(o,d,E,u)}}(o[11],y,p,s.value,u,c,d)}function Rv(s,o,u,c,d,p){const y=p[o];if(null!==y){const E=c.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],L=y[C++];null!==E?c.setInput(u,L,A,N):u[N]=L}}}function CI(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Mv(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function bI(s,o){const u=ln(o,s);if(As(u)){const c=u[1];48&u[2]?Rm(c,u,c.template,u[8]):u[5]>0&&eh(u)}}function eh(s){for(let c=Wa(s);null!==c;c=na(c))for(let d=10;d<c.length;d++){const p=c[d];if(As(p))if(512&p[2]){const y=p[1];Rm(y,p,y.template,p[8])}else p[5]>0&&eh(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=ln(u[c],s);As(d)&&d[5]>0&&eh(d)}}function dp(s,o){const u=ln(o,s),c=u[1];(function Ec(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),xm(c,u,u[8])}function th(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Nv(s){for(;s;){s[2]|=32;const o=Ha(s);if($l(s)&&!o)return s;s=o}return null}function Om(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{Rm(s,o,s.template,u)}catch(y){throw c&&fp(o,y),y}finally{d.end&&d.end()}}function Fm(s,o,u){Kl(0),o(s,u)}function il(s){return s[7]||(s[7]=[])}function oa(s){return s.cleanup||(s.cleanup=[])}function fp(s,o){const u=s[9],c=u?u.get(yc,null):null;c&&c.handleError(o)}function Lm(s,o,u,c,d){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,d,c,E):C[E]=d}}function Ic(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=me(d,E):2==p&&(c=me(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function sl(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Wn(p)),wi(p))for(let E=10;E<p.length;E++){const C=p[E],A=C[1].firstChild;null!==A&&sl(C[1],C,A,c)}const y=u.type;if(8&y)sl(s,o,u.child,c);else if(32&y){const E=cc(u,o);let C;for(;C=E();)c.push(C)}else if(16&y){const E=Gy(o,u);if(Array.isArray(E))c.push(...E);else{const C=Ha(o[16]);sl(C[1],C,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class Ja{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return sl(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(wi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Vy(o,c),zr(u,c))}this._attachedToViewContainer=!1}y0(this._lView[1],this._lView)}onDestroy(o){vI(this._lView[1],this._lView,null,o)}markForCheck(){Nv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Om(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function m0(s,o){fc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class yS extends Ja{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Om(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Vm extends Yu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=M(o);return new pp(u,this.ngModule)}}function DI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class wS{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,dm,c);return d!==dm||u===dm?d:this.parentInjector.get(o,u,c)}}class pp extends MT{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function KT(s){return s.map(ZT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return DI(this.componentDef.inputs)}get outputs(){return DI(this.componentDef.outputs)}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof Ku?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new wS(o,p):o,E=y.get(Zf,null);if(null===E)throw new Te(407,!1);const C=y.get(LT,null),A=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=c?function hS(s,o,u){return s.selectRootElement(o,u===vt.ShadowDom)}(A,c,this.componentDef.encapsulation):Of(A,N,function vS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),q=this.componentDef.onPush?288:272,ee=Iv(0,null,null,1,0,null,null,null,null,null),Ie=Am(null,ee,null,q,null,null,E,A,C,y,null);let je,Ze;Vo(Ie);try{const lt=function SI(s,o,u,c,d,p){const y=u[1];u[22]=s;const C=Xa(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Ic(C,A,!0),null!==s&&(fs(d,s,A),null!==C.classes&&em(d,s,C.classes),null!==C.styles&&Jg(d,s,C.styles)));const N=c.createRenderer(s,o),L=Am(u,op(o),null,o.onPush?32:16,u[22],C,c,N,p||null,null,null);return y.firstCreatePass&&(no(ps(C,u),y,o.type),km(y,C),Xd(C,u.length,1)),th(u,L),u[22]=L}(L,this.componentDef,Ie,E,A);if(L)if(c)fs(A,L,["ng-version",W0.full]);else{const{attrs:Mt,classes:Pe}=function YT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!go(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Mt&&fs(A,L,Mt),Pe&&Pe.length>0&&em(A,L,Pe.join(" "))}if(Ze=No(ee,22),void 0!==u){const Mt=Ze.projection=[];for(let Pe=0;Pe<this.ngContentSelectors.length;Pe++){const Bt=u[Pe];Mt.push(null!=Bt?Array.from(Bt):null)}}je=function nh(s,o,u,c){const d=u[1],p=function lp(s,o,u){const c=hr();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),xv(s,c,o,rl(s,o,1,null),u),up(s,c));const d=Wi(o,s,c.directiveStart,c);_(d,o);const p=Rr(c,o);return p&&_(p,o),d}(d,u,o);if(s[8]=u[8]=p,null!==c)for(const E of c)E(p,o);if(o.contentQueries){const E=hr();o.contentQueries(1,p,E.directiveStart)}const y=hr();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(hs(y.index),Dv(u[1],y,0,y.directiveStart,y.directiveEnd,o),Qd(o,p)),p}(lt,this.componentDef,Ie,[IS]),xm(ee,Ie,null)}finally{xs()}return new TI(this.componentType,je,Qu(Ze,Ie),Ie,Ze)}}class TI extends class B0{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new yS(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Lm(p[1],p,d,o,u),bv(p,this._tNode.index)}}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function IS(){const s=hr();Tu(Ne()[1],s)}function Um(s){let o=function AI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ui(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Te(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=Bm(s.inputs),y.declaredInputs=Bm(s.declaredInputs),y.outputs=Bm(s.outputs);const E=d.hostBindings;E&&Pv(s,E);const C=d.viewQuery,A=d.contentQueries;if(C&&xI(s,C),A&&kv(s,A),de(s.inputs,d.inputs),de(s.declaredInputs,d.declaredInputs),de(s.outputs,d.outputs),ui(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===Um&&(u=!1)}}o=Object.getPrototypeOf(o)}!function CS(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Na(d.hostAttrs,u=Na(u,d.hostAttrs))}}(c)}function Bm(s){return s===Wr?{}:s===Pt?[]:s}function xI(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function kv(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function Pv(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let $m=null;function bc(){if(!$m){const s=Vt.Symbol;if(s&&s.iterator)$m=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&($m=c)}}}return $m}function ol(s){return!!_p(s)&&(Array.isArray(s)||!(s instanceof Map)&&bc()in s)}function _p(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Si(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Fv(s,o,u,c){const d=Ne();return Si(d,Sa(),o)&&(Xt(),Us(Fn(),d,s,o,u,c)),Fv}function Dc(s,o,u,c){return Si(s,Sa(),u)?o+ve(u)+c:Kt}function Bv(s,o,u,c,d,p,y,E){const C=Ne(),A=Xt(),N=s+22,L=A.firstCreatePass?function PI(s,o,u,c,d,p,y,E,C){const A=o.consts,N=Xa(o,s,4,y||null,Ci(A,E));Yd(o,u,N,Ci(A,C)),Tu(o,N);const L=N.tViews=Iv(2,N,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),L.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,u,c,d,p,y):A.data[N];ti(L,!1);const q=C[11].createComment("");Qg(A,C,q,L),_(q,C),th(C,C[N]=Mv(q,C,q,L)),_a(L)&&Mm(A,C,L),null!=y&&Nm(C,L,E)}function Gm(s,o,u){const c=Ne();return Si(c,Sa(),o)&&_i(Xt(),Fn(),c,s,o,c[11],u,!1),Gm}function sh(s,o,u,c,d){const y=d?"class":"style";Lm(s,u,o.inputs[y],y,c)}function Ip(s,o,u,c){const d=Ne(),p=Xt(),y=22+s,E=d[11],C=d[y]=Of(E,o,function Xl(){return $t.lFrame.currentNamespace}()),A=p.firstCreatePass?function OI(s,o,u,c,d,p,y){const E=o.consts,A=Xa(o,s,2,d,Ci(E,p));return Yd(o,u,A,Ci(E,y)),null!==A.attrs&&Ic(A,A.attrs,!1),null!==A.mergedAttrs&&Ic(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,d,0,o,u,c):p.data[y];ti(A,!0);const N=A.mergedAttrs;null!==N&&fs(E,C,N);const L=A.classes;null!==L&&em(E,C,L);const q=A.styles;return null!==q&&Jg(E,C,q),64!=(64&A.flags)&&Qg(p,d,C,A),0===function Ia(){return $t.lFrame.elementDepthCount}()&&_(C,d),function gd(){$t.lFrame.elementDepthCount++}(),_a(A)&&(Mm(p,d,A),function Ev(s,o,u){if(Do(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}(p,A,d)),null!==c&&Nm(d,A),Ip}function aa(){let s=hr();Du()?function Fo(){$t.lFrame.isParent=!1}():(s=s.parent,ti(s,!1));const o=s;!function Ca(){$t.lFrame.elementDepthCount--}();const u=Xt();return u.firstCreatePass&&(Tu(u,s),Do(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Au(s){return 0!=(16&s.flags)}(o)&&sh(u,o,Ne(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xu(s){return 0!=(32&s.flags)}(o)&&sh(u,o,Ne(),o.stylesWithoutHost,!1),aa}function zm(s,o,u,c){return Ip(s,o,u,c),aa(),zm}function Xi(){return Ne()}function Km(s){return!!s&&"function"==typeof s.then}function Hv(s){return!!s&&"function"==typeof s.subscribe}const Mc=Hv;function Wv(s,o,u,c){const d=Ne(),p=Xt(),y=hr();return function VI(s,o,u,c,d,p,y,E){const C=_a(c),N=s.firstCreatePass&&oa(s),L=o[8],q=il(o);let ee=!0;if(3&c.type||E){const Ze=Rr(c,o),lt=E?E(Ze):Ze,Mt=q.length,Pe=E?vn=>E(Wn(vn[c.index])):c.index;let Bt=null;if(!E&&C&&(Bt=function Gv(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===c){const E=o[7],C=d[p+2];return E.length>C?E[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=p,Bt.__ngLastListenerFn__=p,ee=!1;else{p=zv(c,o,L,p,!1);const vn=u.listen(lt,d,p);q.push(p,vn),N&&N.push(d,Pe,Mt,Mt+1)}}else p=zv(c,o,L,p,!1);const Ie=c.outputs;let je;if(ee&&null!==Ie&&(je=Ie[d])){const Ze=je.length;if(Ze)for(let lt=0;lt<Ze;lt+=2){const sr=o[je[lt]][je[lt+1]].subscribe(p),fu=q.length;q.push(p,sr),N&&N.push(d,c.index,fu,-(fu+1))}}}(p,d,d[11],y,s,o,0,c),Wv}function UI(s,o,u,c){try{return!1!==u(c)}catch(d){return fp(s,d),!1}}function zv(s,o,u,c,d){return function p(y){if(y===Function)return c;Nv(2&s.flags?ln(s.index,o):o);let C=UI(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)C=UI(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function BI(s=1){return function Rs(s){return($t.lFrame.contextLView=function wd(s,o){for(;s>0;)o=o[15],s--;return o}(s,$t.lFrame.contextLView))[8]}(s)}function jr(s,o,u){return al(s,"",o,"",u),jr}function al(s,o,u,c,d){const p=Ne(),y=Dc(p,o,u,c);return y!==Kt&&_i(Xt(),Fn(),p,s,y,p[11],d,!1),al}function ce(s,o,u,c,d){const p=s[u+1],y=null===o;let E=c?Vs(p):ia(p),C=!1;for(;0!==E&&(!1===C||y);){const N=s[E+1];Ue(s[E],o)&&(C=!0,s[E+1]=c?ep(N):dv(N)),E=c?Vs(N):ia(N)}C&&(s[u+1]=c?dv(p):ep(p))}function Ue(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&qi(s,o)>=0}function Tt(s,o){return function Ge(s,o,u,c){const d=Ne(),p=Xt(),y=function ds(s){const o=$t.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function ll(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[$n()],y=function Jm(s,o){return o>=s.expandoStartIndex}(s,u);(function Dp(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function NS(s,o,u,c){const d=function Zl(s){const o=$t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=ah(u=t_(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=t_(d,s,o,u,c),null===p){let C=function e_(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ia(c))return s[Vs(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=t_(null,s,o,C[1],c),C=ah(C,o.attrs,c),function kS(s,o,u,c){s[Vs(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function bp(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=ah(c,s[p].hostAttrs,u);return ah(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function DS(s,o,u,c,d,p){let y=p?o.classBindings:o.styleBindings,E=Vs(y),C=ia(y);s[c]=u;let N,A=!1;if(Array.isArray(u)){const L=u;N=L[1],(null===N||qi(L,N)>0)&&(A=!0)}else N=u;if(d)if(0!==C){const q=Vs(s[E+1]);s[c+1]=Qa(q,E),0!==q&&(s[q+1]=qd(s[q+1],c)),s[E+1]=function oI(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Qa(E,0),0!==E&&(s[E+1]=qd(s[E+1],c)),E=c;else s[c+1]=Qa(C,0),0===E?E=c:s[C+1]=qd(s[C+1],c),C=c;A&&(s[c+1]=dv(s[c+1])),ce(s,N,c,!0),ce(s,N,c,!1),function Ye(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&qi(p,o)>=0&&(u[c+1]=ep(u[c+1]))}(o,N,s,c,p),y=Qa(E,C),p?o.classBindings=y:o.styleBindings=y}(d,p,o,u,y,c)}}(p,s,y,c),o!==Kt&&Si(d,y,o)&&function Yv(s,o,u,c,d,p,y,E){if(!(3&o.type))return;const C=s.data,A=C[E+1];uh(function Cm(s){return 1==(1&s)}(A)?ru(C,o,u,d,ia(A),y):void 0)||(uh(p)||function Im(s){return 2==(2&s)}(A)&&(p=ru(C,null,u,d,E,y)),function eT(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Ki.DashCase;null==d?s.removeStyle(u,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Ki.Important),s.setStyle(u,c,d,p))}}(c,y,Pi($n(),u),d,p))}(p,p.data[$n()],d,d[11],s,d[y+1]=function ue(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(qa(s)))),s}(o,u),c,y)}(s,o,null,!0),Tt}function t_(s,o,u,c,d){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=ah(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function ah(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),pt(s,y,!!u||o[++p]))}return void 0===s?null:s}function ru(s,o,u,c,d,p){const y=null===o;let E;for(;d>0;){const C=s[d],A=Array.isArray(C),N=A?C[1]:C,L=null===N;let q=u[d+1];q===Kt&&(q=L?Pt:void 0);let ee=L?oc(q,c):N===c?q:void 0;if(A&&!uh(ee)&&(ee=oc(C,c)),uh(ee)&&(E=ee,y))return E;const Ie=s[d+1];d=y?Vs(Ie):ia(Ie)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(E=oc(C,c))}return E}function uh(s){return void 0!==s}function $s(s,o=""){const u=Ne(),c=Xt(),d=s+22,p=c.firstCreatePass?Xa(c,d,1,o,null):c.data[d],y=u[d]=function Kg(s,o){return s.createText(o)}(u[11],o);Qg(c,u,y,p),ti(p,!1)}function Qv(s){return cl("",s,""),Qv}function cl(s,o,u){const c=Ne(),d=Dc(c,s,o,u);return d!==Kt&&function Cn(s,o,u){const c=Pi(o,s);!function Ly(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,$n(),d),cl}const _l=void 0;var o_=["en",[["a","p"],["AM","PM"],_l],[["AM","PM"],_l,_l],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_l,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_l,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_l,"{1} 'at' {0}",_l],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JI(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ua={};function tw(s){const o=function eC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=rw(o);if(u)return u;const c=o.split("-")[0];if(u=rw(c),u)return u;if("en"===c)return o_;throw new Te(701,!1)}function nw(s){return tw(s)[Nt.PluralCase]}function rw(s){return s in ua||(ua[s]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[s]),ua[s]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const gn="en-US";let iw=gn;function Sr(s,o,u,c,d){if(s=X(s),Array.isArray(s))for(let p=0;p<s.length;p++)Sr(s[p],o,u,c,d);else{const p=Xt(),y=Ne();let E=mc(s)?s:X(s.provide),C=V0(s);const A=hr(),N=1048575&A.providerIndexes,L=A.directiveStart,q=A.providerIndexes>>20;if(mc(s)||!s.multi){const ee=new bi(C,d,tl),Ie=p_(E,o,d?N:N+q,L);-1===Ie?(no(ps(A,y),p,E),dn(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ee),y.push(ee)):(u[Ie]=ee,y[Ie]=ee)}else{const ee=p_(E,o,N+q,L),Ie=p_(E,o,N,N+q),je=ee>=0&&u[ee],Ze=Ie>=0&&u[Ie];if(d&&!Ze||!d&&!je){no(ps(A,y),p,E);const lt=function CC(s,o,u,c,d){const p=new bi(s,u,tl);return p.multi=[],p.index=o,p.componentProviders=0,mw(p,d,c&&!u),p}(d?YS:El,u.length,d,c,C);!d&&Ze&&(u[Ie].providerFactory=lt),dn(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(lt),y.push(lt)}else dn(p,s,ee>-1?ee:Ie,mw(u[d?Ie:ee],C,!d&&c));!d&&c&&Ze&&u[Ie].componentProviders++}}}function dn(s,o,u,c){const d=mc(o),p=function DT(s){return!!s.useClass}(o);if(d||p){const C=(p?X(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[c,C]):A[N+1].push(c,C)}else A.push(u,C)}}}function mw(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function p_(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function El(s,o,u,c){return xi(this.multi,[])}function YS(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Wi(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),xi(d,p);for(let C=y;C<E.length;C++)p.push(E[C])}else p=[],xi(d,p);return p}function xi(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Eh(s,o=[]){return u=>{u.providersResolver=(c,d)=>function KS(s,o,u){const c=Xt();if(c.firstCreatePass){const d=ui(s);Sr(u,c.data,c.blueprint,d,!0),Sr(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Hc{}class yo{}function bC(s,o){return new DC(s,o??null)}class DC extends Hc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vm(this);const c=st(o);this._bootstrapComponents=ra(c.bootstrap),this._r3Injector=ye(o,u,[{provide:Hc,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class _w extends yo{constructor(o){super(),this.moduleType=o}create(o){return new DC(this.moduleType,o)}}class Qt extends Hc{constructor(o,u,c){super(),this.componentFactoryResolver=new Vm(this),this.instance=null;const d=new iv([...o,{provide:Hc,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],u||qf(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function yw(s,o,u=null){return new Qt(s,o,u).injector}let m_=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=P0(0,u.type),d=c.length>0?yw([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=it({token:s,providedIn:"environment",factory:()=>new s(Ln(Ku))}),s})();function Ih(s){s.getStandaloneInjector=o=>o.get(m_).getOrCreateStandaloneInjector(s)}function yi(s){return o=>{setTimeout(s,void 0,o)}}const da=class UC extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=yi(p),d&&(d=yi(d)),y&&(y=yi(y)));const E=super.subscribe({next:d,error:p,complete:y});return o instanceof $.w0&&o.add(E),E}};function BC(){return this._results[bc()]()}class js{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=bc(),c=js.prototype;c[u]||(c[u]=BC)}get changes(){return this._changes||(this._changes=new da)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=kn(o);(this._changesDetected=!function zi(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Th=(()=>{class s{}return s.__NG_ELEMENT_ID__=iA,s})();const v_=Th,$C=class extends v_{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=Am(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(c)),xm(c,d,o),new Ja(d)}};function iA(){return w_(hr(),Ne())}function w_(s,o){return 4&s.type?new $C(o,s,Qu(s,o)):null}let E_=(()=>{class s{}return s.__NG_ELEMENT_ID__=sA,s})();function sA(){return WC(hr(),Ne())}const oA=E_,jC=class extends oA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Qu(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Pa(this._hostTNode,this._hostLView);if(_f(o)){const u=Ms(o,this._hostLView),c=pr(o);return new qo(u[1].data[c+8],u)}return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=HC(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const y=o.createEmbeddedView(u||{},p);return this.insert(y,d),y}createComponent(o,u,c,d,p){const y=o&&!function gs(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const L=u||{};E=L.index,c=L.injector,d=L.projectableNodes,p=L.environmentInjector||L.ngModuleRef}const C=y?o:new pp(M(o)),A=c||this.parentInjector;if(!p&&null==C.ngModule){const q=(y?A:this.parentInjector).get(Ku,null);q&&(p=q)}const N=C.create(A,d,void 0,p);return this.insert(N.hostView,E),N}insert(o,u){const c=o._lView,d=c[1];if(function zl(s){return wi(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const L=c[3],q=new jC(L,L[6],L[3]);q.detach(q.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function ZD(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],io(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function KD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(d,c,y,p);const E=Ff(p,y),C=c[11],A=Os(C,y[7]);return null!==A&&function Yg(s,o,u,c,d,p){c[0]=d,c[6]=o,fc(s,c,u,1,d,p)}(d,y[6],C,c,A,E),o.attachToViewContainerRef(),io(Tw(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=HC(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Vy(this._lContainer,u);c&&(zr(Tw(this._lContainer),u),y0(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Vy(this._lContainer,u);return c&&null!=zr(Tw(this._lContainer),u)?new Ja(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function HC(s){return s[8]}function Tw(s){return s[8]||(s[8]=[])}function WC(s,o){let u;const c=o[s.index];if(wi(c))u=c;else{let d;if(8&s.type)d=Wn(c);else{const p=o[11];d=p.createComment("");const y=Rr(s,o);zu(p,Os(p,y),d,function Vd(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=u=Mv(c,o,d,s),th(o,u)}return new jC(u,s,o)}class Sw{constructor(o){this.queryList=o,this.matches=null}clone(){return new Sw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Aw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new Aw(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Il(o,u).matches&&this.queries[u].setDirty()}}class GC{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class I_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new I_(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class xw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new xw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,zC(u,p)),this.matchTNodeWithReadOption(o,u,Fa(u,o,p,!1,!1))}else c===Th?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Fa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===_c||d===E_||d===Th&&4&u.type)this.addMatch(u.index,-2);else{const p=Fa(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function zC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function lA(s,o,u,c){return-1===u?function qC(s,o){return 11&s.type?Qu(s,o):4&s.type?w_(s,o):null}(o,s):-2===u?function Rw(s,o,u){return u===_c?Qu(o,s):u===Th?w_(o,s):u===E_?WC(o,s):void 0}(s,o,c):Wi(s,s[1],u,o)}function Yr(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,y=u.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:lA(o,p[A],y[C+1],u.metadata.read))}d.matches=E}return d.matches}function Bp(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=Yr(s,o,d,u);for(let E=0;E<p.length;E+=2){const C=p[E];if(C>0)c.push(y[E/2]);else{const A=p[E+1],N=o[-C];for(let L=10;L<N.length;L++){const q=N[L];q[17]===q[3]&&Bp(q[1],q,A,c)}if(null!==N[9]){const L=N[9];for(let q=0;q<L.length;q++){const ee=L[q];Bp(ee[1],ee,A,c)}}}}}return c}function C_(s){const o=Ne(),u=Xt(),c=Aa();Kl(c+1);const d=Il(u,c);if(s.dirty&&function Gl(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Bp(u,o,c,[]):Yr(u,o,d,c);s.reset(p,PT),s.notifyOnChanges()}return!0}return!1}function uu(s,o,u,c){const d=Xt();if(d.firstCreatePass){const p=hr();(function $p(s,o,u){null===s.queries&&(s.queries=new I_),s.queries.track(new xw(o,u))})(d,new GC(o,u,c),p.index),function Gc(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function kw(s,o,u){const c=new js(4==(4&u));vI(s,o,c,c.destroy),null===o[19]&&(o[19]=new Aw),o[19].queries.push(new Sw(c))}(d,Ne(),u)}function Nw(){return function cA(s,o){return s[19].queries[o].queryList}(Ne(),Aa())}function Il(s,o){return s.queries.getByIndex(o)}function Wp(...s){}const Gw=new Nn("Application Initializer");let N_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Wp,this.reject=Wp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Km(p))u.push(p);else if(Mc(p)){const y=new Promise((E,C)=>{p.subscribe({complete:E,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Ln(Gw,8))},s.\u0275prov=it({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const zw=new Nn("AppId",{providedIn:"root",factory:function Dl(){return`${P_()}${P_()}${P_()}`}});function P_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qw=new Nn("Platform Initializer"),wA=new Nn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Zw=new Nn("appBootstrapListener");let Kw=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=it({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const O_=new Nn("LocaleId",{providedIn:"root",factory:()=>Di(O_,Je.Optional|Je.SkipSelf)||function ii(){return typeof $localize<"u"&&$localize.locale||gn}()}),EA=new Nn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class CA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let F_=(()=>{class s{compileModuleSync(u){return new _w(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=ra(st(u).declarations).reduce((y,E)=>{const C=M(E);return C&&y.push(new pp(C)),y},[]);return new CA(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=it({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Xw=(()=>Promise.resolve(0))();function V_(s){typeof Zone>"u"?Xw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class vs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new da(!1),this.onMicrotaskEmpty=new da(!1),this.onStable=new da(!1),this.onError=new da(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function TA(){let s=Vt.requestAnimationFrame,o=Vt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function tb(s){const o=()=>{!function SA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Vt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Jw(s),s.isCheckStableRunning=!0,Gp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Jw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,y,E)=>{try{return eE(s),u.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),nb(s)}},onInvoke:(u,c,d,p,y,E,C)=>{try{return eE(s),u.invoke(d,p,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),nb(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Jw(s),Gp(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vs.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(vs.isInAngularZone())throw new Te(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,eb,Wp,Wp);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const eb={};function Gp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Jw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function eE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function nb(s){s._nesting--,Gp(s)}class Nh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new da,this.onMicrotaskEmpty=new da,this.onStable=new da,this.onError=new da}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const ed=new Nn(""),U_=new Nn("");let $_,B_=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$_||(function rb(s){$_=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vs.assertNotInAngularZone(),V_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())V_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Ln(vs),Ln(tE),Ln(U_))},s.\u0275prov=it({token:s,factory:s.\u0275fac}),s})(),tE=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return $_?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=it({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Tl=null;const j_=new Nn("AllowMultipleToken"),nE=new Nn("PlatformDestroyListeners");class H_{constructor(o,u){this.name=o,this.token=u}}function z_(s,o,u=[]){const c=`Platform: ${o}`,d=new Nn(c);return(p=[])=>{let y=iE();if(!y||y.injector.get(j_,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function zp(s){if(Tl&&!Tl.get(j_,!1))throw new Te(400,!1);Tl=s;const o=s.get(ub);(function G_(s){const o=s.get(qw,null);o&&o.forEach(u=>u())})(s)}(function ab(s=[],o){return Hn.create({name:o,providers:[{provide:rv,useValue:"platform"},{provide:nE,useValue:new Set([()=>Tl=null])},...s]})}(E,c))}return function ob(s){const o=iE();if(!o)throw new Te(401,!1);return o}()}}function iE(){return Tl?.get(ub)??null}let ub=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function sE(s,o){let u;return u="noop"===s?new Nh:("zone.js"===s?void 0:s)||new vs(o),u}(c?.ngZone,function lb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:vs,useValue:d}];return d.run(()=>{const y=Hn.create({providers:p,parent:this.injector,name:u.moduleType.name}),E=u.create(y),C=E.injector.get(yc,null);if(!C)throw new Te(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:N=>{C.handleError(N)}});E.onDestroy(()=>{Zp(this._modules,E),A.unsubscribe()})}),function qp(s,o,u){try{const c=u();return Km(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const A=E.injector.get(N_);return A.runInitializers(),A.donePromise.then(()=>(function sw(s){Le(s,"Expected localeId to be defined"),"string"==typeof s&&(iw=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(O_,gn)||gn),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const d=kh({},c);return function ib(s,o,u){const c=new _w(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(Ph);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(nE,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Ln(Hn))},s.\u0275prov=it({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function kh(s,o){return Array.isArray(o)?o.reduce(kh,s):{...s,...o}}let Ph=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new P.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{vs.assertNotInAngularZone(),V_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,re.T)(p,y.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof MT;if(!this._injector.get(N_).done)throw!d&&Ve(u),new Te(405,false);let y;y=d?u:this._injector.get(Yu).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function rE(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Hc),A=y.create(Hn.NULL,[],c||y.selector,E),N=A.location.nativeElement,L=A.injector.get(ed,null);return L?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Zp(this.components,A),L?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Zp(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Zw,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Zp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Ln(vs),Ln(Ku),Ln(yc))},s.\u0275prov=it({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Zp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let db=!0,hb=!1;function oE(){return hb=!0,db}function MA(){if(hb)throw new Error("Cannot enable prod mode after platform setup.");db=!1}let Oh=(()=>{class s{}return s.__NG_ELEMENT_ID__=aE,s})();function aE(s){return function K_(s,o,u){if(Bl(s)&&!u){const c=ln(s.index,o);return new Ja(c,c)}return 47&s.type?new Ja(o[16],o):null}(hr(),Ne(),16==(16&s))}class yb{constructor(){}supports(o){return ol(o)}create(o){return new FA(o)}}const cE=(s,o)=>o;class FA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||cE}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<vb(c,d,p)?u:c,E=vb(y,d,p),C=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const A=E-d,N=C-d;if(A!=N){for(let q=0;q<A;q++){const ee=q<p.length?p[q]:p[q]=0,Ie=ee+q;N<=Ie&&Ie<A&&(p[q]=ee+1)}p[y.previousIndex]=N-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!ol(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else d=0,function jm(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[bc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new dE(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new X_),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new X_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dE{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class X_{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new LA,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vb(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class J_{constructor(){}supports(o){return o instanceof Map||_p(o)}create(){return new wb}}class wb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||_p(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new hE(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class hE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ey(){return new Qp([new yb])}let Qp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ey()),deps:[[s,new ut,new we]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Te(901,!1)}}return s.\u0275prov=it({token:s,providedIn:"root",factory:ey}),s})();function hu(){return new Jp([new J_])}let Jp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||hu()),deps:[[s,new ut,new we]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Te(901,!1)}}return s.\u0275prov=it({token:s,providedIn:"root",factory:hu}),s})();const UA=z_(null,"core",[]);let BA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Ln(Ph))},s.\u0275mod=sn({type:s}),s.\u0275inj=mt({}),s})();function fE(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(_t,xe,F)=>{F.d(xe,{Z:()=>Te});var f=F(2090),$=F(4859),P=F(9681),re=F(1877);class se{constructor(ve,he){this._delegate=ve,this.firebase=he,(0,P._addComponent)(ve,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ve,he=P._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(ve);return!et.isInitialized()&&"EXPLICIT"===(null===(Qe=et.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:he})}_removeServiceInstance(ve,he=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(he)}_addComponent(ve){(0,P._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,P._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function me(){const tt=function le(tt){const ve={},he={__esModule:!0,initializeApp:function Re(ne,ae={}){const _e=P.initializeApp(ne,ae);if((0,f.r3)(ve,_e.name))return ve[_e.name];const ze=new tt(_e,he);return ve[_e.name]=ze,ze},app:et,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function be(ne){const ae=ne.name,_e=ae.replace("-compat","");if(P._registerComponent(ne)&&"PUBLIC"===ne.type){const ze=(qe=et())=>{if("function"!=typeof qe[_e])throw de.create("invalid-app-argument",{appName:ae});return qe[_e]()};void 0!==ne.serviceProps&&(0,f.ZB)(ze,ne.serviceProps),he[_e]=ze,tt.prototype[_e]=function(...qe){return this._getService.bind(this,ae).apply(this,ne.multipleInstances?qe:[])}}return"PUBLIC"===ne.type?he[_e]:null},removeApp:function Qe(ne){delete ve[ne]},useAsService:function We(ne,ae){return"serverAuth"===ae?null:ae},modularAPIs:P}};function et(ne){if(!(0,f.r3)(ve,ne=ne||P._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:ne});return ve[ne]}return he.default=he,Object.defineProperty(he,"apps",{get:function Me(){return Object.keys(ve).map(ne=>ve[ne])}}),et.App=tt,he}(se);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ve(he){(0,f.ZB)(tt,he)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),tt}(),G=new re.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=z;!function ke(tt){(0,P.registerVersion)("@firebase/app-compat","0.2.3",tt)}()},9681:(_t,xe,F)=>{F.r(xe),F.d(xe,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Lr,_DEFAULT_ENTRY_NAME:()=>Le,_addComponent:()=>_n,_addOrOverwriteComponent:()=>it,_apps:()=>ft,_clearComponents:()=>Gn,_components:()=>Ft,_getProvider:()=>mt,_registerComponent:()=>Et,_removeServiceInstance:()=>tn,deleteApp:()=>$i,getApp:()=>zn,getApps:()=>Ni,initializeApp:()=>Jr,onLog:()=>er,registerVersion:()=>lr,setLogLevel:()=>Sn});var f=F(5861),$=F(4859),P=F(1877),re=F(2090),se=F(8766);class pe{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function de(nt){return"VERSION"===nt.getComponent()?.type}(rt)){const xt=rt.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(rt=>rt).join(" ")}}const le="@firebase/app",z=new P.Yd("@firebase/app"),Le="[DEFAULT]",De={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,Ft=new Map;function _n(nt,Se){try{nt.container.addComponent(Se)}catch(rt){z.debug(`Component ${Se.name} failed to register with FirebaseApp ${nt.name}`,rt)}}function it(nt,Se){nt.container.addOrOverwriteComponent(Se)}function Et(nt){const Se=nt.name;if(Ft.has(Se))return z.debug(`There were multiple attempts to register component ${Se}.`),!1;Ft.set(Se,nt);for(const rt of ft.values())_n(rt,nt);return!0}function mt(nt,Se){const rt=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),nt.container.getProvider(Se)}function tn(nt,Se,rt=Le){mt(nt,Se).clearInstance(rt)}function Gn(){Ft.clear()}const fn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wr{constructor(Se,rt,xt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}const Lr="9.17.1";function Jr(nt,Se={}){let rt=nt;"object"!=typeof Se&&(Se={name:Se});const xt=Object.assign({name:Le,automaticDataCollectionEnabled:!1},Se),Ot=xt.name;if("string"!=typeof Ot||!Ot)throw fn.create("bad-app-name",{appName:String(Ot)});if(rt||(rt=(0,re.aH)()),!rt)throw fn.create("no-options");const sn=ft.get(Ot);if(sn){if((0,re.vZ)(rt,sn.options)&&(0,re.vZ)(xt,sn.config))return sn;throw fn.create("duplicate-app",{appName:Ot})}const W=new $.H0(Ot);for(const K of Ft.values())W.addComponent(K);const H=new wr(rt,xt,W);return ft.set(Ot,H),H}function zn(nt=Le){const Se=ft.get(nt);if(!Se&&nt===Le)return Jr();if(!Se)throw fn.create("no-app",{appName:nt});return Se}function Ni(){return Array.from(ft.values())}function $i(nt){return Je.apply(this,arguments)}function Je(){return(Je=(0,f.Z)(function*(nt){const Se=nt.name;ft.has(Se)&&(ft.delete(Se),yield Promise.all(nt.container.getProviders().map(rt=>rt.delete())),nt.isDeleted=!0)})).apply(this,arguments)}function lr(nt,Se,rt){var xt;let Ot=null!==(xt=De[nt])&&void 0!==xt?xt:nt;rt&&(Ot+=`-${rt}`);const sn=Ot.match(/\s|\//),W=Se.match(/\s|\//);if(sn||W){const H=[`Unable to register library "${Ot}" with version "${Se}":`];return sn&&H.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),sn&&W&&H.push("and"),W&&H.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void z.warn(H.join(" "))}Et(new $.wA(`${Ot}-version`,()=>({library:Ot,version:Se}),"VERSION"))}function er(nt,Se){if(null!==nt&&"function"!=typeof nt)throw fn.create("invalid-log-argument");(0,P.Am)(nt,Se)}function Sn(nt){(0,P.Ub)(nt)}const An="firebase-heartbeat-store";let Rn=null;function bn(){return Rn||(Rn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(nt,Se)=>{0===Se&&nt.createObjectStore(An)}}).catch(nt=>{throw fn.create("idb-open",{originalErrorMessage:nt.message})})),Rn}function vt(){return(vt=(0,f.Z)(function*(nt){try{return(yield bn()).transaction(An).objectStore(An).get(tr(nt))}catch(Se){if(Se instanceof re.ZR)z.warn(Se.message);else{const rt=fn.create("idb-get",{originalErrorMessage:Se?.message});z.warn(rt.message)}}})).apply(this,arguments)}function Vt(nt,Se){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(nt,Se){try{const xt=(yield bn()).transaction(An,"readwrite");return yield xt.objectStore(An).put(Se,tr(nt)),xt.done}catch(rt){if(rt instanceof re.ZR)z.warn(rt.message);else{const xt=fn.create("idb-set",{originalErrorMessage:rt?.message});z.warn(xt.message)}}})).apply(this,arguments)}function tr(nt){return`${nt.name}!${nt.options.appId}`}class ei{constructor(Se){this.container=Se,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new nn(rt),this._heartbeatsCachePromise=this._storage.read().then(xt=>(this._heartbeatsCache=xt,xt))}triggerHeartbeat(){var Se=this;return(0,f.Z)(function*(){const xt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=jt();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!Se._heartbeatsCache.heartbeats.some(sn=>sn.date===Ot))return Se._heartbeatsCache.heartbeats.push({date:Ot,agent:xt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(sn=>{const W=new Date(sn.date).valueOf();return Date.now()-W<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,f.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const rt=jt(),{heartbeatsToSend:xt,unsentEntries:Ot}=function oi(nt,Se=1024){const rt=[];let xt=nt.slice();for(const Ot of nt){const sn=rt.find(W=>W.agent===Ot.agent);if(sn){if(sn.dates.push(Ot.date),Er(rt)>Se){sn.dates.pop();break}}else if(rt.push({agent:Ot.agent,dates:[Ot.date]}),Er(rt)>Se){rt.pop();break}xt=xt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:xt}}(Se._heartbeatsCache.heartbeats),sn=(0,re.L)(JSON.stringify({version:2,heartbeats:xt}));return Se._heartbeatsCache.lastSentHeartbeatDate=rt,Ot.length>0?(Se._heartbeatsCache.heartbeats=Ot,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),sn})()}}function jt(){return(new Date).toISOString().substring(0,10)}class nn{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,f.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function yt(nt){return vt.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var rt=this;return(0,f.Z)(function*(){var xt;if(yield rt._canUseIndexedDBPromise){const sn=yield rt.read();return Vt(rt.app,{lastSentHeartbeatDate:null!==(xt=Se.lastSentHeartbeatDate)&&void 0!==xt?xt:sn.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var rt=this;return(0,f.Z)(function*(){var xt;if(yield rt._canUseIndexedDBPromise){const sn=yield rt.read();return Vt(rt.app,{lastSentHeartbeatDate:null!==(xt=Se.lastSentHeartbeatDate)&&void 0!==xt?xt:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...Se.heartbeats]})}})()}}function Er(nt){return(0,re.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function On(nt){Et(new $.wA("platform-logger",Se=>new pe(Se),"PRIVATE")),Et(new $.wA("heartbeat",Se=>new ei(Se),"PRIVATE")),lr(le,"0.9.3",nt),lr(le,"0.9.3","esm2017"),lr("fire-js","")}("")},4859:(_t,xe,F)=>{F.d(xe,{H0:()=>le,wA:()=>P});var f=F(5861),$=F(2090);class P{constructor(z,G,X){this.name=z,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const re="[DEFAULT]";class se{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const X=new $.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:G});He&&X.resolve(He)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const X=this.normalizeInstanceIdentifier(z?.identifier),He=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(ke){if(He)return null;throw ke}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function de(me){return"EAGER"===me.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(G);try{const ke=this.getOrInitializeService({instanceIdentifier:He});X.resolve(ke)}catch{}}}}clearInstance(z=re){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=re){return this.instances.has(z)}getOptions(z=re){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,X=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[ke,Te]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(ke)&&Te.resolve(He);return He}onInit(z,G){var X;const He=this.normalizeInstanceIdentifier(G),ke=null!==(X=this.onInitCallbacks.get(He))&&void 0!==X?X:new Set;ke.add(z),this.onInitCallbacks.set(He,ke);const Te=this.instances.get(He);return Te&&z(Te,He),()=>{ke.delete(z)}}invokeOnInitCallbacks(z,G){const X=this.onInitCallbacks.get(G);if(X)for(const He of X)try{He(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let X=this.instances.get(z);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(me=z,me===re?void 0:me),options:G}),this.instances.set(z,X),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(X,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,X)}catch{}var me;return X||null}normalizeInstanceIdentifier(z=re){return this.component?this.component.multipleInstances?z:re:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new se(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,xe,F)=>{F.d(xe,{Am:()=>me,Ub:()=>le,Yd:()=>de,in:()=>$});const f=[];var $=(()=>{return(z=$||($={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",$;var z})();const P={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},re=$.INFO,se={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},pe=(z,G,...X)=>{if(G<z.logLevel)return;const He=(new Date).toISOString(),ke=se[G];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[ke](`[${He}]  ${z.name}:`,...X)};class de{constructor(G){this.name=G,this._logLevel=re,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in $))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?P[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...G),this._logHandler(this,$.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...G),this._logHandler(this,$.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,$.INFO,...G),this._logHandler(this,$.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,$.WARN,...G),this._logHandler(this,$.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...G),this._logHandler(this,$.ERROR,...G)}}function le(z){f.forEach(G=>{G.setLogLevel(z)})}function me(z,G){for(const X of f){let He=null;G&&G.level&&(He=P[G.level]),X.userLogHandler=null===z?null:(ke,Te,...tt)=>{const ve=tt.map(he=>{if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch{return null}}).filter(he=>he).join(" ");Te>=(He??ke.logLevel)&&z({level:$[Te].toLowerCase(),message:ve,args:tt,type:ke.name})}}}},259:(_t,xe,F)=>{F.d(xe,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=F(9681);(0,f.registerVersion)("firebase","9.17.1","app")},9260:(_t,xe,F)=>{F.d(xe,{Z:()=>f.Z});var f=F(3942);f.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(_t,xe,F)=>{F.r(xe);var f=F(5861),$=F(3942),P=F(2722),re=F(2090),de=(F(9681),F(1877),F(4859));function le(){return window}function G(){return(G=(0,f.Z)(function*(U,M,V){var J;const{BuildInfo:Ve}=le();(0,P.ap)(M.sessionId,"AuthEvent did not contain a session ID");const st=yield he(M.sessionId),ct={};return(0,P.aq)()?ct.ibi=Ve.packageName:(0,P.ar)()?ct.apn=Ve.packageName:(0,P.as)(U,"operation-not-supported-in-this-environment"),Ve.displayName&&(ct.appDisplayName=Ve.displayName),ct.sessionId=st,(0,P.at)(U,V,M.type,void 0,null!==(J=M.eventId)&&void 0!==J?J:void 0,ct)})).apply(this,arguments)}function He(){return(He=(0,f.Z)(function*(U){const{BuildInfo:M}=le(),V={};(0,P.aq)()?V.iosBundleId=M.packageName:(0,P.ar)()?V.androidPackageName=M.packageName:(0,P.as)(U,"operation-not-supported-in-this-environment"),yield(0,P.au)(U,V)})).apply(this,arguments)}function tt(){return(tt=(0,f.Z)(function*(U,M,V){const{cordova:J}=le();let Ve=()=>{};try{yield new Promise((st,ct)=>{let Ae=null;function Be(){var Ht;st();const En=null===(Ht=J.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof En&&En(),"function"==typeof V?.close&&V.close()}function Ut(){Ae||(Ae=window.setTimeout(()=>{ct((0,P.aw)(U,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Ut()}M.addPassiveListener(Be),document.addEventListener("resume",Ut,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",wn,!1),Ve=()=>{M.removePassiveListener(Be),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",wn,!1),Ae&&window.clearTimeout(Ae)}})}finally{Ve()}})).apply(this,arguments)}function he(U){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,f.Z)(function*(U){const M=et(U),V=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(V)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function et(U){if((0,P.ap)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const M=new ArrayBuffer(U.length),V=new Uint8Array(M);for(let J=0;J<U.length;J++)V[J]=U.charCodeAt(J);return V}class Me extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(V=>V(M)),super.onEvent(M)}initialized(){var M=this;return(0,f.Z)(function*(){yield M.initPromise})()}}function ne(U){return ae.apply(this,arguments)}function ae(){return(ae=(0,f.Z)(function*(U){const M=yield qe()._get(kt(U));return M&&(yield qe()._remove(kt(U))),M})).apply(this,arguments)}function ze(){const U=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let V=0;V<20;V++){const J=Math.floor(Math.random()*M.length);U.push(M.charAt(J))}return U.join("")}function qe(){return(0,P.az)(P.b)}function kt(U){return(0,P.aA)("authEvent",U.config.apiKey,U.name)}function ge(U){if(!U?.includes("?"))return{};const[M,...V]=U.split("?");return(0,re.zd)(V.join("?"))}function De(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Et(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function tn(U=(0,re.z$)()){return!("file:"!==Et()&&"ionic:"!==Et()&&"capacitor:"!==Et()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lr(){try{const U=self.localStorage,M=P.aI();if(U)return U.setItem(M,"1"),U.removeItem(M),!function wr(U=(0,re.z$)()){return function Bn(){return(0,re.w1)()&&11===document?.documentMode}()||function fn(U=(0,re.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,re.hl)()}catch{return Jr()&&(0,re.hl)()}return!1}function Jr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function mt(){return"http:"===Et()||"https:"===Et()}()||(0,re.ru)()||tn())&&!function Gn(){return(0,re.b$)()||(0,re.UG)()}()&&Lr()&&!Jr()}function Ni(){return tn()&&typeof document<"u"}function Je(){return(Je=(0,f.Z)(function*(){return!!Ni()&&new Promise(U=>{const M=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),U(!0)})})})).apply(this,arguments)}const er={LOCAL:"local",NONE:"none",SESSION:"session"},Sn=P.ax,xr="persistence";function An(U){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(U){yield U._initializationPromise;const M=yt(),V=P.aA(xr,U.config.apiKey,U.name);M&&M.setItem(V,U._getPersistence())})).apply(this,arguments)}function yt(){var U;try{return(null===(U=function lr(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const vt=P.ax;class Vt{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(class Oe{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(M){var V=this;return(0,f.Z)(function*(){const J=M._key();let Ve=V.eventManagers.get(J);return Ve||(Ve=new Me(M),V.eventManagers.set(J,Ve),V.attachCallbackListeners(M,Ve)),Ve})()}_openPopup(M){(0,P.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,V,J,Ve){var st=this;return(0,f.Z)(function*(){!function ve(U){var M,V,J,Ve,st,ct,Ae,Be,Ut,wn;const Ht=le();(0,P.ax)("function"==typeof(null===(M=Ht?.universalLinks)||void 0===M?void 0:M.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(V=Ht?.BuildInfo)||void 0===V?void 0:V.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(st=null===(Ve=null===(J=Ht?.cordova)||void 0===J?void 0:J.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===st?void 0:st.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Be=null===(Ae=null===(ct=Ht?.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===Be?void 0:Be.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(wn=null===(Ut=Ht?.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===wn?void 0:wn.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const ct=yield st._initialize(M);yield ct.initialized(),ct.resetRedirect(),(0,P.aD)(),yield st._originValidation(M);const Ae=function be(U,M,V=null){return{type:M,eventId:V,urlResponse:null,sessionId:ze(),postBody:null,tenantId:U.tenantId,error:(0,P.aw)(U,"no-auth-event")}}(M,J,Ve);yield function We(U,M){return qe()._set(kt(U),M)}(M,Ae);const Be=yield function z(U,M,V){return G.apply(this,arguments)}(M,Ae,V),Ut=yield function ke(U){const{cordova:M}=le();return new Promise(V=>{M.plugins.browsertab.isAvailable(J=>{let Ve=null;J?M.plugins.browsertab.openUrl(U):Ve=M.InAppBrowser.open(U,(0,P.av)()?"_blank":"_system","location=yes"),V(Ve)})})}(Be);return function Te(U,M,V){return tt.apply(this,arguments)}(M,ct,Ut)})()}_isIframeWebStorageSupported(M,V){throw new Error("Method not implemented.")}_originValidation(M){const V=M._key();return this.originValidationPromises[V]||(this.originValidationPromises[V]=function X(U){return He.apply(this,arguments)}(M)),this.originValidationPromises[V]}attachCallbackListeners(M,V){const{universalLinks:J,handleOpenURL:Ve,BuildInfo:st}=le(),ct=setTimeout((0,f.Z)(function*(){yield ne(M),V.onEvent(De())}),500),Ae=function(){var wn=(0,f.Z)(function*(Ht){clearTimeout(ct);const En=yield ne(M);let ss=null;En&&Ht?.url&&(ss=function _e(U,M){var V,J;const Ve=function oe(U){const M=ge(U),V=M.link?decodeURIComponent(M.link):void 0,J=ge(V).link,Ve=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return ge(Ve).link||Ve||J||V||U}(M);if(Ve.includes("/__/auth/callback")){const st=ge(Ve),ct=st.firebaseError?function Xe(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,Ae=null===(J=null===(V=ct?.code)||void 0===V?void 0:V.split("auth/"))||void 0===J?void 0:J[1],Be=Ae?(0,P.aw)(Ae):null;return Be?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Ve,postBody:null}}return null}(En,Ht.url)),V.onEvent(ss||De())});return function(En){return wn.apply(this,arguments)}}();typeof J<"u"&&"function"==typeof J.subscribe&&J.subscribe(null,Ae);const Be=Ve,Ut=`${st.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var wn=(0,f.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Ut)&&Ae({url:Ht}),"function"==typeof Be)try{Be(Ht)}catch(En){console.error(En)}});return function(Ht){return wn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(M){var V=this;return(0,f.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,V,J,Ve){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(M,V,J,Ve)})()}_openRedirect(M,V,J,Ve){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(M,V,J,Ve)})()}_isIframeWebStorageSupported(M,V){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,V)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return Ni()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,f.Z)(function*(){if(M.underlyingResolver)return;const V=yield function $i(){return Je.apply(this,arguments)}();M.underlyingResolver=V?M.cordovaResolver:M.browserResolver})()}}function si(U){return U.unwrap()}function Wr(U){return ei(U)}function ei(U){const{_tokenResponse:M}=U instanceof re.ZR?U.customData:U;if(!M)return null;if(!(U instanceof re.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return P.P.credentialFromResult(U);const V=M.providerId;if(!V||V===P.o.PASSWORD)return null;let J;switch(V){case P.o.GOOGLE:J=P.Q;break;case P.o.FACEBOOK:J=P.N;break;case P.o.GITHUB:J=P.T;break;case P.o.TWITTER:J=P.W;break;default:const{oauthIdToken:Ve,oauthAccessToken:st,oauthTokenSecret:ct,pendingToken:Ae,nonce:Be}=M;return st||ct||Ve||Ae?Ae?V.startsWith("saml.")?P.aL._create(V,Ae):P.J._fromParams({providerId:V,signInMethod:V,pendingToken:Ae,idToken:Ve,accessToken:st}):new P.U(V).credential({idToken:Ve,accessToken:st,rawNonce:Be}):null}return U instanceof re.ZR?J.credentialFromError(U):J.credentialFromResult(U)}function jt(U,M){return M.catch(V=>{throw V instanceof re.ZR&&function Pt(U,M){var V;const J=null===(V=M.customData)||void 0===V?void 0:V._tokenResponse;if("auth/multi-factor-auth-required"===M?.code)M.resolver=new Er(U,P.an(U,M));else if(J){const Ve=ei(M),st=M;Ve&&(st.credential=Ve,st.tenantId=J.tenantId||void 0,st.email=J.email||void 0,st.phoneNumber=J.phoneNumber||void 0)}}(U,V),V}).then(V=>{const Ve=V.user;return{operationType:V.operationType,credential:Wr(V),additionalUserInfo:P.al(V),user:On.getOrCreate(Ve)}})}function oi(U,M){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(U,M){const V=yield M;return{verificationId:V.verificationId,confirm:J=>jt(U,V.confirm(J))}})).apply(this,arguments)}class Er{constructor(M,V){this.resolver=V,this.auth=function tr(U){return U.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return jt(si(this.auth),this.resolver.resolveSignIn(M))}}class On{constructor(M){this._delegate=M,this.multiFactor=P.ao(M)}static getOrCreate(M){return On.USER_MAP.has(M)||On.USER_MAP.set(M,new On(M)),On.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var V=this;return(0,f.Z)(function*(){return jt(V.auth,P.Z(V._delegate,M))})()}linkWithPhoneNumber(M,V){var J=this;return(0,f.Z)(function*(){return oi(J.auth,P.l(J._delegate,M,V))})()}linkWithPopup(M){var V=this;return(0,f.Z)(function*(){return jt(V.auth,P.d(V._delegate,M,Vt))})()}linkWithRedirect(M){var V=this;return(0,f.Z)(function*(){return yield An(P.aE(V.auth)),P.g(V._delegate,M,Vt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var V=this;return(0,f.Z)(function*(){return jt(V.auth,P._(V._delegate,M))})()}reauthenticateWithPhoneNumber(M,V){return oi(this.auth,P.r(this._delegate,M,V))}reauthenticateWithPopup(M){return jt(this.auth,P.e(this._delegate,M,Vt))}reauthenticateWithRedirect(M){var V=this;return(0,f.Z)(function*(){return yield An(P.aE(V.auth)),P.h(V._delegate,M,Vt)})()}sendEmailVerification(M){return P.ab(this._delegate,M)}unlink(M){var V=this;return(0,f.Z)(function*(){return yield P.ak(V._delegate,M),V})()}updateEmail(M){return P.ag(this._delegate,M)}updatePassword(M){return P.ah(this._delegate,M)}updatePhoneNumber(M){return P.u(this._delegate,M)}updateProfile(M){return P.af(this._delegate,M)}verifyBeforeUpdateEmail(M,V){return P.ac(this._delegate,M,V)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}On.USER_MAP=new WeakMap;const nt=P.ax;let Se=(()=>{class U{constructor(V,J){if(this.app=V,J.isInitialized())return this._delegate=J.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=V.options;nt(Ve,"invalid-api-key",{appName:V.name}),nt(Ve,"invalid-api-key",{appName:V.name});const st=typeof window<"u"?Vt:void 0;this._delegate=J.initialize({options:{persistence:xt(Ve,V.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?On.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(V){this._delegate.languageCode=V}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(V){this._delegate.tenantId=V}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(V,J){P.G(this._delegate,V,J)}applyActionCode(V){return P.a2(this._delegate,V)}checkActionCode(V){return P.a3(this._delegate,V)}confirmPasswordReset(V,J){return P.a1(this._delegate,V,J)}createUserWithEmailAndPassword(V,J){var Ve=this;return(0,f.Z)(function*(){return jt(Ve._delegate,P.a5(Ve._delegate,V,J))})()}fetchProvidersForEmail(V){return this.fetchSignInMethodsForEmail(V)}fetchSignInMethodsForEmail(V){return P.aa(this._delegate,V)}isSignInWithEmailLink(V){return P.a8(this._delegate,V)}getRedirectResult(){var V=this;return(0,f.Z)(function*(){nt(zn(),V._delegate,"operation-not-supported-in-this-environment");const J=yield P.j(V._delegate,Vt);return J?jt(V._delegate,Promise.resolve(J)):{credential:null,user:null}})()}addFrameworkForLogging(V){!function ft(U,M){(0,P.aE)(U)._logFramework(M)}(this._delegate,V)}onAuthStateChanged(V,J,Ve){const{next:st,error:ct,complete:Ae}=rt(V,J,Ve);return this._delegate.onAuthStateChanged(st,ct,Ae)}onIdTokenChanged(V,J,Ve){const{next:st,error:ct,complete:Ae}=rt(V,J,Ve);return this._delegate.onIdTokenChanged(st,ct,Ae)}sendSignInLinkToEmail(V,J){return P.a7(this._delegate,V,J)}sendPasswordResetEmail(V,J){return P.a0(this._delegate,V,J||void 0)}setPersistence(V){var J=this;return(0,f.Z)(function*(){let Ve;switch(function Gs(U,M){Sn(Object.values(er).includes(M),U,"invalid-persistence-type"),(0,re.b$)()?Sn(M!==er.SESSION,U,"unsupported-persistence-type"):(0,re.UG)()?Sn(M===er.NONE,U,"unsupported-persistence-type"):Jr()?Sn(M===er.NONE||M===er.LOCAL&&(0,re.hl)(),U,"unsupported-persistence-type"):Sn(M===er.NONE||Lr(),U,"unsupported-persistence-type")}(J._delegate,V),V){case er.SESSION:Ve=P.a;break;case er.LOCAL:Ve=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case er.NONE:Ve=P.L;break;default:return P.as("argument-error",{appName:J._delegate.name})}return J._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(V){return this.signInWithCredential(V)}signInAnonymously(){return jt(this._delegate,P.X(this._delegate))}signInWithCredential(V){return jt(this._delegate,P.Y(this._delegate,V))}signInWithCustomToken(V){return jt(this._delegate,P.$(this._delegate,V))}signInWithEmailAndPassword(V,J){return jt(this._delegate,P.a6(this._delegate,V,J))}signInWithEmailLink(V,J){return jt(this._delegate,P.a9(this._delegate,V,J))}signInWithPhoneNumber(V,J){return oi(this._delegate,P.s(this._delegate,V,J))}signInWithPopup(V){var J=this;return(0,f.Z)(function*(){return nt(zn(),J._delegate,"operation-not-supported-in-this-environment"),jt(J._delegate,P.c(J._delegate,V,Vt))})()}signInWithRedirect(V){var J=this;return(0,f.Z)(function*(){return nt(zn(),J._delegate,"operation-not-supported-in-this-environment"),yield An(J._delegate),P.f(J._delegate,V,Vt)})()}updateCurrentUser(V){return this._delegate.updateCurrentUser(V)}verifyPasswordResetCode(V){return P.a4(this._delegate,V)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=er,U})();function rt(U,M,V){let J=U;"function"!=typeof U&&({next:J,error:M,complete:V}=U);const Ve=J;return{next:ct=>Ve(ct&&On.getOrCreate(ct)),error:M,complete:V}}function xt(U,M){const V=function bn(U,M){const V=yt();if(!V)return[];const J=P.aA(xr,U,M);switch(V.getItem(J)){case er.NONE:return[P.L];case er.LOCAL:return[P.i,P.a];case er.SESSION:return[P.a];default:return[]}}(U,M);if(typeof self<"u"&&!V.includes(P.i)&&V.push(P.i),typeof window<"u")for(const J of[P.b,P.a])V.includes(J)||V.push(J);return V.includes(P.L)||V.push(P.L),V}class Ot{constructor(){this.providerId="phone",this._delegate=new P.P(si($.Z.auth()))}static credential(M,V){return P.P.credential(M,V)}verifyPhoneNumber(M,V){return this._delegate.verifyPhoneNumber(M,V)}unwrap(){return this._delegate}}Ot.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Ot.PROVIDER_ID=P.P.PROVIDER_ID;const sn=P.ax;class W{constructor(M,V,J=$.Z.app()){var Ve;sn(null===(Ve=J.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:J.name}),this._delegate=new P.R(M,V,J.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function K(U){U.INTERNAL.registerComponent(new de.wA("auth-compat",M=>{const V=M.getProvider("app-compat").getImmediate(),J=M.getProvider("auth");return new Se(V,J)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:Ot,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:W,TwitterAuthProvider:P.W,Auth:Se,AuthCredential:P.H,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.3.3")}($.Z)},8766:(_t,xe,F)=>{F.d(xe,{Lj:()=>Re,X3:()=>et});var f=F(5861);let P,re;const de=new WeakMap,le=new WeakMap,me=new WeakMap,z=new WeakMap,G=new WeakMap;let ke={get(ae,_e,ze){if(ae instanceof IDBTransaction){if("done"===_e)return le.get(ae);if("objectStoreNames"===_e)return ae.objectStoreNames||me.get(ae);if("store"===_e)return ze.objectStoreNames[1]?void 0:ze.objectStore(ze.objectStoreNames[0])}return he(ae[_e])},set:(ae,_e,ze)=>(ae[_e]=ze,!0),has:(ae,_e)=>ae instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in ae};function ve(ae){return"function"==typeof ae?function tt(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(..._e){return ae.apply(Qe(this),_e),he(de.get(this))}:function(..._e){return he(ae.apply(Qe(this),_e))}:function(_e,...ze){const qe=ae.call(Qe(this),_e,...ze);return me.set(qe,_e.sort?_e.sort():[_e]),he(qe)}}(ae):(ae instanceof IDBTransaction&&function He(ae){if(le.has(ae))return;const _e=new Promise((ze,qe)=>{const kt=()=>{ae.removeEventListener("complete",Xe),ae.removeEventListener("error",oe),ae.removeEventListener("abort",oe)},Xe=()=>{ze(),kt()},oe=()=>{qe(ae.error||new DOMException("AbortError","AbortError")),kt()};ae.addEventListener("complete",Xe),ae.addEventListener("error",oe),ae.addEventListener("abort",oe)});le.set(ae,_e)}(ae),((ae,_e)=>_e.some(ze=>ae instanceof ze))(ae,function se(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,ke):ae)}function he(ae){if(ae instanceof IDBRequest)return function X(ae){const _e=new Promise((ze,qe)=>{const kt=()=>{ae.removeEventListener("success",Xe),ae.removeEventListener("error",oe)},Xe=()=>{ze(he(ae.result)),kt()},oe=()=>{qe(ae.error),kt()};ae.addEventListener("success",Xe),ae.addEventListener("error",oe)});return _e.then(ze=>{ze instanceof IDBCursor&&de.set(ze,ae)}).catch(()=>{}),G.set(_e,ae),_e}(ae);if(z.has(ae))return z.get(ae);const _e=ve(ae);return _e!==ae&&(z.set(ae,_e),G.set(_e,ae)),_e}const Qe=ae=>G.get(ae);function et(ae,_e,{blocked:ze,upgrade:qe,blocking:kt,terminated:Xe}={}){const oe=indexedDB.open(ae,_e),ge=he(oe);return qe&&oe.addEventListener("upgradeneeded",Ee=>{qe(he(oe.result),Ee.oldVersion,Ee.newVersion,he(oe.transaction))}),ze&&oe.addEventListener("blocked",()=>ze()),ge.then(Ee=>{Xe&&Ee.addEventListener("close",()=>Xe()),kt&&Ee.addEventListener("versionchange",()=>kt())}).catch(()=>{}),ge}function Re(ae,{blocked:_e}={}){const ze=indexedDB.deleteDatabase(ae);return _e&&ze.addEventListener("blocked",()=>_e()),he(ze).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],We=new Map;function ne(ae,_e){if(!(ae instanceof IDBDatabase)||_e in ae||"string"!=typeof _e)return;if(We.get(_e))return We.get(_e);const ze=_e.replace(/FromIndex$/,""),qe=_e!==ze,kt=be.includes(ze);if(!(ze in(qe?IDBIndex:IDBObjectStore).prototype)||!kt&&!Me.includes(ze))return;const Xe=function(){var oe=(0,f.Z)(function*(ge,...Ee){const Oe=this.transaction(ge,kt?"readwrite":"readonly");let Le=Oe.store;return qe&&(Le=Le.index(Ee.shift())),(yield Promise.all([Le[ze](...Ee),kt&&Oe.done]))[0]});return function(Ee){return oe.apply(this,arguments)}}();return We.set(_e,Xe),Xe}!function Te(ae){ke=ae(ke)}(ae=>({...ae,get:(_e,ze,qe)=>ne(_e,ze)||ae.get(_e,ze,qe),has:(_e,ze)=>!!ne(_e,ze)||ae.has(_e,ze)}))},5861:(_t,xe,F)=>{function f(P,re,se,pe,de,le,me){try{var z=P[le](me),G=z.value}catch(X){return void se(X)}z.done?re(G):Promise.resolve(G).then(pe,de)}function $(P){return function(){var re=this,se=arguments;return new Promise(function(pe,de){var le=P.apply(re,se);function me(G){f(le,pe,de,me,z,"next",G)}function z(G){f(le,pe,de,me,z,"throw",G)}me(void 0)})}}F.d(xe,{Z:()=>$})}},_t=>{_t(_t.s=188)}]);